<?xml version="1.0" encoding="UTF-8"?>
<a:screen xmlns:a="http://www.leaf-framework.org/application" dynamiccreateenabled="true" trace="true" customizationenabled="true">
    <a:init-procedure>
        <s:server-script xmlns:s="leaf.plugin.script" import="contract_print_path.js"><![CDATA[
            $ctx.parameter.tomcat_source = con_print_path['tomcat_source'];
        ]]></s:server-script>
    </a:init-procedure>
    <a:view template="defaultIncludedScreen" package="ui.template">
        <a:link url="${/request/@context_path}/modules/hls/HLS214N/member_excel_import.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_member_excel_import"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS214N/manager_excel_import.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_manager_excel_import"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS214N/shockholder_excel_import.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_shockholder_excel_import"/>
        <a:link url="${/request/@context_path}/uploadFile.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_uploadFile_id"/>
        <a:link url="${/request/@context_path}/downloadFile.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_downloadFile_id"/>
        <a:link url="${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_change_rate.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_change_rate_link_id"/>
        <a:link url="${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_handle_query.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_handle_query_link_id"/>
        <a:link url="${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_handle_formula.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_handle_formula_link_id"/>
        <a:link url="${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_handle.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_rsc_financial_template_load_link_id"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ509/prj_project_statement_note.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_prj_project_statement_note_link_id"/>
        <a:link url="${/request/@context_path}/modules/rsc/RSC304/rsc_fin_statement_prj_import_cashflow_forecast.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_statement_prj_import_cashflow_forecast_link_id"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS213/hls_bp_master_dynamic_update.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_dynamic_update_link_id"/>
        <a:link modelaction="update" model="hls.HLS213.hls_bp_master_get_layout_code" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_get_layout_code_link_id"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS500/hls_fin_calc_quotation_header.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_prj500_quote_link_id"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS500/hls_fin_calc_quotation_header.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calc_quotation_header_link_id"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS500N/hls_fin_calculator_update_n.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calculator_update_link_id"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS500/hls_fin_doc_quotation.lsc" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_doc_quotation_link_id"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ501N/prj_project_report_detail.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_report_detail_link"/>
        <a:link modelaction="query" model="prj.PRJ501.get_report_bp_id" id="${/parameter/@layout_code}${/parameter/@tree_code}_get_rpt_bp_link"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS500/hls_fin_calculator_readonly.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calculator_readonly_link_id"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ501N/prj_lease_item_upload.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_lease_item_upload_link_id"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ502N/prj_project_link_read_screen.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_prj_detail_link_id"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ501N/lease_item_import_upload.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_lease_item_import_link"/>
        <a:link url="${/request/@context_path}/modules/view_pdf.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_view_pdf_id"/>
        <a:link modelaction="update" model="cont.CON500.con_contract_get_layout_code" id="${/parameter/@layout_code}${/parameter/@tree_code}_con_contract_get_layout_code_link_id"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS214N/hls_bp_master_modify.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_modify_link"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS213N/hls_bp_master_create_entrance.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}_bp_create_entrance"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ501/prj_project_bp_tenant_sec.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}prj_project_bp_tenant_sec_modify_link"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ501/prj_project_bp_guarantee.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}prj_project_bp_guarantee_modify_link"/>
        <a:link url="${/request/@context_path}/modules/prj/PRJ501/prj_project_bp_act_ctrler.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}prj_project_bp_guarantee_np_modify_link"/>
        <link type="text/css" rel="stylesheet" href="${/request/@context_path}/css/lightbox.css"/>
        <a:link url="${/request/@context_path}/modules/hls/HLS213N/hls_bp_master_create_entrance.lview" id="${/parameter/@layout_code}${/parameter/@tree_code}prj_project_create_link"/>
        <script src="${/request/@context_path}/javascripts/lightbox.js"/>
        <a:screen-include screen="modules/layout/flexible_UI.lview?layout_code=WCS_PROJECT_MODIFY&amp;winid=${/parameter/@winid}"/>
        <a:screen-include screen="modules/layout/flexible_UI.lview?layout_code=WCS_PROJECT_MODIFY&amp;winid=${/parameter/@winid}&amp;bp_seq=1"/>
        <a:screen-include screen="modules/layout/flexible_UI.lview?layout_code=WCS_PROJECT_MODIFY&amp;winid=${/parameter/@winid}&amp;bp_seq=2"/>
        <a:screen-include screen="modules/layout/flexible_UI.lview?layout_code=WCS_PROJECT_MODIFY&amp;winid=${/parameter/@winid}&amp;bp_seq=3"/>
        <style><![CDATA[
        .layout_gridbox_button_hide .gridbox-close-button,.layout_gridbox_button_hide .gridbox-button{display:none}
        ]]></style>
        <script><![CDATA[window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']={"number_of_quotation":"","cdd_list_id":"12916","document_category":"PROJECT","function_usage":"MODIFY","winid":"hls_doc_get_layout_code_winid","document_id":"36094","tree_code":"ACT_CTRLER","_vh":"795","number_of_actual_controller":"3","function_code":"PRJ501D","layout_debugger_flag":"Y","project_id":"36094","prj_bp_id":"106932","document_type":"PRJLB","number_of_tenant":"0","declare_flag":"Y","_vw":"1740","calc_type":"CLASSIC_CALCULATOR","number_of_guarantor":"1","maintain_type":"UPDATE","default_value_dsid":"","instance_id":"","tree_index":"","bp_id":"108","__parameter_parsed__":true,"layout_code":"WCS_PROJECT_MODIFY"};

        Ext.ux.Lightbox.register('a[ref=img]', true);

        window['${/parameter/@layout_code}_on_layout_dynamic_submitsuccess'] = function(ds, record, res, bp_seq) {
            window['${/parameter/@layout_code}_unlock_layout_dynamic_window']();
        };

        window['${/parameter/@layout_code}_on_layout_dynamic_form_add_and_load'] = function(ds, record) {
            window['${/parameter/@layout_code}_unlock_layout_dynamic_window']();
            var project_bp_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_bp');
            if (ds.id == project_bp_ds_id) {
                if (record.get('organization_code_flag')) {
                    if (record.get('organization_code_flag') == 'Y') {
                        record.getField('business_license_num').setRequired(false);
                        record.getField('tax_registry_num').setRequired(false);
                    } else if (record.get('organization_code_flag') == 'N') {
                        record.getField('business_license_num').setRequired(true);
                        record.getField('tax_registry_num').setRequired(true);
                    }
                }
            }
        };

        //更新时调用
        window['${/parameter/@bp_seq}${/parameter/@layout_code}_on_layout_dynamic_update'] = function(ds, record, name, value, old_value, bp_seq) {
            var project_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
            var project_bp_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_bp');
            var estimate_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_estimate');
            var lease_item_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_lease_item');
            var contact_info_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'hls_bp_master_contact_info');
            var address_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'hls_bp_master_address');
            var stockholder_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'hls_bp_master_stockholder');

            if (ds.id == project_ds_id && (name == 'bp_id_tenant_n' || name == 'employee_id_n')) {
                record.set('project_name', record.get('employee_id_n') + '+' + record.get('bp_id_tenant_n'));
            } else if (ds.id == estimate_ds_id) { //如果是新项目资金费用变更，进行更新总金额等
                var paid_in_capital = record.get('paid_in_capital') || 0,
                    board_invest = record.get('board_invest') || 0,
                    ap = record.get('ap') || 0,
                    bank_loan = record.get('bank_loan') || 0,
                    net_financed_amount = record.get('net_financed_amount') || 0,
                    extra_capital = record.get('extra_capital') || 0;
                var total_capital = paid_in_capital + board_invest + ap + bank_loan + net_financed_amount + extra_capital;
                record.set('total_capital', total_capital);

                var device_cost = record.get('device_cost') || 0,
                    rental = record.get('rental') || 0,
                    land_cost = record.get('land_cost') || 0,
                    prj_cost_extra = record.get('prj_cost_extra') || 0,
                    stock_amount = record.get('stock_amount') || 0,
                    instal_cost = record.get('instal_cost') || 0,
                    ar = record.get('ar') || 0;
                var prj_cost_total = device_cost + rental + land_cost + prj_cost_extra + stock_amount + instal_cost + ar;
                record.set('prj_cost_total', prj_cost_total);
                var net_capital = total_capital - prj_cost_total;
                record.set('net_capital', net_capital);


            } else if (ds.id == lease_item_ds_id) {
                if (name == 'price' || name == 'quantity') {
                    var price = record.get('price') || 0;
                    var quantity = record.get('quantity') || 0;
                    var amount = price * quantity;
                    record.set('amount', amount);
                }
                if (name=='lease_type'){// 2018-04-19 by 9796
                    if(value!='DIRECT_LEASE'){
                        record.getField('net_asset_value').setRequired(true);
                    }else{
                        record.getField('net_asset_value').setRequired(false);
                    }
                }
            }
            /*  //中关村  汇总人员
                 else if (name == 'salesman_number' || name == 'procedure_number' || name == 'technicist_number' || name == 'other_number') {
                 // 2017-11-10 by 9796
                 var total_number = (typeof(record.get('salesman_number')) == 'undefined' ? 0 : record.get('salesman_number')) + (typeof(record.get('procedure_number')) == 'undefined' ? 0 : record.get('procedure_number')) + (typeof(record.get('technicist_number')) == 'undefined' ? 0 : record.get('technicist_number')) + (typeof(record.get('other_number')) == 'undefined' ? 0 : record.get('other_number'));
                 record.set('total_number', total_number);
                 } */
            else if (ds.id == project_bp_ds_id) {

                var regx = /^[0-9]*$/g;
                var business_license_num = record.get('business_license_num');
                if (name == 'age' && value) {
                    if (!regx.test(value)) {
                        Leaf.showMessage('${l:PROMPT}', '年龄输入有误，请重新输入！');
                    }
                } else if (name == 'loan_card_num' && value) {
                    if (!regx.test(value)) {
                        Leaf.showMessage('${l:PROMPT}', '贷款卡号输入类型有误，请重新输入！');
                    }
                } else if (name == 'tax_registry_num' && value && record.get('organization_code_flag') == 'N') {
                    if (!regx.test(value)) {
                        Leaf.showMessage('${l:PROMPT}', '税务登记号输入类型有误，请重新输入！');
                    }
                } else if (name == 'business_license_num' && value && record.get('organization_code_flag') == 'N') {
                    if (!regx.test(value)) {
                        Leaf.showMessage('${l:PROMPT}', '营业执照号输入类型有误，请重新输入！');
                    } else if (business_license_num.length != 15) {
                        Leaf.showMessage('${l:PROMPT}', '营业执照号输入有误，请重新输入！');
                    }
                } else if (name == 'organization_code_flag' && value) {
                    if (value == 'Y') {
                        record.getField('business_license_num').setRequired(false);
                        record.getField('tax_registry_num').setRequired(false);
                    } else if (value == 'N') {
                        record.getField('business_license_num').setRequired(true);
                        record.getField('tax_registry_num').setRequired(true);
                    }
                } else if (name == 'bp_id' && value) {
                    /*   $(contact_info_ds_id).setQueryParameter('bp_id', value);
                         $(contact_info_ds_id).query();
                         $(address_ds_id).setQueryParameter('bp_id', value);
                         $(address_ds_id).query();
                         $(stockholder_ds_id).setQueryParameter('bp_id', value);
                         $(stockholder_ds_id).query(); */
                }
            }
            /* else if (ds.id == stockholder_ds_id) {
                 if (name == 'stockholder_type' && value) {
                 if (value == 'INSTITUTION') {
                 record.getField('org_code').setRequired(true);
                 record.getField('org_credit_code').setRequired(true);
                 } else if (value == 'NATURAL_PERSON') {
                 record.getField('org_code').setRequired(false);
                 record.getField('org_credit_code').setRequired(false);
                 }
                 }
                 } */
        };

        //20180511 直租必填回租非必填
        window['${/parameter/@layout_code}_on_layout_dynamic_grid_load'] = function(ds, record, config_records) {
            window['${/parameter/@layout_code}_unlock_layout_dynamic_window']();

            var prj_project_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
            var prj_project_lease_item_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_lease_item');
            if (ds.id == prj_project_lease_item_ds_id) {
                var business_type = $(prj_project_ds_id).getCurrentRecord().get('business_type');
                if (business_type == 'LEASE') {
                    record.getField('equ_amount').setRequired(true);
                }
            }
        };

        window['${/parameter/@bp_seq}${/parameter/@layout_code}_on_layout_dynamic_grid_query'] = function(ds, qpara, bp_seq) {
            var project_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
            var prj_cdd_item_doc_ref_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_cdd_item_doc_ref');
            if ((ds.id).indexOf('lsh_prj_project_bp_lv') > 0) {
                var report_ds_id = ds.bindtarget;
                var project_report_id = $(report_ds_id).getCurrentRecord().get('project_report_id');
                if (project_report_id) {
                    qpara.project_report_id = project_report_id;
                }
            } else if (ds.id == prj_cdd_item_doc_ref_id) {
                var cdd_list_id = $(project_ds_id).getAt(0).get('cdd_list_id');
                qpara.cdd_list_id = cdd_list_id || '${/parameter/@cdd_list_id}';
            }
            if (ds.bindtarget == project_ds_id) {
                qpara.project_id = $(project_ds_id).getAt(0).get('project_id');
            }
        };
        var specialColor = {
            form_render: 'red'
        };


        function in_renderer_name(name) {
            var names = {
                'change_rate': true,
                'fin_indicator': true,
                'fin_statement': true,
                'fin_statement_notes': true,
                'cashflow_forecast': true,
                'bp_info_link': true,
                'psr_report_info_link': true,
                'gua_psr_report_info_link': true,
                'psr_target_info_link': true,
                'gua_psr_target_info_link': true,
                'psr_change_info_link': true,
                'gua_psr_change_info_link': true,
                'bp_statement_note': true,
                'financial_template_load': true
            };
            if (names[name]) {
                return true;
            } else {
                return false;
            }

        }
        //通过基表名获取ds_id

        function get_dsid_by_basetable(layoutDataSetList, base_table) {
            if (base_table) {
                var base_table_temp = base_table.toLowerCase() + '_ds';
                for (var i = 0;i < layoutDataSetList.length;i++) {
                    var dsId = layoutDataSetList[i];
                    if (dsId.substring(dsId.length - base_table_temp.length, dsId.length) == base_table_temp) {
                        return dsId;
                    }
                }
            }
            return '';
        }

        function prj501_report_detail(record_id, ds_id, function_code) {
            var record = $(ds_id).findById(record_id);
            var cdd_list_id = '${/parameter/@cdd_list_id}';
            var param = {};
            param['function_code'] = function_code;
            param['prj_bp_id'] = record.get('prj_bp_id');
            param['bp_category'] = record.get('bp_category_c');
            param['bp_class'] = record.get('bp_class');
            param['maintain_type'] = 'UPDATE';
            param['cdd_list_id'] = cdd_list_id;
            param['bp_id'] = record.get('bp_id');
            param['bp_name'] = record.get('bp_name');
            param['lease_channel'] = record.get('lease_channel');
            param['cond_para2'] = parent.prj501_get_windows_parameter('cond_para2');
            param['cond_para3'] = parent.prj501_get_windows_parameter('cond_para3');
            param['cond_para4'] = parent.prj501_get_windows_parameter('cond_para4');
            var prj_report_read_flag = parent.prj501_get_windows_parameter('prj_report_read_flag');
            if (prj_report_read_flag == 'Y') {
                param['function_usage'] = 'QUERY';
                param['maintain_type'] = 'READONLY';
            }

            //report_ds_id获取方式改为获取他的bindtarget
            //var report_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_report');
            var prj_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
            var report_ds_id = $(ds_id).bindtarget;
            var prj_record = $(prj_ds_id).getCurrentRecord();
            var division = prj_record.get('division');
            var project_report_id = $(report_ds_id).getCurrentRecord().get('project_report_id');
            if (!project_report_id) {
                Leaf.showMessage('提示', '请先保存');
                return;
            }
            param['project_report_id'] = project_report_id;
            param['division'] = division;
            param['lease_channel'] = prj_record.get('lease_channel');
            param['url_title'] = ' ';
            var project_report_bp_id = record.get('project_report_bp_id');
            param['project_report_bp_id'] = project_report_bp_id; /* param['layout_debugger_flag']='Y';  */
            parent_prj_doc_get_layout_code('${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_get_layout_code_link_id', param, '${/parameter/@layout_code}${/parameter/@tree_code}_report_detail_link', ds_id);

        }

        function prj501_his_report_detail(record_id, ds_id, function_code) {
            var record = $(ds_id).findById(record_id);
            var cdd_list_id = '${/parameter/@cdd_list_id}';
            var param = {};
            param['function_code'] = function_code;
            param['prj_bp_id'] = record.get('prj_bp_id');
            param['bp_category'] = record.get('bp_category_c');
            param['bp_class'] = record.get('bp_class');
            param['cdd_list_id'] = cdd_list_id;
            param['bp_id'] = record.get('bp_id');
            param['bp_name'] = record.get('bp_name');

            param['cond_para2'] = parent.prj501_get_windows_parameter('cond_para2');
            param['cond_para3'] = parent.prj501_get_windows_parameter('cond_para3');
            param['cond_para4'] = parent.prj501_get_windows_parameter('cond_para4');
            param['function_usage'] = 'QUERY';
            param['maintain_type'] = 'READONLY';
            //report_ds_id获取方式改为获取他的bindtarget
            //var report_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_report');
            var prj_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
            var report_ds_id = $(ds_id).bindtarget;
            var prj_record = $(prj_ds_id).getCurrentRecord();
            var division = prj_record.get('division');
            var his_project_report_bp_id = record.get('his_project_report_bp_id');
            var hls_project_report_id = record.get('hls_project_report_id');
            if (!his_project_report_bp_id) {
                Leaf.showMessage('提示', '请先保存');
                return;
            }
            param['project_report_id'] = hls_project_report_id;
            param['division'] = division;
            param['lease_channel'] = prj_record.get('lease_channel');
            param['url_title'] = ' ';
            param['project_report_bp_id'] = his_project_report_bp_id; /* param['layout_debugger_flag']='Y';  */
            parent_prj_doc_get_layout_code('${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_get_layout_code_link_id', param, '${/parameter/@layout_code}${/parameter/@tree_code}_report_detail_link', ds_id);

        }

        function prj501_prj_detail(project_id) {
            window.open($('${/parameter/@layout_code}${/parameter/@tree_code}_prj_detail_link_id').getUrl() + '?project_id=' + project_id);
        }

        function view_pdf(attachment_id) {
            Leaf.request({
                url: '${/request/@context_path}/autocrud/fnd.fnd_atm_attachment/query',
                para: {
                    attachment_id: attachment_id
                },
                success: function(res) {

                    var path = res.result.record.file_path;
                    path = path.substr(path.indexOf('hls_attachment'));
                    var tomcat_source = '${/parameter/@tomcat_source}';
                    var source_path = 'http://' + window.location.host + '/' + tomcat_source + '/' + path;
                    var oWin = window.open(source_path);

                },
                scope: this
            });
        }


        window['${/parameter/@layout_code}_dynamic_link_renderer'] = function(value, record, name, config_record) {
            window['${/parameter/@layout_code}_hls_link_render_record'][record.id + '---' + name] = record;
            var ds_id = record.ds.id; /* window['${/parameter/@tree_code}${/parameter/@layout_code}_hls_link_render_record'][record.id + '---' + name] =record; */
            if (name == 'attachment') {
                link_function = '${/parameter/@layout_code}_prj500_cdd_attachtment_upload';
                return '<a href="javascript:window[\'' + link_function + '\'](\'' + record.id + '\',\'' + ds_id + '\',\'' + name + '\',\'' + config_record.get('query_only') + '\');">' + config_record.get('prompt') + '</a>';
            } else if (name == 'quote' || name == 'quote_query') {
                link_function = '${/parameter/@layout_code}_prj500_quote';
                //return '<a style="color:red" href="javascript:window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</a>';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:70%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:70%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            }else if (name == 'bp_detail') {
                var bp_id = record.get('bp_id');
                return '<a href="javascript:bp_detail(\'' + bp_id + '\',\'' + record.id + '\',\'' + record.ds.id + '\');">' + config_record.get('prompt') + '</a>';
            }
            //add by xuls for lsh
            else if (name == 'report_link') {
                var prj_bs_flag = parent.prj501_get_windows_parameter('prj_bs_flag');
                var function_code;
                if (prj_bs_flag == 'Y') {
                    function_code = 'PRJ501R_BS';
                } else {
                    function_code = 'PRJ501R';
                }
                return '<a href="javascript:prj501_report_detail(' + record.id + ',\'' + record.ds.id + '\',\'' + function_code + '\');">明细</a>';
            } else if (name == 'survey_link') {
                return '<a href="javascript:prj501_report_detail(' + record.id + ',\'' + record.ds.id + '\',\'PRJ501S\');">明细</a>';
            } else if (name == 'history_link') {
                var his_project_report_bp_id = record.get('his_project_report_bp_id');
                if (his_project_report_bp_id) {
                    return '<a href="javascript:prj501_his_report_detail(' + record.id + ',\'' + record.ds.id + '\',\'' + 'PRJ501R' + '\');">项目报告</a>';
                }
                return;
            } else if (in_renderer_name(name)) {
                link_function = '${/parameter/@layout_code}${/parameter/@tree_code}_form_renderer_window';
                return '<a style="color:' + specialColor['form_render'] + '" href="javascript:window[\'' + link_function + '\'](\'' + record.id + '\',\'' + record.ds.id + '\',\'' + name + '\');">' + config_record.get('prompt') + '</a>';
            } else if (name == 'attach_file_name') {
                if (value != null) {
                    var link = '${/request/@context_path}/atm_download.lsc?attachment_id=';
                    var file_name;
                    var str = value.split(';;');
                    var url = '';
                    for (var i = 0;i < str.length;i++) {
                        var temp = str[i].split('--');
                        if (!Leaf.isEmpty(temp[0])) {
                            file_name = temp[0].toUpperCase();

                            if (file_name.indexOf('.PDF') >= 0) {
                                url = url + '<a href=javascript:view_pdf(\'' + temp[1] + '\')>' + temp[0] + '</a>' + ',';
                            } else if (file_name.indexOf('.GIF') >= 0 || file_name.indexOf('.JPG') >= 0 | file_name.indexOf('.JPEG') >= 0 || file_name.indexOf('.PNG') >= 0) {
                                url = url + '<a href=' + link + temp[1] + ' ref="img">' + temp[0] + '</a>' + ',';
                            } else {
                                url = url + '<a href=' + link + temp[1] + '>' + temp[0] + '</a>' + ',';
                            }
                        }
                    }
                    return url;

                }
            }
            /* else if(name=='amount'){
                 var price = record.get('price');
                 var quantity = record.get('quantity');
                 var amount  = price*quantity;
                 return Leaf.formatMoney(amount);
                 } */
            else if (name == 'credit_link') {
                var project_id = record.get('project_id');
                if (project_id) {
                    return '<a href="javascript:prj501_prj_detail(' + project_id + ');">' + config_record.get('prompt') + '</a>';
                }
                return;
            }
            //add for nanshan
            else if (name == 'import') {
                link_function = '${/parameter/@layout_code}_prj501_import_lease_item';
                return '<a style="color:red" href="javascript:window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\');">' + config_record.get('prompt') + '</a>';
            } else if (name == 'li_list') {
                link_function = '${/parameter/@layout_code}_lease_item_list';
                return '<a href="javascript:window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\');">' + config_record.get('prompt') + '</a>';
            } else if (name == 'bp_info_modify') {
                //link_function = '${/parameter/@layout_code}_lease_item_list';
                //return '<a href="javascript:window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\');">' + config_record.get('prompt') + '</a>';
                return '<a href="javascript:open_bp_modify_win_s(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>';
            } else if (name == 'ref_v04') { /* return '<a style="color:red" href="javascript:open_bp_create_win_sec(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>'; */
                link_function = 'open_bp_create_win_sec';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:110%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:110%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            } else if (name == 'ref_v05') { /* return '<a style="color:red" href="javascript:tenant_sec_count_modify_win(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>'; */
                link_function = 'tenant_sec_count_modify_win';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:110%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:110%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            } else if (name == 'ref_v07') { /* return '<a style="color:red" href="javascript:open_bp_create_win_gua(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>'; */
                link_function = 'open_bp_create_win_gua';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:110%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:110%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            } else if (name == 'ref_v08') { /* return '<a style="color:red" href="javascript:guarantee_count_modify_win(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>'; */
                link_function = 'guarantee_count_modify_win';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:80%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:80%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            } else if (name == 'ref_v09') { /* return '<a style="color:red" href="javascript:open_bp_create_win_gua_np(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>'; */
                link_function = 'open_bp_create_win_gua_np';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:98%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:98%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            } else if (name == 'ref_v10') { /* return '<a style="color:red" href="javascript:guarantee_np_count_modify_win(\'' + ds_id + '\',\'' + record.id + '\')">' + config_record.get('prompt') + '</a>'; */
                link_function = 'guarantee_np_count_modify_win';
                if (Ext.isIE || Ext.isIE9 || Ext.isIE10) {
                    return '<button style="font-size:11px;height:22px;width:65%;text-align:center;padding:0 4px 4px 0" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');"><div style="height: 18px; line-height: 16px; text-decoration: none;">' + config_record.get('prompt') + '</div></button>';
                } else {
                    return '<button style="font-size:11px;height:22px;width:65%;text-align:center;" onclick="window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\',\'' + config_record.get('input_mode') + '\');">' + config_record.get('prompt') + '</button>';
                }
            } else if (name == 'bp_info_detail') {
                link_function = 'open_bp_gua_modify_win';
                return '<a href="javascript:window[\'' + link_function + '\'](\'' + ds_id + '\',\'' + record.id + '\',\'' + name + '\');">' + config_record.get('prompt') + '</a>';
            }
        };


        function bp_detail(id, record_id, ds_id) {

            var record = window['${/parameter/@layout_code}_hls_link_render_record'][id + '---' + name];
            var param = {};
            param['function_code'] = 'HLS213N';
            param['function_usage'] = 'MODIFY';
            param['url_title'] = '${l:HLS212.BP_MASTER_MAINTAIN}';
            param['winid'] = 'con920createid';
            hls_doc_get_layout_code('${/parameter/@layout_code}${/parameter/@tree_code}_con_contract_get_layout_code_link_id', param, '${/parameter/@layout_code}${/parameter/@tree_code}prj_project_create_link', ds_id);

        }

        //次承租人个数修改

        function tenant_sec_count_modify_win(ds_id, record_id) {

            var win = new Leaf.Window({
                id: 'prj_project_bp_tenant_sec_window',
                url: $('${/parameter/@layout_code}${/parameter/@tree_code}prj_project_bp_tenant_sec_modify_link').getUrl(),
                params: {
                    project_id: '${/parameter/@project_id}',
                },
                title: '次承租人个数调整',
                width: 620,
                height: 450
            });
        }

        //担保人个数修改

        function guarantee_count_modify_win(ds_id, record_id) {

            var win = new Leaf.Window({
                id: 'prj_project_bp_guarantee_window',
                url: $('${/parameter/@layout_code}${/parameter/@tree_code}prj_project_bp_guarantee_modify_link').getUrl(),
                params: {
                    project_id: '${/parameter/@project_id}',
                    layout_debugger_flag:'Y'
                },
                title: '担保人个数调整',
                width: 620,
                height: 450
            });
        }

        //自然人个数修改

        function guarantee_np_count_modify_win(ds_id, record_id) {

            var win = new Leaf.Window({
                id: 'prj_project_bp_guarantee_np_window',
                url: $('${/parameter/@layout_code}${/parameter/@tree_code}prj_project_bp_guarantee_np_modify_link').getUrl(),
                params: {
                    project_id: '${/parameter/@project_id}',
                },
                title: '自然人个数调整',
                width: 620,
                height: 450
            });
        }

        //商业伙伴维护

        function open_bp_gua_modify_win(ds_id, record_id) {
            var record = $(ds_id).findById(record_id);
            var bp_id = record.get('bp_id');

            window.open('${/request/@context_path}/modules/hls/HLS214N/hls_bp_master_modify.lview?layout_code=BP_MODIFY_ZGC&function_code=HLS214D&function_usage=MODIFY&bp_id=' + bp_id);
        }

        //商业伙伴新增链接/次承租人

        function open_bp_create_win_sec(ds_id, record_id) {
            window.open($('${/parameter/@layout_code}${/parameter/@tree_code}_bp_create_entrance').getUrl() + '?layout_code=BP_CREATE_ENTRANCE&function_code=HLS213N&TENANT_SEC_FLAG=Y');
        }

        //商业伙伴新增链接/担保人

        function open_bp_create_win_gua(ds_id, record_id) {
            window.open($('${/parameter/@layout_code}${/parameter/@tree_code}_bp_create_entrance').getUrl() + '?layout_code=BP_CREATE_ENTRANCE&function_code=HLS213N&GUTA_ORG_FLAG=Y');
        }

        //商业伙伴新增链接/自然人

        function open_bp_create_win_gua_np(ds_id, record_id) {
            window.open($('${/parameter/@layout_code}${/parameter/@tree_code}_bp_create_entrance').getUrl() + '?layout_code=BP_CREATE_ENTRANCE&function_code=HLS213N&GUTA_NP_FLAG=Y');
        }

        //商业伙伴修改链接

        function open_bp_modify_win_s(ds_id, record_id) {
            var record = $(ds_id).findById(record_id);
            // var bp_id = record.get('bp_id');
            // var bp_type = record.get('bp_type');
            var param = record.data;
            param['bp_id'] = record.get('bp_id');
            param['bp_type'] = record.get('bp_type');
            param['cond_para2'] = record.get('bp_type');
            param['function_code'] = 'HLS214D';
            param['function_usage'] = 'MODIFY';
            param['url_title'] = '${l:HLS212.BP_MASTER_MAINTAIN}';
            //add by wcs
            param['screen_width'] = 500;
            param['screen_height'] = 600;
            param['url_title'] = '商业伙伴维护';
            hls_doc_get_layout_code('${/parameter/@layout_code}${/parameter/@tree_code}_con_contract_get_layout_code_link_id', param, '${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_modify_link');

        }

        //租赁物导入
        window['${/parameter/@layout_code}_prj501_import_lease_item'] = function(ds_id, record_id, name) {
            if ($(ds_id).findById(record_id).get('project_lease_item_id')) {
                var lease_type = $(ds_id).findById(record_id).get('lease_type');
                if (lease_type) {
                    var win = new Leaf.Window({
                        id: 'upload_handle_winId',
                        params: {
                            lease_type: lease_type,
                            project_lease_item_id: $(ds_id).findById(record_id).get('project_lease_item_id'),
                            winId: 'upload_handle_winId'
                        },
                        url: $('${/parameter/@layout_code}${/parameter/@tree_code}_lease_item_import_link').getUrl(),
                        title: '租赁物Excel导入',
                        width: 420,
                        height: 275
                    });
                } else {
                    Leaf.showMessage('${l:HLS.PROMPT}', '请先选择租赁物类型!');
                }
            } else {
                Leaf.showMessage('${l:HLS.PROMPT}', '请先保存!');
            }
        };
        //租赁物详细
        window['${/parameter/@layout_code}_lease_item_list'] = function(ds_id, record_id, name) {
            if ($(ds_id).findById(record_id).get('project_lease_item_id')) {
                var lease_type = $(ds_id).findById(record_id).get('lease_type');
                var function_usage = '${/parameter/@function_usage}';
                if (function_usage == 'QUERY') {
                    lease_type = lease_type + '_' + function_usage;
                }
                new Leaf.Window({
                    id: 'receipt_print_winid',
                    url: '${/request/@context_path}/modules/prj/PRJ501N/prj_lease_item_detail.lview',
                    params: {
                        project_lease_item_id: $(ds_id).findById(record_id).get('project_lease_item_id'),
                        lease_type: lease_type
                    },
                    title: '租赁物明细',
                    height: 500,
                    width: 1100
                });
            } else {
                Leaf.showMessage('${l:HLS.PROMPT}', '请先保存!');
            }
        };

        function parent_prj_doc_get_layout_code(bm_url_link, param, win_url_link, list_ds) {
            lock_iframe_window();
            Leaf.request({
                url: $(bm_url_link).getUrl(),
                para: param,
                success: function(res) {
                    $L.Masker.unmask(Ext.get(document.documentElement));
                    if (!res.result.layout_code) {
                        Leaf.showMessage('${l:PROMPT}', '${l:HLS.LAYOUT_CODE_IS_NULL}');
                        return;
                    }
                    param['layout_code'] = res.result.layout_code;
                    param['usage_type'] = res.result.usage_type;
                    param['winid'] = 'prj_report_detail_screen';
                    param['calc_type'] = res.result.cond_para1;
                    var win = parent.open_render_window('prj_report_detail_screen', param, $(win_url_link).getUrl(), param['url_title'] + '(' + res.result.layout_code + ')', list_ds);
                    win.on('close', function() {
                        if (list_ds) {
                            $(list_ds).query();
                        }
                    });
                    /* var win = new Leaf.Window({
                         id: 'hls_doc_get_layout_code_winid',
                         params: param,
                         url: $(win_url_link).getUrl(),
                         title: param['url_title'] + '(' + res.result.layout_code + ')',
                         fullScreen: true,
                         draggable: true
                         });
                         win.on('close', function() {
                         if (list_ds) {
                         $(list_ds).query();
                         }
                         }); */
                },
                failure: function() {
                    $L.Masker.unmask(Ext.get(document.documentElement));
                },
                error: function() {
                    $L.Masker.unmask(Ext.get(document.documentElement));
                },
                scope: this
            });
        }

        function prj_doc_get_layout_code(bm_url_link, param, win_url_link, list_ds) {
            lock_iframe_window();
            Leaf.request({
                url: $(bm_url_link).getUrl(),
                para: param,
                success: function(res) {
                    $L.Masker.unmask(Ext.get(document.documentElement));
                    if (!res.result.layout_code) {
                        Leaf.showMessage('${l:PROMPT}', '${l:HLS.LAYOUT_CODE_IS_NULL}');
                        return;
                    }
                    param['layout_code'] = res.result.layout_code;
                    param['usage_type'] = res.result.usage_type;
                    param['winid'] = 'hls_doc_get_layout_code_winid';
                    param['calc_type'] = res.result.cond_para1;

                    var win = new Leaf.Window({
                        id: 'hls_doc_get_layout_code_winid',
                        params: param,
                        url: $(win_url_link).getUrl(),
                        title: param['url_title'] + '(' + res.result.layout_code + ')',
                        fullScreen: true,
                        draggable: true
                    });
                    win.on('close', function() {
                        if (list_ds) {
                            $(list_ds).query();
                        }
                    });
                },
                failure: function() {
                    $L.Masker.unmask(Ext.get(document.documentElement));
                },
                error: function() {
                    $L.Masker.unmask(Ext.get(document.documentElement));
                },
                scope: this
            });
        }

        window['${/parameter/@layout_code}${/parameter/@tree_code}_form_renderer_window'] = function(id, dsid, name) {

            var record = $(dsid).findById(id);

            if (record.get('bp_id')) {
                var url, url_title, open_win_flag, show_message;
                if (name == 'financial_template_load') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_rsc_financial_template_load_link_id').getUrl();
                    url_title = '财务报表导入';
                } else if (name == 'change_rate') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_change_rate_link_id').getUrl();
                    url_title = '${l:PRJ501.RATE_OF_CHANGE_DETAILS_REPORT}';
                } else if (name == 'fin_indicator') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_handle_formula_link_id').getUrl();
                    url_title = '${l:PRJ501.FINANCIAL_INDEX_DETAILS}';
                } else if (name == 'fin_statement') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_handle_query_link_id').getUrl();
                    url_title = '${l:PRJ501.FINANCIAL_STATEMENT_ROWS}';
                } else if (name == 'fin_statement_notes') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_prj_project_statement_note_link_id').getUrl();
                    url_title = '${l:PRJ501.NOTES_TO_THE_FINANCIAL_STATEMENTS_MAINTAINED}';
                } else if (name == 'cashflow_forecast') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_rsc_fin_statement_prj_import_cashflow_forecast_link_id').getUrl();
                    url_title = '${l:RSC_FIN_STATEMENT_TMPLT_HDS.CASHFLOW_FORECAST}';
                } else if (name == 'bp_info_link') {
                    url = '';
                    open_win_flag = 'Y';
                } else if (name == 'psr_report_info_link' || name == 'gua_psr_report_info_link') {
                    if (record.get('fin_statement_templet_id')) {
                        url = '${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_handle_query.lview?fin_statement_templet_id=' + record.get('fin_statement_templet_id') + '&amp;bp_id=' + record.get('bp_id');
                        url_title = '${l:RSC_FIN_STATEMENT_TMPLT_HDS.FIN_STATEMENT_DETAIL}';
                    } else {
                        if (name == 'psr_report_info_link') {
                            show_message = '该承租人财务报表信息不存在！';
                        } else if (name == 'gua_psr_report_info_link') {
                            show_message = '该担保人财务报表信息不存在！';
                        }
                    }
                } else if (name == 'psr_target_info_link' || name == 'gua_psr_target_info_link') {
                    if (record.get('fin_statement_templet_id')) {
                        url = '${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_handle_formula.lview?fin_statement_templet_id=' + record.get('fin_statement_templet_id') + '&amp;bp_id=' + record.get('bp_id');
                        url_title = '${l:RSC_FIN_INDICATOR_FORMULA.INDICATOR_DETAIL}';
                    } else {
                        if (name == 'psr_target_info_link') {
                            show_message = '该承租人财务指标明细信息不存在！';
                        } else if (name == 'gua_psr_target_info_link') {
                            show_message = '该担保人财务指标明细信息不存在！';
                        }

                    }
                } else if (name == 'psr_change_info_link' || name == 'gua_psr_change_info_link') {
                    if (record.get('fin_statement_templet_id')) {
                        url = '${/request/@context_path}/modules/rsc/RSC303/rsc_fin_statement_prj_import_change_rate.lview?fin_statement_templet_id=' + record.get('fin_statement_templet_id') + '&amp;bp_id=' + record.get('bp_id');
                        url_title = '${l:RSC_FIN_STATEMENT_TMPLT_HDS.CHANGERATE_DETAIL}';
                    } else {
                        if (name == 'psr_change_info_link') {
                            show_message = '该承租人财务变化率明细信息不存在！';
                        } else if (name == 'gua_psr_change_info_link') {
                            show_message = '该担保人财务变化率明细信息不存在！';
                        }
                    }
                } else if (name == 'bp_statement_note') {
                    var bp_id = record.get('bp_id');
                    if (bp_id) {
                        url = '${/request/@context_path}/modules/prj/PRJ509/prj_project_statement_note.lview';
                        url_title = '财务报表附注';
                    }
                }
                if (url) {
                    parent.open_render_window(record.get('bp_seq') + '${/parameter/@layout_code}${/parameter/@tree_code}' + name + '_form_render_winid', ({
                        bp_id: record.get('bp_id'),
                        winid: record.get('bp_seq') + '${/parameter/@layout_code}${/parameter/@tree_code}' + name + '_form_render_winid'
                    }), url, url_title);
                } else if (open_win_flag == 'Y') {
                    var param = {};
                    param['function_code'] = 'HLS306';
                    param['function_usage'] = 'QUERY';
                    param['url_title'] = '${l:HLS212.BP_MASTER_QUERY}';
                    param['master_type'] = 'BP_MASTER';
                    param['master_id'] = record.get('bp_id');
                    param['bp_class'] = record.get('bp_class');
                    prj_doc_get_layout_code('${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_get_layout_code_link_id', param, '${/parameter/@layout_code}${/parameter/@tree_code}_hls_bp_master_dynamic_update_link_id');

                } else if (show_message) {
                    Leaf.SideBar.show({
                        duration: 2000,
                        html: '<div class="item-slideBar" style="width:200px"><div class="inner">' + show_message + '</div></div>'
                    });
                }

            } else {
                Leaf.showMessage('${l:PROMPT}', '${l:PRJ501.PLEASE_MODIFY_BP_INFORMATION}');
                return;
            }
        };

        window['${/parameter/@layout_code}_prj500_cdd_attachtment_upload'] = function(id, dsid, name, query_only) {
            var record = $(dsid).findById(id);

            if (record.get('check_id')) {
                var url;
                if ('${/parameter/@function_code}' == 'PRJ505E') {
                    url = $('${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_uploadFile_id').getUrl() + '?table_name=PRJ_CDD_ITEM_CHECK&header_id=' + record.get('check_id');
                } else {
                    if ('${/parameter/@function_code}' == 'PRJ505') {
                        url = $('${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_uploadFile_id').getUrl() + '?table_name=PRJ_CDD_ITEM_CHECK&header_id=' + record.get('check_id');
                    } else {
                        if (query_only == 'Y') {
                            url = $('${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_downloadFile_id').getUrl() + '?table_name=PRJ_CDD_ITEM_CHECK&header_id=' + record.get('check_id');
                        } else {
                            url = $('${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_uploadFile_id').getUrl() + '?table_name=PRJ_CDD_ITEM_CHECK&header_id=' + record.get('check_id');
                        }
                    }
                }

                var win = new Leaf.Window({
                    url: url,
                    title: '${l:HLS.SUPPORTING_DOCUMENT}',
                    id: '${/parameter/@layout_code}${/parameter/@tree_code}_prj500_cdd_uploadFile_screen_id',
                    width: 850,
                    height: 400
                });

                win.on('close', function() {
                    record.ds.query();
                });
            } else {
                Leaf.showMessage('${l:HLS.PROMPT}', '请先保存!');
            }
        };

        function lock_current_window() {
            parent.Leaf.Masker.mask(parent.$('${/parameter/@winid}').wrap, '${l:HLS.EXECUTING}');
        }

        function unlock_current_window() {
            parent.Leaf.Masker.unmask(parent.$('${/parameter/@winid}').wrap);
        }

        window['${/parameter/@layout_code}_prj500_quote'] = function(ds_id, record_id, name, input_mode) {
            var record = $(ds_id).findById(record_id);
            var head_record = $(record.ds.bindtarget).getAt(0),
                url;
            var calc_tpe = '${/parameter/@calc_type}' || 'CLASSIC_CALCULATOR';

            if (calc_tpe == 'LITE_CALCULATOR') {
                url = $('${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calc_quotation_header_link_id').getUrl();
            } else if (calc_tpe == 'CLASSIC_CALCULATOR') {
                url = $('${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calculator_update_link_id').getUrl();
            } else {
                Leaf.showMessage('${l:PROMPT}', '${l:HLS.CALC_TYPE_IS_NULL}');
                return;
            }

            if ($(record.ds.id).validate()) {
                if (!record.get('price_list') || !record.get('currency') || !record.get('lease_times')) {
                    Leaf.showMessage('${l:PROMPT}', '${l:HLS.QUOTATION_EXECUTE_AFTER_SAVE}');
                    return;
                }
                lock_current_window();
                var parent_pk_value = head_record.get('project_id');
                record.set('function_code', '${/parameter/@function_code}');
                record.set('function_usage', '${/parameter/@function_usage}');
                record.set('project_id', parent_pk_value);
                record.set('to_doc_table', 'HLS_FIN_CALCULATOR_HD');
                record.set('from_doc_table', 'PRJ_QUOTATION');
                record.set('from_doc_pk', record.get('quotation_id'));
                record.set('calculate_flag', 'N');
                var calc_recreate_L_formula;
                if (record.get('quotation_id') && !record.get('calc_session_id')) {
                    calc_recreate_L_formula = 'Y';
                    record.set('_status', 'update');
                } else if (record.get('quotation_id') && record.get('calc_session_id')) {
                    calc_recreate_L_formula = 'N';
                    record.set('_status', 'execute');
                } else {
                    calc_recreate_L_formula = 'Y';
                    record.set('_status', 'insert');
                }
                var saveData = [];
                saveData.push(record.data);

                /*改成如果是只读的话，就调用只读页面*/
                var link_url = $('${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_doc_quotation_link_id').getUrl();
                if (input_mode == 'READONLY') {
                    link_url = $('${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calculator_readonly_link_id').getUrl();
                    parent.open_render_window('global_hls_fin_calculator_readonly_id', ({
                        calc_session_id: record.get('calc_session_id'),
                        winId: 'global_hls_fin_calculator_readonly_id',
                        global_flag: 'Y'
                    }), link_url, '${l:HLS.FIN_CALCULATOR}');
                    unlock_current_window();
                    return;
                }
                Leaf.request({
                    url: link_url,
                    para: saveData,
                    success: function(res) {
                        unlock_current_window();
                        record.set('_status', 'update');
                        $(record.ds.id).query();

                        var quotation_id = record.get('quotation_id') || res.result.quotation_id;
                        parent.open_render_window('${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calc_quotation_header_link_winid', ({
                            document_id: parent_pk_value,
                            document_category: '${/parameter/@document_category}',
                            maintain_type: '${/parameter/@maintain_type}',
                            calc_session_id: res.result.record.calc_session_id,
                            quotation_id: quotation_id,
                            dsId: record.ds.id,
                            winId: '${/parameter/@layout_code}${/parameter/@tree_code}_hls_fin_calc_quotation_header_link_winid',
                            global_flag: 'Y',
                            id_num: 0,
                            calc_type: '${/parameter/@calc_type}',
                            recreate_L_formula: calc_recreate_L_formula
                        }), url, '');
                    },
                    failure: function() {
                        unlock_current_window();
                    },
                    error: function() {
                        unlock_current_window();
                    },
                    scope: this
                });
            }
        };

        //租赁物导入
        window['${/parameter/@layout_code}_G_LEASE_ITEM_USER_BUTTON1_layout_dynamic_tab_click'] = function() {
            var project_id = '${/parameter/@document_id}';
            var url_l = $('${/parameter/@layout_code}${/parameter/@tree_code}_lease_item_upload_link_id').getUrl();
            var prj_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
            var record = $(prj_ds_id).getCurrentRecord();
            if (Ext.isEmpty(project_id)) {
                project_id = record.data['project_id'];
            }
            if (!Ext.isEmpty(project_id)) {

                var win = new Leaf.Window({
                    id: 'prj_project_lease_item_import_handle_win',
                    url: url_l,
                    params: {
                        'winid': 'prj_project_lease_item_import_handle_win',
                        'project_id': project_id,
                        'session_id': '${/session/@session_id}',
                        'type': '${/parameter/@layout_code}',
                        'parent_ds_id': '${/parameter/@layout_code}_G_LEASE_ITEM_prj_project_lease_item_ds'
                    },
                    title: '租赁物导入',
                    width: 430,
                    height: 290
                });
                win.on('close', function() {

                    $('${/parameter/@layout_code}_G_LEASE_ITEM_prj_project_lease_item_ds').query();

                });

                /* new Leaf.Window({
                     id: 'prj_project_lease_item_import_handle_win',
                     url: '${/request/@context_path}/modules/prj/PRJ500/prj_project_lease_item_import_handle.lview',
                     params: {
                     'winid': 'prj_project_lease_item_import_handle_win',
                     'project_id': project_id,
                     'session_id': '${/session/@session_id}',
                     'parent_ds_id': '${/parameter/@layout_code}_G_LEASE_ITEM_prj_project_lease_item_ds'
                     },
                     width: 500,
                     height: 400
                     }); */
            } else {
                Leaf.showMessage('提示', '请选择保存项目信息！', null, 350);
                return;
            }


        };

        //抵质押物新增
        window['${/parameter/@layout_code}_F_MORTGAGE_01_MO_ADD_layout_dynamic_tab_click'] = function() {
            var form_ds = $('${/parameter/@layout_code}_F_MORTGAGE_01_prj_project_mortgage_ds');
            var gird_ds = $('${/parameter/@layout_code}_G_MORTGAGE_prj_project_mortgage_ds');
            form_ds.removeAll();
            var record = form_ds.create();
            //set contract_seq
            //alert(gird_ds.getAll().length);
            var contract_seq = gird_ds.getAll().length + 1;
            record.set('contract_seq', contract_seq);
            record.set('project_id', '${/parameter/@document_id}');
        };

        // //抵质押物新增 最新添加
        // window['${/parameter/@layout_code}_T_T_MORTGAGE_07_MO_ADD_layout_dynamic_tab_click'] = function() {
        //
        // alert(111);
        // var gird_ds = $('${/parameter/@layout_code}_T_T_MORTGAGE_07_prj_project_mortgage_ds');


        // //set contract_seq
        // //alert(gird_ds.getAll().length);
        // var contract_seq = gird_ds.getAll().length+1;
        // var record = gird_ds.getCurrentRecord();
        // record.set('contract_seq', contract_seq);
        // record.set('project_id', '${/parameter/@document_id}');
        // };
        window['${/parameter/@bp_seq}${/parameter/@layout_code}_on_layout_dynamic_grid_add'] = function(ds, record, config_records, bp_seq) {

            if (ds.id == "WCS_PROJECT_MODIFY_T_T_MORTGAGE_07_prj_project_mortgage_ds") {
                var contract_seq = ds.getAll().length;
                record.set('contract_seq', contract_seq);
            } else if (ds.id == "WCS_PROJECT_MODIFY_G_LEASE_ITEM_prj_project_lease_item_ds") {
                var project_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project');
                var rec = $(project_ds_id).getAt(0);
                var contract_seq = ds.getAll().length;
                record.set('contract_seq', contract_seq);
                if (rec.get('business_type') == 'LEASEBACK') {
                    record.set('vender_id', rec.get('bp_id_tenant'));
                    record.set('vender_id_n', rec.get('bp_name'));
                }
            } else if (ds.id == "WCS_PROJECT_MODIFY_G_REPAYMENT_prj_project_repayment_ds") {
                var contract_seq = ds.getAll().length;
                record.set('repayment_seq', contract_seq);
            } else if (ds.id == 'WCS_PROJECT_MODIFY_G_QUOTATION_prj_quotation_ds') {
                var records = ds.getAll();
                var version_num = 0;
                if (records.length) {
                    for (var i = 0;i < records.length;i++) {
                        var current_record = records[i],
                            version = current_record.get('version');
                        if (!Ext.isEmpty(version)) {
                            index = version.indexOf('v');
                            if (index == -1) {
                                version_num = version_num;
                            } else {
                                var current_version = version.substring(index + 1);
                                if (isNaN(current_version) || parseFloat(current_version) <= parseFloat(version_num)) {
                                    version_num = version_num;
                                } else {
                                    version_num = current_version;
                                }
                            }
                        }
                    }
                }
                record.set('version', 'v' + parseInt(plus(version_num, 1)).toFixed(1));
                record.set('contract_seq', parseInt(plus(version_num, 1)));
            }

        };
        //抵质押物保存
        window['${/parameter/@layout_code}_F_MORTGAGE_01_MO_SAVE_layout_dynamic_tab_click'] = function() {
            lock_current_window();
            var form_ds = $('${/parameter/@layout_code}_F_MORTGAGE_01_prj_project_mortgage_ds');

            if (form_ds.validate()) {
                form_ds.submit();
                form_ds.on('submitsuccess', function(ds) {
                    var ref_grid_ds = $('${/parameter/@layout_code}_G_MORTGAGE_prj_project_mortgage_ds');
                    ref_grid_ds.query();
                    unlock_current_window();
                });
            } else {
                unlock_current_window();
            }
        };
        window['${/parameter/@layout_code}_F_MORTGAGE_01_MO_QUERY_layout_dynamic_tab_click'] = function() {

            var mortgage_ds_id = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_mortgage');
            var form_ds = $(mortgage_ds_id);
            var grid_ds = $('${/parameter/@bp_seq}${/parameter/@layout_code}_G_MORTGAGE_prj_project_mortgage_ds');
            form_ds.query();
            grid_ds.query();
        };
        //抵质押物重置
        // window['${/parameter/@layout_code}_F_MORTGAGE_01_MO_RESET_layout_dynamic_tab_click'] = function() {
        // var form_ds = $('${/parameter/@layout_code}_F_MORTGAGE_01_prj_project_mortgage_ds');
        // form_ds.reset();

        // };
        window['${/parameter/@layout_code}_G_TENANT_SHOCKHOLDER_USER_BUTTON1_layout_dynamic_tab_click'] = function() {

            var ds_id_1 = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_bp');
            var rec = $(ds_id_1).getCurrentRecord();
            var bp_id = rec.get('bp_id');
            // '${/session/@bp_id}' = bp_id;
            new Leaf.Window({
                id: 'shockholder_upload_window',
                params: {
                    winid: 'upload_window',
                    bp_id: bp_id,
                    parent_ds_id: 'shockholder_upload_ds'
                },
                url: $('${/parameter/@layout_code}${/parameter/@tree_code}_shockholder_excel_import').getUrl(),
                title: '${l:HLS.IMPORT}',
                width: 420,
                height: 275
            });
        }

        window['${/parameter/@layout_code}_G_TENANT_MANAGEMENT_USER_BUTTON1_layout_dynamic_tab_click'] = function() {

            var ds_id_1 = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'prj_project_bp');
            var rec = $(ds_id_1).getCurrentRecord();
            var bp_id = rec.get('bp_id');
            // '${/session/@bp_id}' = bp_id;
            new Leaf.Window({
                id: 'manager_upload_window',
                params: {
                    winid: 'manager_upload_window',
                    bp_id: bp_id,
                    parent_ds_id: 'manager_upload_ds'
                },
                url: $('${/parameter/@layout_code}${/parameter/@tree_code}_manager_excel_import').getUrl(),
                title: '${l:HLS.IMPORT}',
                width: 420,
                height: 275
            });
        }

        window['${/parameter/@layout_code}_G_TENANT_MEMBER_B_USER_BUTTON1_layout_dynamic_tab_click'] = function() {

            var ds_id_1 = get_dsid_by_basetable(window['${/parameter/@layout_code}_layoutDataSetList'], 'hls_bp_master_major_info');
            var rec = $(ds_id_1).getCurrentRecord();
            var major_info_id = rec.get('major_info_id');
            // '${/session/@bp_id}' = bp_id;
            new Leaf.Window({
                id: 'member_upload_window',
                params: {
                    winid: 'memeber_upload_window',
                    major_info_id: major_info_id,
                    parent_ds_id: 'member_upload_ds'
                },
                url: $('${/parameter/@layout_code}${/parameter/@tree_code}_member_excel_import').getUrl(),
                title: '${l:HLS.IMPORT}',
                width: 420,
                height: 275
            });
        }
        if(typeof(WCS_PROJECT_MODIFY_layoutDataSetList) == 'undefined'){var WCS_PROJECT_MODIFY_layoutDataSetList=[];
        }
        if(typeof(WCS_PROJECT_MODIFY_rootDataSetList) == 'undefined'){var WCS_PROJECT_MODIFY_rootDataSetList=[];
        }
        if(typeof(WCS_PROJECT_MODIFY_layoutDataSetObj) == 'undefined'){var WCS_PROJECT_MODIFY_layoutDataSetObj=[];
        }
        function GET_LOV_CASCADE(value) {
            if (Ext.isEmpty(value)) {
                return '';
            } else {
                return value;
            }
        }

        function SETOBJECTPARA(object, ds, field, para, record) {
            if (para) {
                if (object == 'LOV') {
                    field.setLovPara(para, GET_LOV_CASCADE(record.get(para)));
                } else if (object == 'COMBOBOX') {
                    ds.setQueryParameter(para, GET_LOV_CASCADE(record.get(para)));
                }
            }
        }

        function GET_CONFIG_COLUMN_NAME(name) {
            var query_name, length = name.length;
            if (name.substring(length - 2, length) == '_n') {
                query_name = name.substring(0, length - 2);
            } else {
                query_name = name;
            }
            return query_name;
        }

        function ON_COMMON_OBJECT_BEFORECOMMIT(object, record, lov_record){
            var display_name = object.binder.name,
                field = record.getField(display_name),
                mapping = field.get('mapping'),
                exists_flag = false;
            for (var name in lov_record.data) {
                exists_flag = false;
                for (var i = 0,
                         mapping_length = mapping.length;i < mapping_length;i++) {
                    if ((exists_flag = (name == mapping[i]['from']))) {
                        break;
                    }
                }
                if (!exists_flag) {
                    mapping.push({
                        from: name,
                        to: name
                    });
                }
            }
            field.setMapping(mapping);
        }

        function SET_CLEAR_LOVPARA_EMPTY(name, lov_cascade_para, record, config_record) {
            var validation_type = config_record.get('validation_type'),
                column_name = config_record.get('column_name');
            if (name == lov_cascade_para) {
                record.set(column_name, '');
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C' || validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    record.set(column_name + '_n', '');
                }
            }
        }
        window['WCS_PROJECT_MODIFY_layoutDataSetList'].push('WCS_PROJECT_MODIFY_F_ACT_CTRLER_lov_getmapping_ds');
        window['WCS_PROJECT_MODIFY_layoutDataSetList'].push('WCS_PROJECT_MODIFY_F_ACT_CTRLER_con_layout_config_ds');
        window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_temp_processfunction'] = function(datas) {
            var ds = $('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds'),
                f = $('temp_ds').fields;
            for (var name in f) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    display_name = query_name + '_n',
                    documentMapping;
                var config_record = $('WCS_PROJECT_MODIFY_F_ACT_CTRLER_con_layout_config_ds').find('column_name', query_name);
                if (config_record) {
                    var validation_type = config_record.get('validation_type');
                    if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                        f[name].setLovPara('column_name', config_record.get('column_name'));
                        f[name].setLovPara('tab_code', config_record.get('tab_code'));
                        f[name].setLovPara('layout_code', config_record.get('layout_code'));
                        if (config_record.get('lov_return_vcode') == 'Y') {
                            documentMapping = [{
                                from: 'value_code',
                                to: query_name
                            }, {
                                from: 'value_code',
                                to: query_name
                            }];
                        } else {
                            documentMapping = [{
                                from: 'value_code',
                                to: query_name
                            }, {
                                from: 'value_name',
                                to: display_name
                            }];
                        }
                        f[name].setMapping(documentMapping);
                    } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                        var combobox_ds = 'WCS_PROJECT_MODIFY_F_ACT_CTRLER_' + query_name + '_combobox_ds',
                            combobox_field = f[name];
                        combobox_ds = $(combobox_ds);
                        combobox_ds.setQueryParameter('column_name', config_record.get('column_name'));
                        combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                        combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                        if (config_record.get('lov_return_vcode') == 'Y') {
                            combobox_field.setPropertity('displayfield', 'value_code');
                        } else {
                            combobox_field.setPropertity('displayfield', 'value_name');
                        }
                    }
                    ds.addField(f[name].pro);
                    var record = ds.getCurrentRecord(),
                        df = f[name].pro['defaultvalue'];
                    if (record && record.isNew && !Ext.isEmpty(df)) {
                        record.set(name, df, true);
                    }
                }
            }
            return datas;
        };

        function temp_add() {
            $('temp_ds').destroy();
            window['WCS_PROJECT_MODIFY_unlock_layout_dynamic_window']();
        }

        function temp_create(){
            $('temp_ds').create();
        }

        window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_TABRELOAD_SHOW_HISTORY']=function(){
            if('' == 'Y'){
                var show_history_ds,source_ds;
                if('prj_project'){
                    show_history_ds = $('WCS_PROJECT_MODIFY_F_ACT_CTRLER_prj_project_show_history_ds');
                    source_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                }else{
                    show_history_ds = $('WCS_PROJECT_MODIFY_F_ACT_CTRLER_prj_project_show_history_ds');
                    source_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                }
                var tab_reload_load_flag = 'N';
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_tabreload_show_history']=function(){
                    if(tab_reload_load_flag == 'Y'){
                        source_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_tabreload_show_history']);
                    }
                    show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('project_id'.toLowerCase()));
                    show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                    show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER');
                    window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_show_history_ds_load']= function(ds){
                        show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_show_history_ds_load']);
                        var history_records = ds.getAll();
                        var record = source_ds.getAt(0);
                        if(history_records.length && record){
                            for(var name in record.data){
                                var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                                if(history_record){
                                    var fieldId = ('WCS_PROJECT_MODIFY_F_ACT_CTRLER_prj_project_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                    if($L.CmpManager.get(fieldId)){
                                        record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                        if(Ext.get(fieldId).child('input')){
                                            $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                        }
                                    }
                                }
                            }
                        }
                    }
                    show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_show_history_ds_load']);
                    show_history_ds.query();
                }
                if(source_ds.getAll().length && !source_ds.getAt(0).isNew){
                    window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_tabreload_show_history']();
                }else{
                    tab_reload_load_flag = 'Y';
                    source_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_tabreload_show_history']);
                }
            }
        };
        window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds = $('WCS_PROJECT_MODIFY_F_ACT_CTRLER_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'');
            }
        };

        window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('WCS_PROJECT_MODIFY_F_ACT_CTRLER_con_layout_config_ds');
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList']=[];
        window['1WCS_PROJECT_MODIFY_rootDataSetList']=[];
        window['1WCS_PROJECT_MODIFY_layoutDataSetObj']={};
        function GET_LOV_CASCADE(value) {
            if (Ext.isEmpty(value)) {
                return '';
            } else {
                return value;
            }
        }

        function SETOBJECTPARA(object, ds, field, para, record) {
            if (para) {
                if (object == 'LOV') {
                    field.setLovPara(para, GET_LOV_CASCADE(record.get(para)));
                } else if (object == 'COMBOBOX') {
                    ds.setQueryParameter(para, GET_LOV_CASCADE(record.get(para)));
                }
            }
        }

        function GET_CONFIG_COLUMN_NAME(name) {
            var query_name, length = name.length;
            if (name.substring(length - 2, length) == '_n') {
                query_name = name.substring(0, length - 2);
            } else {
                query_name = name;
            }
            return query_name;
        }

        function ON_COMMON_OBJECT_BEFORECOMMIT(object, record, lov_record){
            var display_name = object.binder.name,
                field = record.getField(display_name),
                mapping = field.get('mapping'),
                exists_flag = false;
            for (var name in lov_record.data) {
                exists_flag = false;
                for (var i = 0,
                         mapping_length = mapping.length;i < mapping_length;i++) {
                    if ((exists_flag = (name == mapping[i]['from']))) {
                        break;
                    }
                }
                if (!exists_flag) {
                    mapping.push({
                        from: name,
                        to: name
                    });
                }
            }
            field.setMapping(mapping);
        }

        function SET_CLEAR_LOVPARA_EMPTY(name, lov_cascade_para, record, config_record) {
            var validation_type = config_record.get('validation_type'),
                column_name = config_record.get('column_name');
            if (name == lov_cascade_para) {
                record.set(column_name, '');
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C' || validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    record.set(column_name + '_n', '');
                }
            }
        }
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('1WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_con_layout_config_ds');
            }else{
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'F_ACT_CTRLER_01','1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '1',record_not_dirty_flag);
            var config_records = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').getAll();
            if (!'prj_project'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['project_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project'&&'project_id'){
                parent_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('project_id')){
                    head_record.set('project_id',parent_record.get('project_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('PRJ_BP_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER_01');
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ONREADY'] = function() {
            var base_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('project_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['project_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag'] = false;
            if('prj_project_act_ctrler_hd'&&'prj_project'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('project_id',parent_ds.getCurrentRecord().get('project_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_CTRLER_01';
            if ('F_PRJ_BASIC_INFO'&& 'prj_project') {
                parent_record = $('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('1WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_con_layout_config_ds');
            }else{
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('N'=='N'){
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'F_ACT_CTRLER_02','1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '1',record_not_dirty_flag);
            var config_records = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').getAll();
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('prj_bp_id')){
                    head_record.set('prj_bp_id',parent_record.get('prj_bp_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('PRJ_BP_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER_02');
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ONREADY'] = function() {
            var base_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag'] = false;
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_CTRLER_02';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'1');
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('N'=='N'){
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '1');
            } else {
                return temp_value;
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'1');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_RENDERER'] = function(value, record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_GRID_QUERY'] = function() {
            $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds').query();
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_REAL_ESTATE','1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_real_estate'||'ERROR',
                            table_pk_value:record.get('REAL_ESTATE_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_REAL_ESTATE'
                        },
                        success:function(res){
                            var current_base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('REAL_ESTATE_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag'] = false;
            if('prj_real_estate'&&'prj_project_act_ctrler_hd'&&'prj_real_estate_lv'){
                var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag']){
                        base_ds_query();
                    }else{
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ONREADY'] = function() {
            var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
            var parent_ds_id = '1WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_real_estate'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '1');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'1');
                }
                if(''=='Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '1WCS_PROJECT_MODIFY__prj_real_estate_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('REAL_ESTATE_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('REAL_ESTATE_ID'.toLowerCase(), record.get('REAL_ESTATE_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_REAL_ESTATE';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '1');
            } else {
                return temp_value;
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'1');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_RENDERER'] = function(value, record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_GRID_QUERY'] = function() {
            $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds').query();
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PERSONAL_ESTATE','1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_personal_estate'||'ERROR',
                            table_pk_value:record.get('PERSONAL_ESTATE_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_PERSONAL_ESTATE'
                        },
                        success:function(res){
                            var current_base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('PERSONAL_ESTATE_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag'] = false;
            if('prj_personal_estate'&&'prj_project_act_ctrler_hd'&&'prj_personal_estate_lv'){
                var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag']){
                        base_ds_query();
                    }else{
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ONREADY'] = function() {
            var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
            var parent_ds_id = '1WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_personal_estate'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '1');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'1');
                }
                if(''=='Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '1WCS_PROJECT_MODIFY__prj_personal_estate_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('PERSONAL_ESTATE_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('PERSONAL_ESTATE_ID'.toLowerCase(), record.get('PERSONAL_ESTATE_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PERSONAL_ESTATE';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '1');
            } else {
                return temp_value;
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'1');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_RENDERER'] = function(value, record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_GRID_QUERY'] = function() {
            $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds').query();
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_EQUITY','1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_equity'||'ERROR',
                            table_pk_value:record.get('EQUITY_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_EQUITY'
                        },
                        success:function(res){
                            var current_base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('EQUITY_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag'] = false;
            if('prj_equity'&&'prj_project_act_ctrler_hd'&&'prj_equity_lv'){
                var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag']){
                        base_ds_query();
                    }else{
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ONREADY'] = function() {
            var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
            var parent_ds_id = '1WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_equity'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '1');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'1');
                }
                if(''=='Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '1WCS_PROJECT_MODIFY__prj_equity_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('EQUITY_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('EQUITY_ID'.toLowerCase(), record.get('EQUITY_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_EQUITY';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '1',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_T_T_PRJ_OTHER');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ONREADY'] = function() {
            var base_ds=$('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_OTHER';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PERSONAL_CREDI','1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '1',record_not_dirty_flag);
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').getAll();
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('prj_bp_id')){
                    head_record.set('prj_bp_id',parent_record.get('prj_bp_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('CREDIT_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_T_T_PRJ_PERSONAL_CREDI');
                window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ONREADY'] = function() {
            var base_ds=$('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag'] = false;
            if('prj_project_personal_credit'&&'prj_project_act_ctrler_hd'&&'prj_project_personal_credit_lv'){
                var base_ds=$('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_personal_credit_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_personal_credit_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PERSONAL_CREDI';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '1');
            } else {
                return temp_value;
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'1');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_RENDERER'] = function(value, record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_GRID_QUERY'] = function() {
            $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds').query();
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_PRJ_PROJECT_C','1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_project_lend_card'||'ERROR',
                            table_pk_value:record.get('LEND_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_PRJ_PROJECT_C'
                        },
                        success:function(res){
                            var current_base_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('LEND_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag'] = false;
            if('prj_project_lend_card'&&'prj_project_act_ctrler_hd'&&'prj_project_lend_lv'){
                var base_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag']){
                        base_ds_query();
                    }else{
                        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ONREADY'] = function() {
            var base_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
            var parent_ds_id = '1WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_project_lend_card'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '1');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'1');
                }
                if(''=='Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '1WCS_PROJECT_MODIFY__prj_project_lend_card_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('LEND_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('LEND_ID'.toLowerCase(), record.get('LEND_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_PRJ_PROJECT_C';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds');
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '1');
            } else {
                return temp_value;
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'1');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_RENDERER'] = function(value, record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'1');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_GRID_QUERY'] = function() {
            $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds').query();
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['1WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PROJECT_CARD','1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_project_lend_card'||'ERROR',
                            table_pk_value:record.get('LEND_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_PROJECT_CARD'
                        },
                        success:function(res){
                            var current_base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('LEND_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CHILD_ONREADY'] = function() {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag'] = false;
            if('prj_project_lend_card'&&'prj_project_act_ctrler_hd'&&'prj_project_card_lv'){
                var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag']){
                        base_ds_query();
                    }else{
                        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ONREADY'] = function() {
            var base_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
            var parent_ds_id = '1WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_project_lend_card'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '1');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'1');
                }
                if(''=='Y'){
                    var show_history_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                    window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'1');
            }
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '1WCS_PROJECT_MODIFY__prj_project_lend_card_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('LEND_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('LEND_ID'.toLowerCase(), record.get('LEND_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PROJECT_CARD';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'1');
        };

        window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_T_ACT_REMARK_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '1',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_ACT_REMARK');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('1WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_ONREADY'] = function() {
            var base_ds=$('1WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('1WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_T_ACT_REMARK_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['1WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_T_ACT_REMARK_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_ACT_REMARK';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'1');
        };
        window['1WCS_PROJECT_MODIFY_layoutDataSetList'].push('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_lov_getmapping_ds');
        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '1',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_GUAR_EXPLAIN');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ONREADY'] = function() {
            var base_ds=$('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_show_history_ds');
                            window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_show_history_ds');
                                window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_GUAR_EXPLAIN';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'1');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList']=[];
        window['2WCS_PROJECT_MODIFY_rootDataSetList']=[];
        window['2WCS_PROJECT_MODIFY_layoutDataSetObj']={};
        function GET_LOV_CASCADE(value) {
            if (Ext.isEmpty(value)) {
                return '';
            } else {
                return value;
            }
        }

        function SETOBJECTPARA(object, ds, field, para, record) {
            if (para) {
                if (object == 'LOV') {
                    field.setLovPara(para, GET_LOV_CASCADE(record.get(para)));
                } else if (object == 'COMBOBOX') {
                    ds.setQueryParameter(para, GET_LOV_CASCADE(record.get(para)));
                }
            }
        }

        function GET_CONFIG_COLUMN_NAME(name) {
            var query_name, length = name.length;
            if (name.substring(length - 2, length) == '_n') {
                query_name = name.substring(0, length - 2);
            } else {
                query_name = name;
            }
            return query_name;
        }

        function ON_COMMON_OBJECT_BEFORECOMMIT(object, record, lov_record){
            var display_name = object.binder.name,
                field = record.getField(display_name),
                mapping = field.get('mapping'),
                exists_flag = false;
            for (var name in lov_record.data) {
                exists_flag = false;
                for (var i = 0,
                         mapping_length = mapping.length;i < mapping_length;i++) {
                    if ((exists_flag = (name == mapping[i]['from']))) {
                        break;
                    }
                }
                if (!exists_flag) {
                    mapping.push({
                        from: name,
                        to: name
                    });
                }
            }
            field.setMapping(mapping);
        }

        function SET_CLEAR_LOVPARA_EMPTY(name, lov_cascade_para, record, config_record) {
            var validation_type = config_record.get('validation_type'),
                column_name = config_record.get('column_name');
            if (name == lov_cascade_para) {
                record.set(column_name, '');
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C' || validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    record.set(column_name + '_n', '');
                }
            }
        }
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('2WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_con_layout_config_ds');
            }else{
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'F_ACT_CTRLER_01','2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '2',record_not_dirty_flag);
            var config_records = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').getAll();
            if (!'prj_project'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['project_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project'&&'project_id'){
                parent_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('project_id')){
                    head_record.set('project_id',parent_record.get('project_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('PRJ_BP_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER_01');
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ONREADY'] = function() {
            var base_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('project_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['project_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag'] = false;
            if('prj_project_act_ctrler_hd'&&'prj_project'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('project_id',parent_ds.getCurrentRecord().get('project_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_CTRLER_01';
            if ('F_PRJ_BASIC_INFO'&& 'prj_project') {
                parent_record = $('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('2WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_con_layout_config_ds');
            }else{
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('N'=='N'){
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'F_ACT_CTRLER_02','2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '2',record_not_dirty_flag);
            var config_records = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').getAll();
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('prj_bp_id')){
                    head_record.set('prj_bp_id',parent_record.get('prj_bp_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('PRJ_BP_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER_02');
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ONREADY'] = function() {
            var base_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag'] = false;
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_CTRLER_02';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'2');
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('N'=='N'){
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '2');
            } else {
                return temp_value;
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'2');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_RENDERER'] = function(value, record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_GRID_QUERY'] = function() {
            $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds').query();
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_REAL_ESTATE','2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_real_estate'||'ERROR',
                            table_pk_value:record.get('REAL_ESTATE_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_REAL_ESTATE'
                        },
                        success:function(res){
                            var current_base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('REAL_ESTATE_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag'] = false;
            if('prj_real_estate'&&'prj_project_act_ctrler_hd'&&'prj_real_estate_lv'){
                var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag']){
                        base_ds_query();
                    }else{
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ONREADY'] = function() {
            var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
            var parent_ds_id = '2WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_real_estate'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '2');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'2');
                }
                if(''=='Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '2WCS_PROJECT_MODIFY__prj_real_estate_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('REAL_ESTATE_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('REAL_ESTATE_ID'.toLowerCase(), record.get('REAL_ESTATE_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_REAL_ESTATE';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '2');
            } else {
                return temp_value;
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'2');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_RENDERER'] = function(value, record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_GRID_QUERY'] = function() {
            $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds').query();
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PERSONAL_ESTATE','2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_personal_estate'||'ERROR',
                            table_pk_value:record.get('PERSONAL_ESTATE_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_PERSONAL_ESTATE'
                        },
                        success:function(res){
                            var current_base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('PERSONAL_ESTATE_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag'] = false;
            if('prj_personal_estate'&&'prj_project_act_ctrler_hd'&&'prj_personal_estate_lv'){
                var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag']){
                        base_ds_query();
                    }else{
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ONREADY'] = function() {
            var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
            var parent_ds_id = '2WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_personal_estate'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '2');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'2');
                }
                if(''=='Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '2WCS_PROJECT_MODIFY__prj_personal_estate_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('PERSONAL_ESTATE_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('PERSONAL_ESTATE_ID'.toLowerCase(), record.get('PERSONAL_ESTATE_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PERSONAL_ESTATE';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '2');
            } else {
                return temp_value;
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'2');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_RENDERER'] = function(value, record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_GRID_QUERY'] = function() {
            $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds').query();
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_EQUITY','2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_equity'||'ERROR',
                            table_pk_value:record.get('EQUITY_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_EQUITY'
                        },
                        success:function(res){
                            var current_base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('EQUITY_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag'] = false;
            if('prj_equity'&&'prj_project_act_ctrler_hd'&&'prj_equity_lv'){
                var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag']){
                        base_ds_query();
                    }else{
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ONREADY'] = function() {
            var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
            var parent_ds_id = '2WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_equity'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '2');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'2');
                }
                if(''=='Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '2WCS_PROJECT_MODIFY__prj_equity_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('EQUITY_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('EQUITY_ID'.toLowerCase(), record.get('EQUITY_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_EQUITY';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '2',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_T_T_PRJ_OTHER');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ONREADY'] = function() {
            var base_ds=$('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_OTHER';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PERSONAL_CREDI','2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '2',record_not_dirty_flag);
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').getAll();
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('prj_bp_id')){
                    head_record.set('prj_bp_id',parent_record.get('prj_bp_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('CREDIT_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_T_T_PRJ_PERSONAL_CREDI');
                window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ONREADY'] = function() {
            var base_ds=$('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag'] = false;
            if('prj_project_personal_credit'&&'prj_project_act_ctrler_hd'&&'prj_project_personal_credit_lv'){
                var base_ds=$('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_personal_credit_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_personal_credit_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PERSONAL_CREDI';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '2');
            } else {
                return temp_value;
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'2');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_RENDERER'] = function(value, record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_GRID_QUERY'] = function() {
            $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds').query();
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_PRJ_PROJECT_C','2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_project_lend_card'||'ERROR',
                            table_pk_value:record.get('LEND_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_PRJ_PROJECT_C'
                        },
                        success:function(res){
                            var current_base_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('LEND_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag'] = false;
            if('prj_project_lend_card'&&'prj_project_act_ctrler_hd'&&'prj_project_lend_lv'){
                var base_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag']){
                        base_ds_query();
                    }else{
                        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ONREADY'] = function() {
            var base_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
            var parent_ds_id = '2WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_project_lend_card'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '2');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'2');
                }
                if(''=='Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '2WCS_PROJECT_MODIFY__prj_project_lend_card_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('LEND_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('LEND_ID'.toLowerCase(), record.get('LEND_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_PRJ_PROJECT_C';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds');
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '2');
            } else {
                return temp_value;
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'2');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_RENDERER'] = function(value, record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'2');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_GRID_QUERY'] = function() {
            $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds').query();
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['2WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PROJECT_CARD','2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_project_lend_card'||'ERROR',
                            table_pk_value:record.get('LEND_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_PROJECT_CARD'
                        },
                        success:function(res){
                            var current_base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('LEND_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CHILD_ONREADY'] = function() {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag'] = false;
            if('prj_project_lend_card'&&'prj_project_act_ctrler_hd'&&'prj_project_card_lv'){
                var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag']){
                        base_ds_query();
                    }else{
                        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ONREADY'] = function() {
            var base_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
            var parent_ds_id = '2WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_project_lend_card'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '2');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'2');
                }
                if(''=='Y'){
                    var show_history_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                    window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'2');
            }
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '2WCS_PROJECT_MODIFY__prj_project_lend_card_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('LEND_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('LEND_ID'.toLowerCase(), record.get('LEND_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PROJECT_CARD';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'2');
        };

        window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_T_ACT_REMARK_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '2',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_ACT_REMARK');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('2WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_ONREADY'] = function() {
            var base_ds=$('2WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('2WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_T_ACT_REMARK_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['2WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_T_ACT_REMARK_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_ACT_REMARK';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'2');
        };
        window['2WCS_PROJECT_MODIFY_layoutDataSetList'].push('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_lov_getmapping_ds');
        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '2',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_GUAR_EXPLAIN');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ONREADY'] = function() {
            var base_ds=$('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_show_history_ds');
                            window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_show_history_ds');
                                window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_GUAR_EXPLAIN';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'2');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList']=[];
        window['3WCS_PROJECT_MODIFY_rootDataSetList']=[];
        window['3WCS_PROJECT_MODIFY_layoutDataSetObj']={};
        function GET_LOV_CASCADE(value) {
            if (Ext.isEmpty(value)) {
                return '';
            } else {
                return value;
            }
        }

        function SETOBJECTPARA(object, ds, field, para, record) {
            if (para) {
                if (object == 'LOV') {
                    field.setLovPara(para, GET_LOV_CASCADE(record.get(para)));
                } else if (object == 'COMBOBOX') {
                    ds.setQueryParameter(para, GET_LOV_CASCADE(record.get(para)));
                }
            }
        }

        function GET_CONFIG_COLUMN_NAME(name) {
            var query_name, length = name.length;
            if (name.substring(length - 2, length) == '_n') {
                query_name = name.substring(0, length - 2);
            } else {
                query_name = name;
            }
            return query_name;
        }

        function ON_COMMON_OBJECT_BEFORECOMMIT(object, record, lov_record){
            var display_name = object.binder.name,
                field = record.getField(display_name),
                mapping = field.get('mapping'),
                exists_flag = false;
            for (var name in lov_record.data) {
                exists_flag = false;
                for (var i = 0,
                         mapping_length = mapping.length;i < mapping_length;i++) {
                    if ((exists_flag = (name == mapping[i]['from']))) {
                        break;
                    }
                }
                if (!exists_flag) {
                    mapping.push({
                        from: name,
                        to: name
                    });
                }
            }
            field.setMapping(mapping);
        }

        function SET_CLEAR_LOVPARA_EMPTY(name, lov_cascade_para, record, config_record) {
            var validation_type = config_record.get('validation_type'),
                column_name = config_record.get('column_name');
            if (name == lov_cascade_para) {
                record.set(column_name, '');
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C' || validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    record.set(column_name + '_n', '');
                }
            }
        }
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('3WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_con_layout_config_ds');
            }else{
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'F_ACT_CTRLER_01','3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '3',record_not_dirty_flag);
            var config_records = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').getAll();
            if (!'prj_project'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['project_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project'&&'project_id'){
                parent_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('project_id')){
                    head_record.set('project_id',parent_record.get('project_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('PRJ_BP_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER_01');
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ONREADY'] = function() {
            var base_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('project_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['project_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag'] = false;
            if('prj_project_act_ctrler_hd'&&'prj_project'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('project_id',parent_ds.getCurrentRecord().get('project_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_CTRLER_01';
            if ('F_PRJ_BASIC_INFO'&& 'prj_project') {
                parent_record = $('WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('3WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_con_layout_config_ds');
            }else{
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('N'=='N'){
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'F_ACT_CTRLER_02','3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '3',record_not_dirty_flag);
            var config_records = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').getAll();
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('prj_bp_id')){
                    head_record.set('prj_bp_id',parent_record.get('prj_bp_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('PRJ_BP_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_CTRLER_02');
                window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ONREADY'] = function() {
            var base_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag'] = false;
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_CTRLER_02';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'3');
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('N'=='N'){
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '3');
            } else {
                return temp_value;
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'3');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_RENDERER'] = function(value, record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_GRID_QUERY'] = function() {
            $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds').query();
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_REAL_ESTATE','3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_real_estate'||'ERROR',
                            table_pk_value:record.get('REAL_ESTATE_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_REAL_ESTATE'
                        },
                        success:function(res){
                            var current_base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('REAL_ESTATE_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag'] = false;
            if('prj_real_estate'&&'prj_project_act_ctrler_hd'&&'prj_real_estate_lv'){
                var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag']){
                        base_ds_query();
                    }else{
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ONREADY'] = function() {
            var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
            var parent_ds_id = '3WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_real_estate'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '3');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'3');
                }
                if(''=='Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '3WCS_PROJECT_MODIFY__prj_real_estate_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('REAL_ESTATE_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('REAL_ESTATE_ID'.toLowerCase(), record.get('REAL_ESTATE_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_REAL_ESTATE';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '3');
            } else {
                return temp_value;
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'3');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_RENDERER'] = function(value, record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_GRID_QUERY'] = function() {
            $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds').query();
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PERSONAL_ESTATE','3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_personal_estate'||'ERROR',
                            table_pk_value:record.get('PERSONAL_ESTATE_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_PERSONAL_ESTATE'
                        },
                        success:function(res){
                            var current_base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('PERSONAL_ESTATE_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag'] = false;
            if('prj_personal_estate'&&'prj_project_act_ctrler_hd'&&'prj_personal_estate_lv'){
                var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag']){
                        base_ds_query();
                    }else{
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ONREADY'] = function() {
            var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
            var parent_ds_id = '3WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_personal_estate'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '3');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'3');
                }
                if(''=='Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '3WCS_PROJECT_MODIFY__prj_personal_estate_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('PERSONAL_ESTATE_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('PERSONAL_ESTATE_ID'.toLowerCase(), record.get('PERSONAL_ESTATE_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PERSONAL_ESTATE';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '3');
            } else {
                return temp_value;
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'3');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_RENDERER'] = function(value, record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_GRID_QUERY'] = function() {
            $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds').query();
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_EQUITY','3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_equity'||'ERROR',
                            table_pk_value:record.get('EQUITY_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_EQUITY'
                        },
                        success:function(res){
                            var current_base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('EQUITY_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag'] = false;
            if('prj_equity'&&'prj_project_act_ctrler_hd'&&'prj_equity_lv'){
                var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag']){
                        base_ds_query();
                    }else{
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ONREADY'] = function() {
            var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
            var parent_ds_id = '3WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_equity'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '3');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'3');
                }
                if(''=='Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '3WCS_PROJECT_MODIFY__prj_equity_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('EQUITY_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('EQUITY_ID'.toLowerCase(), record.get('EQUITY_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_EQUITY';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '3',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_T_T_PRJ_OTHER');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ONREADY'] = function() {
            var base_ds=$('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_OTHER';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_FORM_OBJECT_FOCUS'] = function(object) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            }
            var name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PERSONAL_CREDI','3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT'] = function(ds) {
            var head_record, record_not_dirty_flag = true;
            if(''){
                head_record = ds.getCurrentRecord();
            }else{
                head_record = ds.getCurrentRecord() || ds.create();
            }
            if(!head_record){
                return;
            }
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '3',record_not_dirty_flag);
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').getAll();
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            var parent_ds='';
            var parent_record = '';
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                parent_record = parent_ds.getCurrentRecord();
                if(parent_record && !head_record.get('prj_bp_id')){
                    head_record.set('prj_bp_id',parent_record.get('prj_bp_id'),record_not_dirty_flag);
                }
            }
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = column_name + '_n',
                    field_bak_flag = config_record.get('field_bak_flag');
                if (head_record && head_record.isNew && parent_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    head_record.set(column_name, parent_record.get(column_name));
                    head_record.set(display_name, parent_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        head_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        head_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = head_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                    } else {
                        combobox_field = head_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                    }
                }
                if(field_bak_flag=='Y'){
                    var bak_name=column_name+'_bak';
                    head_record.set(bak_name,head_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_add_and_load'](ds, head_record,config_records,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CON_FORM_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',source_ds.getAt(0).get('CREDIT_ID'.toLowerCase()));
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_T_T_PRJ_PERSONAL_CREDI');
                window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']=function(ds){
                    show_history_ds.un('load',window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length&&record&&!record.isNew){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',GET_CONFIG_COLUMN_NAME(name).toUpperCase());
                            if(history_record){
                                var fieldId = ('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_' + GET_CONFIG_COLUMN_NAME(name)).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        $jq("#"+fieldId+" input")[0].style.setProperty('background','#FF9965','important');
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',window['WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_show_history_ds_load']);
                show_history_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ONREADY'] = function() {
            var base_ds=$('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag'] = false;
            if('prj_project_personal_credit'&&'prj_project_act_ctrler_hd'&&'prj_project_personal_credit_lv'){
                var base_ds=$('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds');
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['CREDIT_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew&&window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag']){
                            base_ds_ajax();
                        }else{
                            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_initFlag'] = true;
                            if(!base_ds.getAll().length){
                                if(parent_ds.getAll().length){
                                    base_ds_ajax();
                                }else{
                                    base_ds.create();
                                }
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                    if(base_ds.id==parent_ds.id&&'' == 'Y'){
                        if(base_ds.getAll().length){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_personal_credit_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                        }else{
                            base_ds.on('load',function(){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_personal_credit_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_SHOW_HISTORY'](show_history_ds,base_ds);
                            });
                        }

                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records= $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;

                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds=$('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PERSONAL_CREDI';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_FIELD_LINK_RENDERER']=function(value,record,name) {
            var config_ds;
            if('Y'=='N'){
                config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds');
            }else{
                config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds');
            }
            var config_record = config_ds.find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY'] = function(ds, qpara) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_form_query'](ds, qpara,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '3');
            } else {
                return temp_value;
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'3');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_RENDERER'] = function(value, record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_GRID_QUERY'] = function() {
            $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds').query();
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_PRJ_PROJECT_C','3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_project_lend_card'||'ERROR',
                            table_pk_value:record.get('LEND_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_PRJ_PROJECT_C'
                        },
                        success:function(res){
                            var current_base_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('LEND_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag'] = false;
            if('prj_project_lend_card'&&'prj_project_act_ctrler_hd'&&'prj_project_lend_lv'){
                var base_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag']){
                        base_ds_query();
                    }else{
                        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ONREADY'] = function() {
            var base_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
            var parent_ds_id = '3WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_project_lend_card'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '3');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'3');
                }
                if(''=='Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '3WCS_PROJECT_MODIFY__prj_project_lend_card_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('LEND_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('LEND_ID'.toLowerCase(), record.get('LEND_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_PRJ_PROJECT_C';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds');
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
        function HLS_FORMATMONEY(v, p) {
            return Leaf.formatNumber(v, p);
        }

        function HLS_FORMATMONEY_ZERO_FILL(v, p) {
            return Leaf.formatNumber(v, p).replace(/0*$/g, '').replace(/\.$/, '');
        }

        function ON_GRID_COMBOBOX_FOCUS(combobox) {
            if (!combobox.optionDataSet.isLoaded) {
                combobox.optionDataSet.isLoaded = true;
                combobox.optionDataSet.query();
            }
        }

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CON_GRID_PROCESS'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN'] = function(value, record, name) {
            var editor_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name),
                precision = editor_record.get('precision'),
                validation_type = editor_record.get('validation_type');
            if ((validation_type == 'NUMBERFIELD' || validation_type == 'PERCENTFIELD') && !Ext.isEmpty(value)) {
                var temp_value = null;
                if (editor_record.get('allow_format') == 'TRUE') {
                    if (precision) {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            temp_value = HLS_FORMATMONEY(value, precision);
                        } else {
                            temp_value = HLS_FORMATMONEY_ZERO_FILL(value, precision);
                        }
                    } else {
                        temp_value = HLS_FORMATMONEY(value);
                    }
                } else {
                    if (precision && editor_record.get('allow_decimal') == 'TRUE') {
                        if (editor_record.get('zero_fill') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision)+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision);
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '')+'%';
                            }else{
                                temp_value = parseFloat(value).toFixed(precision).replace(/0*$/g, '').replace(/\.$/, '');
                            }
                        }
                    } else {
                        if (editor_record.get('allow_decimal') == 'TRUE') {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = mul(value,100)+'%';
                            }else{
                                temp_value = value;
                            }
                        } else {
                            if(validation_type=='PERCENTFIELD'){
                                temp_value = parseFloat(mul(value,100)).toFixed(0)+'%';
                            }else{
                                temp_value = parseFloat(parseFloat(value).toFixed(0));
                            }
                        }
                    }
                }
            } else if (validation_type == 'DATEPICKER') {
                temp_value = Leaf.formatDate(value);
            } else {
                temp_value = value;
            }
            if (editor_record.get('renderer_flag') == 'Y') {
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](temp_value, record, name, editor_record, '3');
            } else {
                return temp_value;
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_LN_PICTURE'] = function(value, record, name) {
            var pic = window['WCS_PROJECT_MODIFY_dynamic_pic_renderer'](record, name,'3');
            if (pic) {
                return pic;
            } else {
                return '';
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_RENDERER'] = function(value, record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            if(config_record.get('validation_type') == 'BUTTON'){
                return window['WCS_PROJECT_MODIFY_dynamic_button_renderer'](value, record, name,config_record,'3');
            }else{
                return window['WCS_PROJECT_MODIFY_dynamic_link_renderer'](value, record, name,config_record,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_GRID_QUERY'] = function() {
            $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds').query();
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR'] = function(record, name) {
            var config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            if(!config_record){
                name = GET_CONFIG_COLUMN_NAME(name);
                config_record = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').find('column_name', name);
            }
            if (config_record) {
                var editor = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_' + name + '_id';
                if (config_record.get('readonly_input_mode')=='TRUE'&&config_record.get('validation_type')!='TEXTAREA') {
                    return '';
                }
                if (!record.isNew && config_record.get('input_mode') == 'REQUIRED_ONLY_ADD') {
                    return '';
                } else {
                    return editor;
                }
            }else{
                return '';
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_GRID_OBJECT_FOCUS'] = function(object) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds'),
                name = GET_CONFIG_COLUMN_NAME(object.binder.name),
                display_name = object.binder.name,
                record = object.record || object.binder.ds.create();
            var config_record = config_ds.find('column_name', name);
            var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                lov_cascade_para3 = config_record.get('lov_cascade_para3'),
                field = record.getField(display_name);
            if (object instanceof $L.Lov) {
                if (config_record.get('validation_type') == 'LOV' || config_record.get('validation_type') == 'LOV_C'|| config_record.get('validation_type') == 'LOV_D'|| config_record.get('validation_type') == 'LOV_D_C') {
                    field.setLovPara('column_name', name);
                    field.setLovPara('tab_code', config_record.get('tab_code'));
                    field.setLovPara('config_id', config_record.get('config_id'));
                    field.setLovPara('layout_code', config_record.get('layout_code'));
                }
                SETOBJECTPARA('LOV', '', field, lov_cascade_para1, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para2, record);
                SETOBJECTPARA('LOV', '', field, lov_cascade_para3, record);
            } else if (object instanceof $L.ComboBox) {
                var combobox_ds = object.optionDataSet;
                combobox_ds.setQueryParameter('column_name', name);
                combobox_ds.setQueryParameter('tab_code', config_record.get('tab_code'));
                combobox_ds.setQueryParameter('layout_code', config_record.get('layout_code'));
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para1, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para2, record);
                SETOBJECTPARA('COMBOBOX', combobox_ds, field, lov_cascade_para3, record);
                combobox_ds.query();
            }
            window['3WCS_PROJECT_MODIFY_on_cp_object_focus'](object,'T_T_T_PRJ_PROJECT_CARD','3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY']=function(show_history_ds,base_ds){
            if('' == 'Y'&&base_ds.getAll().length){
                var records=base_ds.getAll();
                for(var i=0;i<records.length;i++){
                    var record=records[i];
                    Leaf.request({
                        url:'/leaf-zgc/autocrud/layout.server_doc_layout_show_history/query',
                        para:{
                            table_name:'prj_project_lend_card'||'ERROR',
                            table_pk_value:record.get('LEND_ID'.toLowerCase()),
                            layout_code:'WCS_PROJECT_MODIFY',
                            tab_code:'T_T_T_PRJ_PROJECT_CARD'
                        },
                        success:function(res){
                            var current_base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
                            var current_records= current_base_ds.getAll();
                            for(var j=0;j<current_records.length;j++){
                                var current_record = current_records[j];
                                if(res.result && res.result.record && res.result.record.length){
                                    for(var i=0;i<res.result.record.length;i++){
                                        var history_record = res.result.record[i];
                                        if(current_record.get('LEND_ID'.toLowerCase())==history_record['table_pk_value']){
                                            for(var name in current_record.data){
                                                if(GET_CONFIG_COLUMN_NAME(name).toUpperCase()==history_record['column_name']){
                                                    var grid_id  = '3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_layout_grid_id';
                                                    if($(grid_id).findColByName(name.toLowerCase())){
                                                        current_record.getField(name).setPropertity('tooltip', history_record['from_value']);
                                                        Ext.get(grid_id).select('tr[_row='+current_record.id+'] td[dataindex=' + name.toLowerCase() + ']').setStyle({
                                                            background:'#FF9965'
                                                        });
                                                    }
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        scope:this
                    });
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CHILD_ONREADY'] = function() {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag'] = false;
            if('prj_project_lend_card'&&'prj_project_act_ctrler_hd'&&'prj_project_card_lv'){
                var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');

                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if('' == 'Y'){
                        var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,base_ds);
                    }
                }

                function base_ds_query(){
                    base_ds.setQueryParameter('prj_bp_id', parent_ds.getCurrentRecord().get('prj_bp_id'));
                    base_ds.on('load',base_ds_load);
                    base_ds.query();
                }
                parent_ds.on('indexchange', function(ds,record) {
                    if(!record.isNew&&window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag']){
                        base_ds_query();
                    }else{
                        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_initFlag'] = true;
                    }
                });
                if(parent_ds.getAll().length && parent_ds.getCurrentRecord() && !parent_ds.getCurrentRecord().isNew){
                    base_ds_query();
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ONREADY'] = function() {
            var base_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds');
            function base_ds_load(ds){
                base_ds.un('load',base_ds_load);
                if('' == 'Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,base_ds);
                }
            }
            if(''!='N'){
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD'] = function(ds) {
            var line_record = ds.getCurrentRecord(),
                parent_table_tab_code = 'F_ACT_CTRLER_01',
                parent_table = 'prj_project_act_ctrler_hd',
                parent_base_table_pk = 'prj_bp_id';
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
            var parent_ds_id = '3WCS_PROJECT_MODIFY_'+ parent_table_tab_code + '_' + parent_table + '_ds';
            var head_record = '';
            if(parent_table && $L.CmpManager.get(parent_ds_id)){
                head_record = $(parent_ds_id).getCurrentRecord();
                if (head_record&&head_record.get(parent_base_table_pk)) {
                    line_record.set(parent_base_table_pk, head_record.get(parent_base_table_pk));
                    if ('prj_project_lend_card'.toUpperCase() == 'PRJ_QUOTATION') {
                        line_record.set('document_id', head_record.get(parent_base_table_pk));
                    }
                }
            }
            if(!line_record.get('document_category')){
                line_record.set('document_category', 'PROJECT');
            }
            line_record.set('bp_seq', '3');
            for (var i = 0;i < config_records.length;i++) {
                var config_record = config_records[i],
                    validation_type = config_record.get('validation_type'),
                    column_name = config_record.get('column_name'),
                    display_name = config_record.get('column_name') + '_n';
                if (head_record && config_record.get('copy_from_parent_tab') == 'Y') {
                    line_record.set(column_name, head_record.get(column_name));
                    line_record.set(display_name, head_record.get(display_name));
                }
                if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                    var documentMapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_code',
                            to: column_name
                        }];
                        line_record.getField(column_name).setMapping(documentMapping);
                    } else {
                        documentMapping = [{
                            from: 'value_code',
                            to: column_name
                        }, {
                            from: 'value_name',
                            to: display_name
                        }];
                        line_record.getField(display_name).setMapping(documentMapping);
                    }
                } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                    var combobox_field;
                    var combobox_documentmapping;
                    if (config_record.get('lov_return_vcode') == 'Y') {
                        combobox_field = line_record.getField(column_name);
                        combobox_field.setPropertity('displayfield', 'value_code');
                        line_record.getField(column_name).setMapping(combobox_documentmapping);
                    } else {
                        combobox_field = line_record.getField(display_name);
                        combobox_field.setPropertity('displayfield', 'value_name');
                        line_record.getField(display_name).setMapping(combobox_documentmapping);
                    }
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_add'](ds, line_record , config_records,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD'] = function(ds) {
            var records = ds.getAll();
            var config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
            if (records.length) {
                for (var i = 0;i < records.length;i++) {
                    var line_record = records[i];
                    for (var j = 0;j < config_records.length;j++) {
                        var config_record = config_records[j],
                            validation_type = config_record.get('validation_type'),
                            column_name = config_record.get('column_name'),
                            display_name = config_record.get('column_name') + '_n',
                            field_bak_flag = config_record.get('field_bak_flag');
                        if (validation_type == 'LOV' || validation_type == 'LOV_C' || validation_type == 'TREE' || validation_type == 'TREE_C') {
                            var documentMapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_code',
                                    to: column_name
                                }];
                                line_record.getField(column_name).setMapping(documentMapping);
                            } else {
                                documentMapping = [{
                                    from: 'value_code',
                                    to: column_name
                                }, {
                                    from: 'value_name',
                                    to: display_name
                                }];
                                line_record.getField(display_name).setMapping(documentMapping);
                            }
                        } else if (validation_type == 'COMBOBOX' || validation_type == 'COMBOBOX_C') {
                            var combobox_field;
                            var combobox_documentmapping;
                            if (config_record.get('lov_return_vcode') == 'Y') {
                                combobox_field = line_record.getField(column_name);
                                combobox_field.setPropertity('displayfield', 'value_code');
                            } else {
                                combobox_field = line_record.getField(display_name);
                                combobox_field.setPropertity('displayfield', 'value_name');
                            }
                        }
                        if(field_bak_flag=='Y'){
                            var bak_name=column_name+'_bak';
                            line_record.set(bak_name,line_record.get(column_name)||'LAYOUT_FIELD_VALUE_INIT_NULL',true);
                        }
                    }
                    window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, line_record,config_records,'3');
                }
                if(''=='Y'){
                    var show_history_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_show_history_ds');
                    window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SHOW_HISTORY'](show_history_ds,ds);
                }
            }else{
                window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_load'](ds, '',config_records,'3');
            }
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE'] = function(ds,record) {
            var form_ds_id = '3WCS_PROJECT_MODIFY__prj_project_lend_card_ds';
            if ($L.CmpManager.get(form_ds_id)) {
                var form_ds = $(form_ds_id);
                if (record.get('LEND_ID'.toLowerCase())) {
                    form_ds.setQueryParameter('LEND_ID'.toLowerCase(), record.get('LEND_ID'.toLowerCase()));
                    form_ds.query();
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_indexchange'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'](ds, record, name, value, old_value);
            window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_update'](ds, record, name, value, old_value,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_CLEAR_LOVPARA'] = function(ds, record, name, value, old_value) {
            if (Ext.isEmpty(value)) {
                var query_name = GET_CONFIG_COLUMN_NAME(name),
                    field = record.getField(name),
                    config_records = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds').getAll();
                var current_field_value;
                for (var i = 0;i < config_records.length;i++) {
                    var config_record = config_records[i];
                    var lov_cascade_para1 = config_record.get('lov_cascade_para1'),
                        lov_cascade_para2 = config_record.get('lov_cascade_para2'),
                        lov_cascade_para3 = config_record.get('lov_cascade_para3');
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para1, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para2, record, config_record);
                    SET_CLEAR_LOVPARA_EMPTY(query_name, lov_cascade_para3, record, config_record);
                }
                var current_field = record.getField(name),
                    current_lovpara = current_field.get('lovpara'),
                    validation_sql;
                if (current_lovpara) {
                    validation_sql = current_lovpara['validation_sql'];
                }
                if (!value && validation_sql) {
                    var current_loadpara_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds');

                    function on_lov_getmapping_load(load_ds) {
                        var lov_records = load_ds.getAll();
                        for (var j = 0;j < lov_records.length;j++) {
                            var lov_record = lov_records[j],
                                mapping = current_field.get('mapping'),
                                exists_flag = false,
                                lov_name = lov_record.data['name'].toLowerCase();
                            for (var i = 0,
                                     mapping_length = mapping.length;i < mapping_length;i++) {
                                if ((exists_flag = (lov_name == mapping[i]['from']))) {
                                    break;
                                }
                            }
                            if (!exists_flag) {
                                record.set(lov_name, '');
                            }
                            current_field.setMapping(mapping);
                        }
                        current_loadpara_ds.un('load', on_lov_getmapping_load);
                        unlock_current_window();
                    }
                    for (var lov_para_name in current_lovpara) {
                        current_loadpara_ds.setQueryParameter(lov_para_name, record.get(lov_para_name));
                    }
                    current_loadpara_ds.setQueryParameter('validation_sql', validation_sql);
                    lock_current_window();
                    current_loadpara_ds.on('load', on_lov_getmapping_load);
                    current_loadpara_ds.query();
                }
            }
            for (var show_name in record.data) {
                var show_field = record.getField(show_name);
                var lovpara_field = show_field.get('lovpara');
                if (lovpara_field && lovpara_field[name]) {
                    record.set(show_name, '');
                    var save_name = GET_CONFIG_COLUMN_NAME(show_name);
                    if (save_name != show_name) {
                        record.set(save_name, '');
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_T_T_PRJ_PROJECT_CARD';
            if ('F_ACT_CTRLER_01'&&'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY'] = function(ds, qpara) {
            if('prj_project_act_ctrler_hd'&&'prj_bp_id'){
                var parent_ds = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(parent_ds.getCurrentRecord()){
                    qpara['prj_bp_id'] = parent_ds.getCurrentRecord().get('prj_bp_id');
                }
            }
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_query'](ds, qpara,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_select'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_unselect'](ds,record,'3');
        };

        window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE'] = function(ds, record) {
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_grid_remove'](ds,record,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_T_ACT_REMARK_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '3',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','T_ACT_REMARK');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('3WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_ONREADY'] = function() {
            var base_ds=$('3WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('3WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_T_ACT_REMARK_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_T_ACT_REMARK_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['3WCS_PROJECT_MODIFY_T_ACT_REMARK_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_T_ACT_REMARK_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'T_ACT_REMARK';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'3');
        };
        window['3WCS_PROJECT_MODIFY_layoutDataSetList'].push('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_lov_getmapping_ds');
        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_TEXTAREA_INIT'] = function(ds) {
            var head_record = ds.getCurrentRecord() || ds.create();
            var record_not_dirty_flag = true;
            if(head_record.isNew){
                record_not_dirty_flag = false;
            }else{
                record_not_dirty_flag = true;
            }
            head_record.set('bp_seq', '3',record_not_dirty_flag);
            if (!'prj_project_act_ctrler_hd'&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id'.toLowerCase()]&&''&&head_record.isNew) {
                var default_value_ds = (parent == top ? self : parent)['$'](''),
                    default_record = default_value_ds.getCurrentRecord();
                for (var name in head_record.data) {
                    if (!Ext.isEmpty(default_record.get(name)) && name.indexOf('price_list') == '-1') {
                        head_record.set(name, default_record.get(name),record_not_dirty_flag);
                    }
                }
            }
            if('prj_project_act_ctrler_hd'&&'prj_bp_id' && !head_record.get('prj_bp_id')){
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                var parent_record = parent_ds.getCurrentRecord();
                head_record.set('prj_bp_id',parent_record.get('prj_bp_id'));
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY']=function(show_history_ds,source_ds){
            if('' == 'Y' && source_ds.getAll().length){
                show_history_ds.setQueryParameter('table_pk_value',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]);
                show_history_ds.setQueryParameter('layout_code','WCS_PROJECT_MODIFY');
                show_history_ds.setQueryParameter('tab_code','F_ACT_GUAR_EXPLAIN');
                function show_history_ds_load(ds){
                    show_history_ds.un('load',show_history_ds_load);
                    var history_records = ds.getAll();
                    var record = source_ds.getAt(0);
                    if(history_records.length && record){
                        for(var name in record.data){
                            var history_record =show_history_ds.find('column_name',name.toUpperCase());
                            if(history_record){
                                var fieldId = ('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_' + name).toUpperCase();
                                if($L.CmpManager.get(fieldId)){
                                    record.getField(name).setPropertity('tooltip', history_record.get('from_value')||' ');
                                    if(Ext.get(fieldId).child('input')){
                                        Ext.get(fieldId).child('input').setStyle({
                                            background:'#FF9965'
                                        });
                                    }
                                }
                            }
                        }
                    }
                }
                show_history_ds.on('load',show_history_ds_load);
                show_history_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ONREADY'] = function() {
            var base_ds=$('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_ds');
            if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                base_ds.create();
            }else{
                base_ds.setQueryParameter('prj_bp_id',window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['prj_bp_id']);
                function base_ds_load(ds){
                    base_ds.un('load',base_ds_load);
                    if(!base_ds.getAll().length){
                        base_ds.create();
                    }else{
                        if('' == 'Y'){
                            var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_show_history_ds');
                            window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY'](show_history_ds,base_ds);
                        }
                    }
                }
                base_ds.on('load',base_ds_load);
                base_ds.query();
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_CHILD_ONREADY'] = function() {
            if('prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd'&&'prj_project_act_ctrler_hd_lv'){
                var base_ds=$('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_ds');
                var parent_ds=$('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds');
                if(!window['WCS_PROJECT_MODIFYACT_CTRLER_all_parameters']['PRJ_BP_ID'.toLowerCase()]&&!'prj_project_act_ctrler_hd'){
                    base_ds.create();
                }else{
                    function base_ds_query(){
                        base_ds.setQueryParameter('prj_bp_id',parent_ds.getCurrentRecord().get('prj_bp_id'));
                        base_ds.query();
                    }
                    function base_ds_check(){
                        base_ds.un('load',base_ds_check);
                        if(!base_ds.getAll().length && !''){
                            base_ds.create();
                        }else{
                            if('' == 'Y'){
                                var show_history_ds = $('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_prj_project_act_ctrler_hd_show_history_ds');
                                window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_SHOW_HISTORY'](show_history_ds,base_ds);
                            }
                        }
                    }
                    function base_ds_ajax(){
                        base_ds_query();
                        base_ds.on('load',base_ds_check);
                    }
                    parent_ds.on('indexchange',function(ds,record){
                        if(!record.isNew){
                            base_ds_ajax();
                        }else{
                            if(!base_ds.getAll().length){
                                base_ds.create();
                            }
                        }
                    });
                    if(parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds_ajax();
                    }else if(!parent_ds.getAll().length && !base_ds.getAll().length){
                        base_ds.create();
                    }
                }
            }
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_CON_TEXTAREA_PROCESSFUNCTION'] = function(datas) {
            for (var i = 0;i < datas.length;i++) {
                var temp = datas[i];
                for (var name in temp.data) {
                    var temp_record = $('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_con_layout_config_ds').find('column_name', name);
                    if (temp_record) {
                        if (temp_record.get('validation_type') == 'NUMBERFIELD') {
                            temp.data[name] = isNaN(temp.data[name]) == true ? temp.data[name] : parseFloat(parseFloat(temp.data[name]).toFixed(temp_record.get('precision')));
                        }
                    }
                }
            }
            return datas;
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_UPDATE'] = function(ds, record, name, value, old_value) {
            window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'](ds, record, name, value, old_value);
        };

        window['3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_ON_LAYOUT_DYNAMIC_INNER_FIELD_JAVASCRIPT'] = function(ds, record, name, value, old_value, fromLoad) {
            var config_ds = $('3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_con_layout_config_ds');
            var config_record = config_ds.find('column_name', name);
            var parent_record='';
            var layout_code = 'WCS_PROJECT_MODIFY',
                tab_code = 'F_ACT_GUAR_EXPLAIN';
            if ('F_ACT_CTRLER_01'&& 'prj_project_act_ctrler_hd') {
                parent_record = $('3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds').getAt(0);
            }
            if (config_record && config_record.get('field_javascript')) {
                eval(config_record.get('field_javascript'));
            }
        };

        window['3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED']=function(ds){
            window['WCS_PROJECT_MODIFY_on_layout_dynamic_submitfailed'](ds,'3');
        };
        ]]></script>
        <a:screen-include screen="modules/cont/CON500/con_contract_get_layout_code.lview"/>
        <a:dataSets>
            <a:dataSet id="WCS_PROJECT_MODIFYACT_CTRLER_all_tab_config_ds">
                <a:datas>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_PRJ_BASIC_INFO" root_tree_code="PRJ_BASIC_INFO" tree_code="PRJ_BASIC_INFO" row_count="0" tab_desc="项目信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="1" margin_height="20" tab_group="1" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_PRJ_BASIC_INFO" tab_code="T_PRJ_BASIC_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_BASIC_INFO" base_table_pk="PROJECT_ID" tree_code="PRJ_BASIC_INFO" row_count="8" tab_desc="基本信息" navbar="true" base_table="prj_project" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_PRJ_BASIC_INFO" margin_width="100" tab_seq="2" margin_height="0" query_source="prj_project_lv" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="F_PRJ_BASIC_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="600" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_BASIC_INFO" base_table_pk="PROJECT_ID" tree_code="PRJ_BASIC_INFO" row_count="1" tab_desc="增信措施" navbar="true" base_table="prj_project" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_PRJ_BASIC_INFO" margin_width="100" tab_seq="3" height="150" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="L_INCERESE_PRJ_BASIC_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="600" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_BASIC_INFO" base_table_pk="PROJECT_ID" tree_code="PRJ_BASIC_INFO" row_count="1" tab_desc="起租时间确定规则及其它" navbar="true" base_table="prj_project" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_PRJ_BASIC_INFO" margin_width="100" tab_seq="4" height="80" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="D_PRJ_BASIC_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_CC_PRJ_BASIC_INFO" root_tree_code="PRJ_BASIC_INFO" tree_code="PRJ_BASIC_INFO" row_count="0" tab_desc="附件上传" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="5" margin_height="20" tab_group="1" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_CC_PRJ_BASIC_INFO" tab_code="T_CC_PRJ_BASIC_INFO" configurable="Y"/>
                    <a:record fetchall="true" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_BASIC_INFO" base_table_pk="DOC_REF_ID" tree_code="PRJ_BASIC_INFO" row_count="0" tab_desc="支持文件" navbar="true" base_table="prj_cdd_item_doc_ref" tab_type="ATTACH" column_count="0" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_CC_PRJ_BASIC_INFO" margin_width="100" tab_seq="6" margin_height="70" ref_tab_code="F_PRJ_BASIC_INFO" attachment_tab_group="228" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="C_PRJ_BASIC_INFO" tab_code="C_PRJ_BASIC_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_TENANT_BASIC" root_tree_code="TENANT" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="0" tab_desc="基础信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="10" margin_height="20" tab_group="10" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_TENANT_BASIC" tab_code="T_TENANT_BASIC" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="TENANT" base_table_pk="PRJ_BP_ID" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="11" tab_desc="基本信息" navbar="true" base_table="prj_project_bp" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_TENANT_BASIC" margin_width="66" tab_seq="11" margin_height="0" query_source="prj_project_bp_tenant_lv" query_bp_category_name="主承租人" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="prj.PRJ501N.hls_bp_master" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_TENANT_BASIC" tab_code="F_TENANT_BASIC" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_TENANT_CONTACT" root_tree_code="TENANT" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="0" tab_desc="联系人信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_TENANT_BASIC" margin_width="66" tab_seq="12" margin_height="270" tab_group="11" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_TENANT_CONTACT" tab_code="T_TENANT_CONTACT" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="CONTACT_INFO_ID" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="0" navbar="true" base_table="hls_bp_master_contact_info" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_TENANT_CONTACT" margin_width="85" tab_seq="13" margin_height="320" query_source="prj_bp_master_contact_info_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_contact_info_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_CONTACT_G" tab_code="G_CONTACT_G" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_TENANT_ADD" root_tree_code="TENANT" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="0" tab_desc="地址信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_TENANT_BASIC" margin_width="66" tab_seq="14" margin_height="270" tab_group="12" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_TENANT_ADD" tab_code="T_TENANT_ADD" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="EVOLUTION_ID" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="0" tab_desc="历史沿革及主要经营活动变化" navbar="true" base_table="prj_bp_hist_evolution" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_TENANT_BASIC" margin_width="85" tab_seq="15" margin_height="320" query_source="prj_bp_hist_evolution_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_HISTORY" tab_code="G_HISTORY" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="ADDRESS_ID" tree_code="TENANT_BASIC_INFO_DETAIL" row_count="2" navbar="true" base_table="hls_bp_master_address" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_TENANT_ADD" margin_width="85" tab_seq="15" margin_height="320" query_source="prj_bp_master_address_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_address_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_TENANT_ADD_C" tab_code="G_TENANT_ADD_C" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_TENANT_SHOCKHOLDER" root_tree_code="TENANT" tree_code="STOCK_INFO" row_count="0" tab_desc="股东信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" margin_width="66" tab_seq="16" margin_height="100" tab_group="11" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_TENANT_SHOCKHOLDER" tab_code="T_TENANT_SHOCKHOLDER" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="STOCKHOLDER_ID" tree_code="STOCK_INFO" row_count="0" tab_desc="(注意:填写至少3个股东信息)" navbar="true" base_table="hls_bp_master_stockholder" tab_type="GRID" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_TENANT_SHOCKHOLDER" margin_width="85" tab_seq="17" margin_height="150" query_source="prj_bp_master_stockholder_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_stockholder_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_TENANT_SHOCKHOLDER" tab_code="G_TENANT_SHOCKHOLDER" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_STUFF_DETAIL" root_tree_code="TENANT" tree_code="MANAGEMENT" row_count="0" tab_desc="管理人员" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="20" margin_height="20" tab_group="20" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_STUFF_DETAIL" tab_code="T_STUFF_DETAIL" configurable="Y"/>
                    <a:record tab_ref_screen="modules/prj/PRJ501N/prj_bp_organiz_structure.lview?project_id=${/parameter/@project_id}" fetchall="false" field_width="120" margin_top="3" box_width="1200" parent_table_tab_code="T_ORGANIZ_STRUCTURE" root_tree_code="TENANT" tree_code="MANAGEMENT" row_count="0" tab_desc="组织架构图" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_STUFF_DETAIL" margin_width="100" tab_seq="20" margin_height="200" tab_group="24" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_ORGANIZ_STRUCTURE" tab_code="T_ORGANIZ_STRUCTURE" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="MAJOR_INFO_ID" tree_code="MANAGEMENT" row_count="0" tab_desc="高管及主要联系人(注意:实际控制人或法定代表人至少录入一个)" navbar="true" base_table="hls_bp_master_major_info" tab_type="GRID" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_STUFF_DETAIL" margin_width="68" tab_seq="21" margin_height="150" query_source="prj_bp_master_major_info_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_major_info_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_TENANT_MANAGEMENT" tab_code="G_TENANT_MANAGEMENT" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="G_TENANT_MANAGEMENT" root_tree_code="TENANT" base_table_pk="MEMBER_ID" tree_code="MANAGEMENT" row_count="0" tab_desc="高管及主要联系人家庭关系" navbar="true" base_table="hls_bp_master_member" tab_type="GRID" column_count="0" parent_base_table_pk="major_info_id" show_box="Y" parent_tab_code="T_STUFF_DETAIL" margin_width="68" tab_seq="22" margin_height="150" query_source="hls_bp_master_member_lv" query_bp_category_name="主承租人" parent_table="hls_bp_master_major_info" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_member_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_TENANT_MEMBER_B" tab_code="G_TENANT_MEMBER_B" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="SEQ_ID" tree_code="MANAGEMENT" row_count="2" tab_desc="人员结构" navbar="true" base_table="prj_bp_management" tab_type="FORM" column_count="5" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_STUFF_DETAIL" margin_width="68" tab_seq="23" margin_height="0" query_source="prj_bp_management_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="50" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_STAFF_INTRO" tab_code="F_STAFF_INTRO" configurable="Y"/>
                    <a:record tab_ref_screen="modules/prj/PRJ501N/prj_project_bp_external_info.lview?prj_bp_id=${/parameter/@prj_bp_id}" fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_EXTERNAL_INFO" root_tree_code="TENANT" tree_code="CREDIT_EXTERNAL_INFO" row_count="0" tab_desc="资信信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="30" margin_height="20" tab_group="30" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_EXTERNAL_INFO" tab_code="T_EXTERNAL_INFO" configurable="Y"/>
                    <a:record tab_ref_screen="modules/prj/PRJ501N/prj_bp_management_manage_edit.lview?prj_bp_id=${/parameter/@prj_bp_id}" fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_MANAGE" root_tree_code="TENANT" tree_code="ENTERPRISE_MANAGE_INFO" row_count="0" tab_desc="经营信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="48" margin_height="0" tab_group="40" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_MANAGE" tab_code="T_MANAGE" configurable="Y"/>
                    <a:record tab_ref_screen="modules/prj/PRJ501N/prj_bp_management_swot_edit.lview?prj_bp_id=${/parameter/@prj_bp_id}" fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_SWOT" root_tree_code="TENANT" tree_code="INDUSTRY_AND_COMPETITIVENESS" row_count="0" tab_desc="行业信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="50" margin_height="50" tab_group="50" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_SWOT" tab_code="T_SWOT" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_FIN_STATEMENT" root_tree_code="TENANT" tree_code="FIN_STATEMENT" row_count="0" tab_desc="财务信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="60" margin_height="50" tab_group="60" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_FIN_STATEMENT" tab_code="T_FIN_STATEMENT" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="PRJ_BP_ID" tree_code="FIN_STATEMENT" row_count="1" tab_desc="财务信息" navbar="true" base_table="prj_project_bp" tab_type="FORM" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_FIN_STATEMENT" margin_width="100" tab_seq="62" margin_height="100" query_source="prj_project_bp_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_TENANT_BASIC" tab_code="F_FIN_STATEMENT" configurable="Y"/>
                    <a:record tab_ref_screen="modules/prj/PRJ501N/prj_project_bp_finance_evaluation.lview?prj_bp_id=${/parameter/@prj_bp_id}" fetchall="false" field_width="150" margin_top="3" box_width="1200" parent_table_tab_code="T_FIN_STATEMENT_DEATIL" root_tree_code="TENANT" tree_code="FIN_STATEMENT" row_count="0" tab_desc="财务指标评价" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_FIN_STATEMENT" margin_width="100" tab_seq="63" margin_height="200" tab_group="63" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_FIN_STATEMENT_DEATIL" tab_code="T_FIN_STATEMENT_DEATIL" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_FINANCING_PURPOSE" root_tree_code="TENANT" tree_code="FINANCING_PURPOSE" row_count="0" tab_desc="融资信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="70" margin_height="50" tab_group="70" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_FINANCING_PURPOSE" tab_code="T_FINANCING_PURPOSE" configurable="N"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1200" parent_table_tab_code="F_TENANT_BASIC" root_tree_code="TENANT" base_table_pk="SEQ_ID" tree_code="FINANCING_PURPOSE" row_count="0" tab_desc="融资用途" navbar="true" base_table="prj_bp_management" tab_type="TEXTAREA" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_FINANCING_PURPOSE" margin_width="150" tab_seq="71" margin_height="435" query_source="prj_bp_management_lv" query_bp_category_name="主承租人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_FINANCING_PURPOSE" tab_code="F_FINANCING_PURPOSE" configurable="N"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1200" parent_table_tab_code="F_FINANCING_PURPOSE" root_tree_code="TENANT" base_table_pk="SEQ_ID" tree_code="FINANCING_PURPOSE" row_count="0" tab_desc="资金需求量测算" navbar="true" base_table="prj_bp_management" tab_type="TEXTAREA" column_count="0" parent_base_table_pk="seq_id" show_box="Y" parent_tab_code="T_FINANCING_PURPOSE" margin_width="150" tab_seq="72" margin_height="435" query_source="prj_bp_management_lv" query_bp_category_name="主承租人" parent_table="prj_bp_management" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_FINANCING_PURPOSE" tab_code="F_CAPITAL_REQUIREMENT" configurable="N"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1200" parent_table_tab_code="F_FINANCING_PURPOSE" root_tree_code="TENANT" base_table_pk="SEQ_ID" tree_code="FINANCING_PURPOSE" row_count="0" tab_desc="还款来源" navbar="true" base_table="prj_bp_management" tab_type="TEXTAREA" column_count="0" parent_base_table_pk="seq_id" show_box="Y" parent_tab_code="T_FINANCING_PURPOSE" margin_width="150" tab_seq="73" margin_height="435" query_source="prj_bp_management_lv" query_bp_category_name="主承租人" parent_table="prj_bp_management" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_FINANCING_PURPOSE" tab_code="F_REPAYING_SOURCE" configurable="N"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1200" parent_table_tab_code="F_FINANCING_PURPOSE" root_tree_code="TENANT" base_table_pk="SEQ_ID" tree_code="FINANCING_PURPOSE" row_count="0" tab_desc="未来投融资计划及资金来源" navbar="true" base_table="prj_bp_management" tab_type="TEXTAREA" column_count="0" parent_base_table_pk="seq_id" show_box="Y" parent_tab_code="T_FINANCING_PURPOSE" margin_width="150" tab_seq="74" margin_height="435" query_source="prj_bp_management_lv" query_bp_category_name="主承租人" parent_table="prj_bp_management" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_FINANCING_PURPOSE" tab_code="F_FUTURE_INVESTMENT" configurable="N"/>
                    <a:record tab_ref_screen="modules/prj/PRJ501N/prj_payment_cashflow_analysis.lview?project_id=${/parameter/@project_id}" fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_REPAY_CASH_FLOW" root_tree_code="TENANT" tree_code="REPAY_CASH_FLOW" row_count="0" tab_desc="还款现金流分析" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="50" tab_seq="80" margin_height="100" tab_group="80" query_bp_category_name="主承租人" label_width="120" enabled_flag="Y" parent_table_flag="N" query_bp_category="TENANT" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_REPAY_CASH_FLOW" tab_code="T_REPAY_CASH_FLOW" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_QUOTATION" root_tree_code="PRJ_LEASE_SCHME" tree_code="PRJ_LEASE_SCHME" row_count="0" tab_desc="租赁方案" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="110" margin_height="50" tab_group="100" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_QUOTATION" tab_code="T_QUOTATION" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_LEASE_SCHME" base_table_pk="QUOTATION_ID" tree_code="PRJ_LEASE_SCHME" row_count="0" tab_desc="报价方案" navbar="true" base_table="prj_quotation" tab_type="GRID" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_QUOTATION" margin_width="70" tab_seq="111" margin_height="350" query_source="prj_project_quotation_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.update_quotation_info_to_prj" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_QUOTATION" tab_code="G_QUOTATION" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="C_LEASEING_PLAN" root_tree_code="PRJ_LEASE_SCHME" tree_code="PRJ_LEASE_SCHME" row_count="0" tab_desc="租赁方案" navbar="true" tab_type="SWITCHCARD" column_count="0" show_box="Y" parent_tab_code="T_QUOTATION" margin_width="70" tab_seq="112" margin_height="50" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="C_LEASEING_PLAN" tab_code="C_LEASEING_PLAN" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_LEASE_SCHME" base_table_pk="QUOTATION_ID" tree_code="PRJ_LEASE_SCHME" row_count="4" tab_desc="直租租赁要素" navbar="true" base_table="prj_quotation" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="C_LEASEING_PLAN" margin_width="100" tab_seq="113" margin_height="0" query_source="prj_quotation_major_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" switchcard_value="PRJL" form_binder_tab_code="G_PRJ_LEASE" tab_code="G_PRJ_LEASE" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_LEASE_SCHME" base_table_pk="QUOTATION_ID" tree_code="PRJ_LEASE_SCHME" row_count="4" tab_desc="回租租赁要素" navbar="true" base_table="prj_quotation" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="C_LEASEING_PLAN" margin_width="100" tab_seq="114" margin_height="0" query_source="prj_quotation_major_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" switchcard_value="PRJLB" form_binder_tab_code="G_PRJ_LEASEBACK" tab_code="G_PRJ_LEASEBACK" configurable="Y"/>
                    <a:record fetchall="true" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="PRJ_LEASE_SCHME" base_table_pk="REPAYMENT_ID" tree_code="PRJ_LEASE_SCHME" row_count="0" tab_desc="投放信息" navbar="true" base_table="prj_project_repayment" tab_type="GRID" column_count="0" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_QUOTATION" margin_width="70" tab_seq="116" margin_height="350" query_source="prj_project_repayment_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_REPAYMENT" tab_code="G_REPAYMENT" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_LEASE_ITEM" root_tree_code="BASIC_INFO_LI" tree_code="BASIC_INFO_LI" row_count="0" tab_desc="租赁物信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="120" margin_height="50" tab_group="120" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_LEASE_ITEM" tab_code="T_LEASE_ITEM" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="BASIC_INFO_LI" base_table_pk="PROJECT_LEASE_ITEM_ID" tree_code="BASIC_INFO_LI" row_count="0" check_before_delete_bm="db.nanshan_prj_workflow_pkg.bp_delete_to_prj_project" tab_desc="租赁物信息" navbar="true" base_table="prj_project_lease_item" tab_type="GRID" column_count="4" parent_base_table_pk="project_id" show_box="N" parent_tab_code="T_LEASE_ITEM" margin_width="102" tab_seq="121" height="200" query_source="prj_project_lease_item_lv" ref_tab_code="F_LEASE_ITEM" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.prj_project_create_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_LEASE_ITEM" tab_code="G_LEASE_ITEM" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="BASIC_INFO_LI" base_table_pk="PROJECT_ID" tree_code="BASIC_INFO_LI" row_count="0" tab_desc="租赁物说明" navbar="true" base_table="prj_project" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="project_id" show_box="N" parent_tab_code="T_LEASE_ITEM" margin_width="106" tab_seq="122" margin_height="350" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="D_LEASE_ITEM" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_MORTGAGE" root_tree_code="MORTGAGE_INFO" tree_code="MORTGAGE_INFO" row_count="0" tab_desc="抵质押物" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="125" margin_height="50" tab_group="125" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_MORTGAGE" tab_code="T_MORTGAGE" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="MORTGAGE_INFO" base_table_pk="PRJ_MORTGAGE_ID" tree_code="MORTGAGE_INFO" row_count="6" navbar="true" base_table="prj_project_mortgage" tab_type="GRID" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_MORTGAGE" margin_width="102" tab_seq="126" margin_height="300" query_source="prj_project_mortgage_lv" ref_tab_code="G_MORTGAGE" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_MORTGAGE_07" tab_code="T_T_MORTGAGE_07" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="MORTGAGE_INFO" base_table_pk="PROJECT_ID" tree_code="MORTGAGE_INFO" row_count="1" tab_desc="备注" navbar="true" base_table="prj_project" tab_type="TEXTAREA" column_count="1" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_MORTGAGE" margin_width="106" tab_seq="127" margin_height="350" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="D_MORTGAGE" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_PRJ_MORTGAGE_INFO" root_tree_code="MORTGAGE_INFO" tree_code="MORTGAGE_INFO" row_count="0" tab_desc="支撑性文件" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="50" tab_seq="128" margin_height="50" tab_group="125" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_PRJ_MORTGAGE_INFO" tab_code="T_PRJ_MORTGAGE_INFO" configurable="Y"/>
                    <a:record fetchall="true" field_width="120" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="MORTGAGE_INFO" base_table_pk="DOC_REF_ID" tree_code="MORTGAGE_INFO" row_count="0" tab_desc="支持文件" navbar="true" base_table="prj_cdd_item_doc_ref" tab_type="ATTACH" column_count="0" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_PRJ_MORTGAGE_INFO" margin_width="60" tab_seq="129" margin_height="100" ref_tab_code="F_PRJ_BASIC_INFO" attachment_tab_group="283" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="D_PRJ_MORTGAGE_ATT" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_RISK_ANALYSIS" root_tree_code="RISK" tree_code="RISK" row_count="0" tab_desc="风险分析" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="130" margin_height="50" tab_group="130" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_RISK_ANALYSIS" tab_code="T_RISK_ANALYSIS" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="RISK" base_table_pk="PROJECT_ID" tree_code="RISK" row_count="1" tab_desc="风险分析" navbar="true" base_table="prj_project" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="N" parent_tab_code="T_RISK_ANALYSIS" margin_width="80" tab_seq="131" margin_height="0" query_source="prj_project_lv" parent_table="prj_project" label_width="150" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="F_RISK_ANALYSIS" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_SUMMARIZE_INFO" root_tree_code="SUMMARIZE" tree_code="SUMMARIZE" row_count="0" tab_desc="调查结论" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="140" margin_height="50" tab_group="140" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_SUMMARIZE_INFO" tab_code="T_SUMMARIZE_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="SUMMARIZE" base_table_pk="PROJECT_ID" tree_code="SUMMARIZE" row_count="1" tab_desc="调查结论" navbar="true" base_table="prj_project" tab_type="TEXTAREA" column_count="1" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_SUMMARIZE_INFO" margin_width="100" tab_seq="141" margin_height="220" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="F_SUMMARIZE_INFO" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_GUARANTEE" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="担保人" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="150" margin_height="50" tab_group="150" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_GUARANTEE" tab_code="T_GUARANTEE" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="GUARANTEE" base_table_pk="PROJECT_ID" tree_code="GUARANTEE_ORG" row_count="1" tab_desc="担保人信息" navbar="true" base_table="prj_project" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_GUARANTEE" margin_width="100" tab_seq="151" margin_height="0" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="G_GUARANTEE_BASIC" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_GUARANTEE_ORG" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="法人担保人" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE" margin_width="30" tab_seq="152" margin_height="0" tab_group="152" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_GUARANTEE_ORG" tab_code="T_GUARANTEE_ORG" configurable="Y" repeat_object="GUARANTOR"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_GUARANTEE_BASIC" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="基本信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="153" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_GUARANTEE_BASIC" tab_code="T_GUARANTEE_BASIC" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="GUARANTEE_ORG" row_count="12" navbar="true" base_table="prj_project_bp" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_GUARANTEE_BASIC" margin_width="100" tab_seq="154" margin_height="20" query_source="PRJ_PROJECT_BP_ORG_LV1" query_bp_category_name="担保人" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" check_after_save_bm="prj.PRJ501N.hls_bp_master_tenant_sec" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_GUARANTEE_BASIC" tab_code="F_GUARANTEE_BASIC" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_GUARANTEE_CONTACT" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="联系人信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="155" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_GUARANTEE_CONTACT" tab_code="T_GUARANTEE_CONTACT" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="CONTACT_INFO_ID" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="联系人信息" navbar="true" base_table="hls_bp_master_contact_info" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_GUARANTEE_CONTACT" margin_width="80" tab_seq="156" margin_height="320" query_source="prj_bp_master_contact_info_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="Y" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_contact_info_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_GUARANTEE_CONTACT_B" tab_code="G_GUARANTEE_CONTACT_B" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_GUARANTEE_ADD" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="地址信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="158" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_GUARANTEE_ADD" tab_code="T_GUARANTEE_ADD" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="ADDRESS_ID" tree_code="GUARANTEE_ORG" row_count="2" navbar="true" base_table="hls_bp_master_address" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_GUARANTEE_ADD" margin_width="80" tab_seq="159" margin_height="320" query_source="prj_bp_master_address_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="Y" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_address_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_GUARANTEE_ADD" tab_code="G_GUARANTEE_ADD" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_GUARANTEE_SHOCKHOLDER" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="股权信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="160" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_GUARANTEE_SHOCKHOLDER" tab_code="T_GUARANTEE_SHOCKHOLDER" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="STOCKHOLDER_ID" tree_code="GUARANTEE_ORG" row_count="0" navbar="true" base_table="hls_bp_master_stockholder" tab_type="GRID" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_GUARANTEE_SHOCKHOLDER" margin_width="80" tab_seq="161" margin_height="150" query_source="prj_bp_master_stockholder_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="Y" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_stockholder_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_GUARANTEE_SHOCKHOLDER" tab_code="G_GUARANTEE_SHOCKHOLDER" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_STUFF_DETAIL_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="管理人员" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="162" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_STUFF_DETAIL_G" tab_code="T_STUFF_DETAIL_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="MAJOR_INFO_ID" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="高管及主要联系人" navbar="true" base_table="hls_bp_master_major_info" tab_type="GRID" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_STUFF_DETAIL_G" margin_width="100" tab_seq="163" margin_height="200" query_source="prj_bp_master_major_info_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="Y" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_major_info_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_GUARANTEE_MANAGEMENT" tab_code="G_GUARANTEE_MANAGEMENT" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="G_GUARANTEE_MANAGEMENT" root_tree_code="GUARANTEE" base_table_pk="MEMBER_ID" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="高管及主要联系人家庭关系" navbar="true" base_table="hls_bp_master_member" tab_type="GRID" column_count="0" parent_base_table_pk="major_info_id" show_box="Y" parent_tab_code="T_STUFF_DETAIL_G" margin_width="100" tab_seq="164" margin_height="200" query_source="hls_bp_master_member_lv" parent_table="hls_bp_master_major_info" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="Y" parent_tab_code_flag="Y" check_after_save_bm="check_after_save_bm.hls_bp_master_member_check" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_GUARANTEE_MEMBER" tab_code="G_GUARANTEE_MEMBER" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="SEQ_ID" tree_code="GUARANTEE_ORG" row_count="2" tab_desc="人员结构" navbar="true" base_table="prj_bp_management" tab_type="FORM" column_count="5" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_STUFF_DETAIL_G" margin_width="100" tab_seq="165" margin_height="0" query_source="prj_bp_management_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="50" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_GUARANTEE_SEC" tab_code="F_GUARANTEE_SEC" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_EXTERNAL_INFO_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="资信信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="166" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_EXTERNAL_INFO_G" tab_code="T_EXTERNAL_INFO_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="EXTERNAL_ID" tree_code="GUARANTEE_ORG" row_count="1" tab_desc="贷款卡查询" navbar="true" base_table="prj_bp_external_info" tab_type="FORM" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_EXTERNAL_INFO_G" margin_width="120" tab_seq="167" margin_height="0" query_source="prj_bp_external_info_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_EXTERNAL_INFO_G" tab_code="F_EXTERNAL_INFO_G" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_BANK_LOAN_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="长短期银行借款 " navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_EXTERNAL_INFO_G" margin_width="100" tab_seq="168" margin_height="270" tab_group="170" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_BANK_LOAN_G" tab_code="T_BANK_LOAN_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="160" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="INFO_ID" tree_code="GUARANTEE_ORG" row_count="0" navbar="true" base_table="prj_bp_loan_info" tab_type="GRID" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_BANK_LOAN_G" margin_width="120" tab_seq="169" margin_height="320" query_source="prj_bp_loan_info_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_BANK_LOAN_G" tab_code="G_BANK_LOAN_G" configurable="N"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="INFO_ID" tree_code="GUARANTEE_ORG" row_count="0" navbar="true" base_table="prj_bp_financial_info" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_FINANCIAL_INFO_G" margin_width="120" tab_seq="170" margin_height="320" query_source="prj_bp_financial_info_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_FINANCILA_INFO_G" tab_code="G_FINANCILA_INFO_G" configurable="N"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_INVOICE_INFO_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="应付票据" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_EXTERNAL_INFO_G" margin_width="100" tab_seq="172" margin_height="270" tab_group="170" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_INVOICE_INFO_G" tab_code="T_INVOICE_INFO_G" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_FINANCIAL_INFO_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="其他机构融资情况" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_EXTERNAL_INFO_G" margin_width="100" tab_seq="172" margin_height="270" tab_group="170" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_FINANCIAL_INFO_G" tab_code="T_FINANCIAL_INFO_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="INFO_ID" tree_code="GUARANTEE_ORG" row_count="0" navbar="true" base_table="prj_bp_invoice_info" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_INVOICE_INFO_G" margin_width="120" tab_seq="173" margin_height="320" query_source="prj_bp_invoice_info_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="G_INVOICE_INFO_G" tab_code="G_INVOICE_INFO_G" configurable="N"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="T_MANAGE_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="经营信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="174" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_MANAGE_G" tab_code="T_MANAGE_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_SEC" root_tree_code="GUARANTEE" base_table_pk="SEQ_ID" tree_code="GUARANTEE_ORG" row_count="5" tab_desc="盈利模式及主营产品介绍" navbar="true" base_table="prj_bp_management" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="seq_id" show_box="Y" parent_tab_code="T_MANAGE_G" margin_width="100" tab_seq="175" margin_height="430" query_source="prj_bp_management_lv" parent_table="prj_bp_management" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_GUARANTEE_SEC" tab_code="F_PROFIT_MODEL_G" configurable="N"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="120" margin_top="3" box_width="1112" parent_table_tab_code="F_GUARANTEE_SEC" root_tree_code="GUARANTEE" base_table_pk="SEQ_ID" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="优劣势分析" navbar="true" base_table="prj_bp_management" tab_type="TEXTAREA" column_count="0" parent_base_table_pk="seq_id" show_box="Y" parent_tab_code="T_MANAGE_G" margin_width="100" tab_seq="176" margin_height="430" query_source="prj_bp_management_lv" parent_table="prj_bp_management" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_GUARANTEE_SEC" tab_code="F_SWOT_G" configurable="N"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_T_FIN_STATEMENT_G" root_tree_code="GUARANTEE" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="财务信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_GUARANTEE_ORG" margin_width="60" tab_seq="177" margin_height="30" tab_group="160" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_FIN_STATEMENT_G" tab_code="T_T_FIN_STATEMENT_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="GUARANTEE_ORG" row_count="1" tab_desc="财务报表信息" navbar="true" base_table="prj_project_bp" tab_type="FORM" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_FIN_STATEMENT_G" margin_width="100" tab_seq="178" margin_height="70" query_source="prj_project_bp_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_GUARANTEE_BASIC" tab_code="F_FIN_STATEMENT_G" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="GUARANTOR" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="F_GUARANTEE_BASIC" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="GUARANTEE_ORG" row_count="0" tab_desc="备注" navbar="true" base_table="prj_project_bp" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_FIN_STATEMENT_G" margin_width="106" tab_seq="180" height="90" query_source="prj_project_bp_lv" query_bp_category_name="担保人" parent_table="prj_project_bp" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_GUARANTEE_BASIC" tab_code="D_FIN_STATEMENT_G" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="T_ACT_CTRLER" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="自然人" navbar="true" tab_type="TAB" column_count="4" show_box="Y" margin_width="5" tab_seq="200" margin_height="50" tab_group="200" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_ACT_CTRLER" tab_code="T_ACT_CTRLER" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="GUARANTEE" base_table_pk="PROJECT_ID" tree_code="ACT_CTRLER" row_count="1" tab_desc="自然人" navbar="true" base_table="prj_project" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_ACT_CTRLER" margin_width="100" tab_seq="205" margin_height="0" query_source="prj_project_lv" parent_table="prj_project" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_PRJ_BASIC_INFO" tab_code="F_ACT_CTRLER" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="1112" parent_table_tab_code="T_ACT_CTRLER_A" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="自然人担保人" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_CTRLER" margin_width="30" tab_seq="210" margin_height="20" tab_group="210" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_ACT_CTRLER_A" tab_code="T_ACT_CTRLER_A" configurable="Y" repeat_object="ACTUAL_CONTROLLER"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="0" parent_table_tab_code="T_T_ACT_CTRLER" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="基本信息" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_CTRLER_A" margin_width="30" tab_seq="220" margin_height="100" tab_group="220" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_ACT_CTRLER" tab_code="T_T_ACT_CTRLER" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="F_PRJ_BASIC_INFO" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="ACT_CTRLER" row_count="4" tab_desc="1、本人信息" navbar="true" base_table="prj_project_act_ctrler_hd" tab_type="FORM" column_count="4" parent_base_table_pk="project_id" show_box="Y" parent_tab_code="T_T_ACT_CTRLER" margin_width="100" tab_seq="221" margin_height="0" query_source="prj_project_act_ctrler_hd_lv" query_bp_category_name="担保人" parent_table="prj_project" label_width="97" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_ACT_CTRLER_01" tab_code="F_ACT_CTRLER_01" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="ACT_CTRLER" row_count="5" tab_desc="2、配偶信息" navbar="true" base_table="prj_project_act_ctrler_hd" tab_type="FORM" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_ACT_CTRLER" margin_width="100" tab_seq="222" margin_height="0" query_source="prj_project_act_ctrler_hd_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="97" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_ACT_CTRLER_01" tab_code="F_ACT_CTRLER_02" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="T_ACT_ASSET" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="资产信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_ACT_CTRLER_A" margin_width="30" tab_seq="230" margin_height="100" tab_group="220" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_ACT_ASSET" tab_code="T_ACT_ASSET" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="T_T_PRJ_REAL_ESTATE" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="不动产" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_ASSET" margin_width="100" tab_seq="231" margin_height="250" tab_group="225" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_REAL_ESTATE" tab_code="T_T_PRJ_REAL_ESTATE" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="REAL_ESTATE_ID" tree_code="ACT_CTRLER" row_count="0" navbar="true" base_table="prj_real_estate" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_PRJ_REAL_ESTATE" margin_width="150" tab_seq="232" margin_height="320" query_source="prj_real_estate_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_T_PRJ_REAL_ESTATE" tab_code="T_T_T_PRJ_REAL_ESTATE" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="T_T_PRJ_PERSONAL_ESTATE" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="动产" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_ASSET" margin_width="100" tab_seq="233" margin_height="250" tab_group="225" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_PERSONAL_ESTATE" tab_code="T_T_PRJ_PERSONAL_ESTATE" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="PERSONAL_ESTATE_ID" tree_code="ACT_CTRLER" row_count="0" navbar="true" base_table="prj_personal_estate" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_PRJ_PERSONAL_ESTATE" margin_width="150" tab_seq="234" margin_height="320" query_source="prj_personal_estate_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_T_PRJ_PERSONAL_ESTATE" tab_code="T_T_T_PRJ_PERSONAL_ESTATE" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="T_T_PRJ_EQUITY" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="股权" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_ASSET" margin_width="100" tab_seq="235" margin_height="250" tab_group="225" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_EQUITY" tab_code="T_T_PRJ_EQUITY" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="EQUITY_ID" tree_code="ACT_CTRLER" row_count="0" navbar="true" base_table="prj_equity" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_PRJ_EQUITY" margin_width="150" tab_seq="236" margin_height="320" query_source="prj_equity_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_T_PRJ_EQUITY" tab_code="T_T_T_PRJ_EQUITY" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="T_T_PRJ_OTHER" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="其他个人资产" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_ASSET" margin_width="100" tab_seq="237" margin_height="250" tab_group="225" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_OTHER" tab_code="T_T_PRJ_OTHER" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="ACT_CTRLER" row_count="0" navbar="true" base_table="prj_project_act_ctrler_hd" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_PRJ_OTHER" margin_width="150" tab_seq="238" margin_height="320" query_source="prj_project_act_ctrler_hd_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_ACT_CTRLER_01" tab_code="T_T_T_PRJ_OTHER" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="T_ACT_CREDIT" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="信用信息" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_ACT_CTRLER_A" margin_width="30" tab_seq="240" margin_height="100" tab_group="220" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_ACT_CREDIT" tab_code="T_ACT_CREDIT" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="CREDIT_ID" tree_code="ACT_CTRLER" row_count="2" tab_desc="个人信用记录" navbar="true" base_table="prj_project_personal_credit" tab_type="FORM" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_ACT_CREDIT" margin_width="100" tab_seq="241" margin_height="0" query_source="prj_project_personal_credit_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="70" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_T_PRJ_PERSONAL_CREDI" tab_code="T_T_T_PRJ_PERSONAL_CREDI" configurable="Y"/>
                    <a:record fetchall="false" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="T_T_PRJ_PROJECT_CARD" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="贷记逾期情况" navbar="true" tab_type="TAB" column_count="4" show_box="Y" parent_tab_code="T_ACT_CREDIT" margin_width="100" tab_seq="242" margin_height="270" tab_group="235" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_PROJECT_CARD" tab_code="T_T_PRJ_PROJECT_CARD" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="LEND_ID" tree_code="ACT_CTRLER" row_count="0" navbar="true" base_table="prj_project_lend_card" tab_type="GRID" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_PRJ_PROJECT_CARD" margin_width="150" tab_seq="243" margin_height="320" query_source="prj_project_lend_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_PROJECT_C" tab_code="T_T_PRJ_PROJECT_C" configurable="Y"/>
                    <a:record fetchall="false" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="T_T_PRJ_CREDIT_CARD" root_tree_code="GUARANTEE" tree_code="ACT_CTRLER" row_count="0" tab_desc="贷记卡逾期情况" navbar="true" tab_type="TAB" column_count="0" show_box="Y" parent_tab_code="T_ACT_CREDIT" margin_width="100" tab_seq="244" margin_height="270" tab_group="235" label_width="120" enabled_flag="Y" parent_table_flag="N" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_PRJ_CREDIT_CARD" tab_code="T_T_PRJ_CREDIT_CARD" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="150" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="LEND_ID" tree_code="ACT_CTRLER" row_count="0" navbar="true" base_table="prj_project_lend_card" tab_type="GRID" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_T_PRJ_CREDIT_CARD" margin_width="150" tab_seq="245" margin_height="320" query_source="prj_project_card_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="Y" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="T_T_T_PRJ_PROJECT_CARD" tab_code="T_T_T_PRJ_PROJECT_CARD" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="120" margin_top="3" box_width="900" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="ACT_CTRLER" row_count="0" tab_desc="备注" navbar="true" base_table="prj_project_act_ctrler_hd" tab_type="TEXTAREA" column_count="0" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_ACT_CREDIT" margin_width="150" tab_seq="246" height="200" query_source="prj_project_act_ctrler_hd_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_ACT_CTRLER_01" tab_code="T_ACT_REMARK" configurable="Y"/>
                    <a:record fetchall="false" repeat_bindname_object="ACTUAL_CONTROLLER" field_width="600" margin_top="3" box_width="0" parent_table_tab_code="F_ACT_CTRLER_01" root_tree_code="GUARANTEE" base_table_pk="PRJ_BP_ID" tree_code="ACT_CTRLER" row_count="1" tab_desc="个人担保能力评价" navbar="true" base_table="prj_project_act_ctrler_hd" tab_type="TEXTAREA" column_count="4" parent_base_table_pk="prj_bp_id" show_box="Y" parent_tab_code="T_ACT_CREDIT" margin_width="100" tab_seq="247" height="150" query_source="prj_project_act_ctrler_hd_lv" query_bp_category_name="担保人" parent_table="prj_project_act_ctrler_hd" label_width="120" enabled_flag="Y" parent_table_flag="Y" query_bp_category="GUARANTOR" query_only="N" parent_tab_code_flag="N" layout_code="WCS_PROJECT_MODIFY" form_binder_tab_code="F_ACT_CTRLER_01" tab_code="F_ACT_GUAR_EXPLAIN" configurable="Y"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_lov_getmapping_ds"/>
            <a:dataSet id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="LOV" validation_sql="select v.project_id as value_code, v.project_name as value_name from prj_project v where v.project_status=&apos;APPROVED&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="project_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="200953" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="项目" tab_code="F_ACT_CTRLER"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="LINK" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="ref_v09" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="200954" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="自然人担保商业伙伴新增" tab_code="F_ACT_CTRLER"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="LINK" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="ref_v10" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="200955" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="增加担保人个数" tab_code="F_ACT_CTRLER"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet processfunction="WCS_PROJECT_MODIFY_F_ACT_CTRLER_temp_processfunction" id="temp_ds">
                <a:datas>
                    <a:record name="temp"/>
                </a:datas>
                <a:events>
                    <a:event handler="temp_add" name="add"/>
                </a:events>
                <a:fields>
                    <a:field autocomplete="false" title="项目" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="project_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="project_id"/>
                            <a:map from="value_name" to="project_id_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="自然人项目${l:HLS.NOT_NULL}" name="project_id"/>
                    <a:field required="false" readonly="true" requiredmessage="自然人自然人担保商业伙伴新增${l:HLS.NOT_NULL}" name="ref_v09"/>
                    <a:field required="false" readonly="true" requiredmessage="自然人增加担保人个数${l:HLS.NOT_NULL}" name="ref_v10"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[temp_create();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="LOV_D" validation_sql="select t1.bp_id value_code,
       t1.bp_code as value_code_display,
       t1.bp_name value_name,
       t1.extra_nam,
       &apos;GUARANTOR&apos; bp_category,
       (select bc.description
          from hls_bp_category bc
         where bc.bp_category = &apos;GUARANTOR&apos;) as bp_category_n,
       (select mr.bp_type
          from hls_bp_master_role mr
         where mr.bp_category = &apos;GUARANTOR&apos;
           and mr.bp_id = t1.bp_id
           and mr.enabled_flag = &apos;Y&apos;
           and rownum = 1) bp_type,
       t1.bp_class,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_BP_CLASS&apos;
           and v.code_value = t1.bp_class) as bp_class_n,
       t1.bp_code,
       t1.bp_title,
       t1.external_bp_code,
       t1.gender,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_GENDER&apos;
           and v.code_value = t1.gender) as gender_n,
       t1.nationality,
       to_char(t1.date_of_birth, &apos;YYYY-MM-DD&apos;) date_of_birth,
       t1.academic_background,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos;
           and v.code_value = t1.academic_background) as academic_background_n,
       t1.age,
       t1.id_type,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ID_TYPE&apos;
           and v.code_value = t1.id_type) as id_type_n,
       t1.id_card_no,
       t1.annual_income,
       t1.currency,
       (select cu.currency_name
          from gld_currency_vl cu
         where cu.currency_code = t1.currency) as currency_n,
       t1.legal_form,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_LEGAL_FORM&apos;
           and v.code_value = t1.legal_form) as legal_form_n,
       t1.industry,
       (select sc.description
          from hls_stat_class sc
         where sc.class_id = t1.industry) industry_n,
       t1.business_license_num,
       t1.corporate_code,
       t1.organization_code,
       t1.tax_registry_num,
       t1.registered_place,
       t1.founded_date,
       t1.registered_capital,
       t1.balance_sheet_currency,
       t1.company_nature,
       (select d.code_value_name
          from sys_code_values_v d
         where d.code = &apos;PRJ_NATURE_OF_BUSINESS&apos;
           and d.code_value = t1.company_nature) company_nature_n,
       t1.paid_up_capital,
       t1.main_products,
       t1.primary_business,
       bpa.country_id,
       bpa.country_name country_id_n,
       bpa.province_id,
       bpa.province_name province_id_n,
       bpa.city_id,
       bpa.city_name city_id_n,
       bpa.district_id,
       bpa.district_name district_id_n,
       bpa.street,
       bpa.address,
       t1.bp_name_sp,
       t1.gender_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_GENDER&apos;
           and v.code_value = t1.gender_sp) as gender_sp_n,
       to_char(t1.date_of_birth_sp, &apos;YYYY-MM-DD&apos;) date_of_birth_sp,
       t1.academic_background_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos;
           and v.code_value = t1.academic_background_sp) as academic_background_sp_n,
       t1.id_type_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ID_TYPE&apos;
           and v.code_value = t1.id_type_sp) as id_type_sp_n,
       t1.id_card_no_sp,
       t1.country_sp,
       (select fc.description
          from fnd_country fc
         where fc.country_id = t1.country_sp) country_sp_n,
       t1.province_sp,
       (select fp.description
          from fnd_province fp
         where fp.province_id = t1.province_sp) province_sp_n,
       t1.city_sp,
       (select fct.description
          from fnd_city fct
         where fct.city_id = t1.city_sp) city_sp_n,
       t1.district_sp,
       (select fd.description
          from fnd_district fd
         where fd.district_id = t1.district_sp) district_sp_n,
       t1.address_sp,
       t1.loan_card_num,
       t1.bp_name
  from hls_bp_master t1, hls_bp_master_address_v bpa
where t1.bp_id = bpa.bp_id(+)
   and bpa.address_type(+) = &apos;DOC_SENT_ADDRESS&apos;
   and t1.enabled_flag = &apos;Y&apos;
   and exists (select 1
          from hls_bp_master_role d
         where d.bp_id = t1.bp_id
            and t1.bp_type = &apos;GUTA_NP&apos;
           and d.bp_category in (&apos;GUARANTOR&apos;)
           and d.enabled_flag = &apos;Y&apos;)  and exists
        ( select 1
           from aut_trx_user_authorize a1, aut_owner_user_authorize a2
          where a1.trx_category = &apos;BP&apos;
            and a1.trx_id = t1.bp_id
            and trunc (sysdate) between a1.start_date and
                nvl(a1.end_date, trunc (sysdate))
            and a1.user_id = a2.owner_user_id
            and a1.trx_category = a2.trx_category
            and a2.authorized_user_id = ${/session/@user_id}
            and trunc (sysdate) between a2.start_date and
                nvl(a2.end_date, trunc (sysdate)))
" field_bak_flag="N" input_mode="REQUIRED" default_value_name="若有自然人担保请选择" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_id" lov_return_vcode="N" default_value="638" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200963" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="姓名" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_GENDER&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="gender" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200986" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="性别" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_of_birth" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200978" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出生日期" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos; and v.code_enabled_flag = &apos;Y&apos;and v.code_value_enabled_flag =&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="academic_background" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200956" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="学历" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ID_TYPE&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="id_type" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200990" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件类型" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="id_card_no" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200988" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件号码" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="LOV" validation_sql="select f.country_id as value_code, f.description as value_name from fnd_country f where f.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="country_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200971" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="国家" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="80" display_flag="Y" validation_type="LOV" validation_sql="select p.province_id as value_code, p.description as value_name FROM fnd_province p where p.country_id = ${@country_id} and p.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="province_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200995" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省份" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="80" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="province_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200996" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省份" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="90" display_flag="Y" validation_type="LOV" validation_sql="select p.city_id as value_code, p.description as value_name FROM fnd_city p where p.province_id = ${@province_id} and p.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="city_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200967" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="91" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="city_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200968" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="100" display_flag="Y" validation_type="LOV" validation_sql="select t1.district_id as value_code, t1.description as value_name from fnd_district t1 where t1.enabled_flag=&apos;Y&apos; and t1.city_id=${@city}" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="district_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200983" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="101" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="district_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200984" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="110" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200958" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="详细地址" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="140" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="industry_experience" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200992" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="行业经验（年）" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="150" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="stockholding_ratio" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201000" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="股东占比(%)" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="160" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_credit_info" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200976" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="查询时间" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="170" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="credit_info" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200974" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="征信查询信息" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="COMBOBOX" validation_sql="select bp_category as value_code,description as value_name from hls_bp_category t where enabled_flag = &apos;Y&apos; order by ref_n01" field_bak_flag="N" input_mode="OPTION" default_value_name="担保人" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_category" lov_return_vcode="N" default_value="GUARANTOR" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200960" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴类别4" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_BP_CLASS&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_class" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200961" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="承租人分类" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_code" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200962" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴编码" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="TEXTFIELD" validation_sql="select h.bp_type value_code, h.description value_name, h.bp_category from hls_bp_type h where h.enabled_flag = &apos;Y&apos; and h.bp_category = ${@bp_category}" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_type" lov_return_vcode="N" default_value="GUTA_NP" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200966" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴类型" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="contract_seq" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200970" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="合同关联序号" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="CHECKBOX" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="ref_v01" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200998" required_input_mode="FALSE" data_type="VARCHAR2" width="20" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="是否夫妻担保" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="ref_v02" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200999" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="用户字段字符2" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_name_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201004" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="(配偶)名称" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name  from sys_code_values_v v where v.code = &apos;HLS211_GENDER&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="gender_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201013" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="性别" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_of_birth_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201011" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出生日期" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="academic_background_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201002" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="学历" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ID_TYPE&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="id_type_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201015" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件类型" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="id_card_no_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201014" required_input_mode="FALSE" data_type="VARCHAR2" width="150" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件号码" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="LOV" validation_sql="select f.country_code as value_code,f.description as value_name from fnd_country f where f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="country_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201008" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="国家" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="80" display_flag="Y" validation_type="LOV" validation_sql="select f.province_id as value_code,f.description as value_name from fnd_province f where f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="province_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201017" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="90" display_flag="Y" validation_type="LOV" validation_sql="select f.city_id as value_id,f.description as value_name from fnd_city f where f.enabled_flag=&apos;Y&apos; and f.province_id=${@province_sp}" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="city_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201006" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="100" display_flag="Y" validation_type="LOV" validation_sql="select f.district_id as value_id,f.description as value_name from fnd_district f where f.city_id=${@city_sp} and f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="district_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201012" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="110" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201003" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="详细地址" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="120" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="industry_experience_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201016" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="行业经验（年）" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="130" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="stockholding_ratio_sp" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201018" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="股东占比（%）" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="140" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_credit_info_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201010" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="查询时间" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="150" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="credit_info_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201009" required_input_mode="FALSE" data_type="VARCHAR2" width="570" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="征信查询信息" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTAREA" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="description" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202162" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" tab_code="T_T_T_PRJ_OTHER"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTAREA" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="guar_explain" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="201019" required_input_mode="FALSE" data_type="VARCHAR2" width="700" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="个人担保能力评价" tab_code="F_ACT_GUAR_EXPLAIN"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_gender_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_academic_background_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_id_type_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_category_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_class_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_gender_sp_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_academic_background_sp_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_id_type_sp_combobox_ds"/>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd" fetchall="false" processfunction="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CON_FORM_PROCESSFUNCTION" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=F_ACT_CTRLER_01&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_act_ctrler_hd&amp;query_only=N&amp;tab_code=F_ACT_CTRLER_01&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project&amp;parent_base_table_pk=project_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED&apos;]" name="submitfailed"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field autocomplete="false" defaultvalue="若有自然人担保请选择" title="姓名" required="true" fetchsingle="false" readonly="false" lovservice="layout.server_parameters_lov_d" lovlabelwidth="100" name="bp_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="bp_id"/>
                            <a:map from="value_name" to="bp_id_n"/>
                            <a:map from="value_code_display" to="value_code_display"/>
                            <a:map from="bp_code" to="bp_code"/>
                            <a:map from="extra_nam" to="extra_nam"/>
                            <a:map from="bp_category" to="bp_category"/>
                            <a:map from="bp_category_n" to="bp_category_n"/>
                            <a:map from="bp_type" to="bp_type"/>
                            <a:map from="bp_class" to="bp_class"/>
                            <a:map from="bp_class_n" to="bp_class_n"/>
                            <a:map from="bp_title" to="bp_title"/>
                            <a:map from="external_bp_code" to="external_bp_code"/>
                            <a:map from="gender" to="gender"/>
                            <a:map from="gender_n" to="gender_n"/>
                            <a:map from="nationality" to="nationality"/>
                            <a:map from="date_of_birth" to="date_of_birth"/>
                            <a:map from="academic_background" to="academic_background"/>
                            <a:map from="academic_background_n" to="academic_background_n"/>
                            <a:map from="age" to="age"/>
                            <a:map from="id_type" to="id_type"/>
                            <a:map from="id_type_n" to="id_type_n"/>
                            <a:map from="id_card_no" to="id_card_no"/>
                            <a:map from="annual_income" to="annual_income"/>
                            <a:map from="currency" to="currency"/>
                            <a:map from="currency_n" to="currency_n"/>
                            <a:map from="legal_form" to="legal_form"/>
                            <a:map from="legal_form_n" to="legal_form_n"/>
                            <a:map from="industry" to="industry"/>
                            <a:map from="industry_n" to="industry_n"/>
                            <a:map from="business_license_num" to="business_license_num"/>
                            <a:map from="corporate_code" to="corporate_code"/>
                            <a:map from="organization_code" to="organization_code"/>
                            <a:map from="tax_registry_num" to="tax_registry_num"/>
                            <a:map from="registered_place" to="registered_place"/>
                            <a:map from="founded_date" to="founded_date"/>
                            <a:map from="registered_capital" to="registered_capital"/>
                            <a:map from="balance_sheet_currency" to="balance_sheet_currency"/>
                            <a:map from="company_nature" to="company_nature"/>
                            <a:map from="company_nature_n" to="company_nature_n"/>
                            <a:map from="paid_up_capital" to="paid_up_capital"/>
                            <a:map from="main_products" to="main_products"/>
                            <a:map from="primary_business" to="primary_business"/>
                            <a:map from="country_id" to="country_id"/>
                            <a:map from="country_id_n" to="country_id_n"/>
                            <a:map from="province_id" to="province_id"/>
                            <a:map from="province_id_n" to="province_id_n"/>
                            <a:map from="city_id" to="city_id"/>
                            <a:map from="city_id_n" to="city_id_n"/>
                            <a:map from="district_id" to="district_id"/>
                            <a:map from="district_id_n" to="district_id_n"/>
                            <a:map from="street" to="street"/>
                            <a:map from="address" to="address"/>
                            <a:map from="bp_name_sp" to="bp_name_sp"/>
                            <a:map from="gender_sp" to="gender_sp"/>
                            <a:map from="gender_sp_n" to="gender_sp_n"/>
                            <a:map from="date_of_birth_sp" to="date_of_birth_sp"/>
                            <a:map from="academic_background_sp" to="academic_background_sp"/>
                            <a:map from="academic_background_sp_n" to="academic_background_sp_n"/>
                            <a:map from="id_type_sp" to="id_type_sp"/>
                            <a:map from="id_type_sp_n" to="id_type_sp_n"/>
                            <a:map from="id_card_no_sp" to="id_card_no_sp"/>
                            <a:map from="country_sp" to="country_sp"/>
                            <a:map from="country_sp_n" to="country_sp_n"/>
                            <a:map from="province_sp" to="province_sp"/>
                            <a:map from="province_sp_n" to="province_sp_n"/>
                            <a:map from="city_sp" to="city_sp"/>
                            <a:map from="city_sp_n" to="city_sp_n"/>
                            <a:map from="district_sp" to="district_sp"/>
                            <a:map from="district_sp_n" to="district_sp_n"/>
                            <a:map from="address_sp" to="address_sp"/>
                            <a:map from="loan_card_num" to="loan_card_num"/>
                            <a:map from="bp_name" to="bp_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field defaultvalue="638" required="true" readonly="false" requiredmessage="1、本人信息姓名${l:HLS.NOT_NULL}" name="bp_id"/>
                    <a:field valuefield="value_code" returnfield="gender" required="false" readonly="true" name="gender_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_gender_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息性别${l:HLS.NOT_NULL}" name="gender"/>
                    <a:field required="false" readonly="true" datatype="java.util.Date" requiredmessage="1、本人信息出生日期${l:HLS.NOT_NULL}" name="date_of_birth"/>
                    <a:field valuefield="value_code" returnfield="academic_background" required="false" readonly="true" name="academic_background_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_academic_background_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息学历${l:HLS.NOT_NULL}" name="academic_background"/>
                    <a:field valuefield="value_code" returnfield="id_type" required="false" readonly="true" name="id_type_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_id_type_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息证件类型${l:HLS.NOT_NULL}" name="id_type"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息证件号码${l:HLS.NOT_NULL}" name="id_card_no"/>
                    <a:field autocomplete="false" title="国家" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="country_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="country_id"/>
                            <a:map from="value_name" to="country_id_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息国家${l:HLS.NOT_NULL}" name="country_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息省份${l:HLS.NOT_NULL}" name="province_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息省份${l:HLS.NOT_NULL}" name="province_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息市${l:HLS.NOT_NULL}" name="city_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息市${l:HLS.NOT_NULL}" name="city_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息区/县${l:HLS.NOT_NULL}" name="district_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息区/县${l:HLS.NOT_NULL}" name="district_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息详细地址${l:HLS.NOT_NULL}" name="address"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息行业经验（年）${l:HLS.NOT_NULL}" name="industry_experience"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息股东占比(%)${l:HLS.NOT_NULL}" name="stockholding_ratio"/>
                    <a:field required="false" readonly="false" datatype="java.util.Date" requiredmessage="1、本人信息查询时间${l:HLS.NOT_NULL}" name="date_credit_info"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息征信查询信息${l:HLS.NOT_NULL}" name="credit_info"/>
                    <a:field valuefield="value_code" defaultvalue="担保人" returnfield="bp_category" required="false" readonly="false" name="bp_category_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_category_combobox_ds" displayfield="value_name"/>
                    <a:field defaultvalue="GUARANTOR" required="false" readonly="false" requiredmessage="1、本人信息商业伙伴类别4${l:HLS.NOT_NULL}" name="bp_category"/>
                    <a:field valuefield="value_code" returnfield="bp_class" required="false" readonly="false" name="bp_class_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_class_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息承租人分类${l:HLS.NOT_NULL}" name="bp_class"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息商业伙伴编码${l:HLS.NOT_NULL}" name="bp_code"/>
                    <a:field defaultvalue="GUTA_NP" required="false" readonly="false" requiredmessage="1、本人信息商业伙伴类型${l:HLS.NOT_NULL}" name="bp_type"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息合同关联序号${l:HLS.NOT_NULL}" name="contract_seq"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息是否夫妻担保${l:HLS.NOT_NULL}" name="ref_v01" uncheckedvalue="N" checkedvalue="Y"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息用户字段字符2${l:HLS.NOT_NULL}" name="ref_v02"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息(配偶)名称${l:HLS.NOT_NULL}" name="bp_name_sp"/>
                    <a:field valuefield="value_code" returnfield="gender_sp" required="false" readonly="true" name="gender_sp_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_gender_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息性别${l:HLS.NOT_NULL}" name="gender_sp"/>
                    <a:field required="false" readonly="true" datatype="java.util.Date" requiredmessage="2、配偶信息出生日期${l:HLS.NOT_NULL}" name="date_of_birth_sp"/>
                    <a:field valuefield="value_code" returnfield="academic_background_sp" required="false" readonly="true" name="academic_background_sp_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_academic_background_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息学历${l:HLS.NOT_NULL}" name="academic_background_sp"/>
                    <a:field valuefield="value_code" returnfield="id_type_sp" required="false" readonly="true" name="id_type_sp_n" options="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_id_type_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息证件类型${l:HLS.NOT_NULL}" name="id_type_sp"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息证件号码${l:HLS.NOT_NULL}" name="id_card_no_sp"/>
                    <a:field autocomplete="false" title="国家" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="country_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="country_sp"/>
                            <a:map from="value_name" to="country_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息国家${l:HLS.NOT_NULL}" name="country_sp"/>
                    <a:field autocomplete="false" title="省" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="province_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="province_sp"/>
                            <a:map from="value_name" to="province_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息省${l:HLS.NOT_NULL}" name="province_sp"/>
                    <a:field autocomplete="false" title="市" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="city_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="city_sp"/>
                            <a:map from="value_name" to="city_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息市${l:HLS.NOT_NULL}" name="city_sp"/>
                    <a:field autocomplete="false" title="区/县" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="district_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="district_sp"/>
                            <a:map from="value_name" to="district_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息区/县${l:HLS.NOT_NULL}" name="district_sp"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息详细地址${l:HLS.NOT_NULL}" name="address_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息行业经验（年）${l:HLS.NOT_NULL}" name="industry_experience_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息股东占比（%）${l:HLS.NOT_NULL}" name="stockholding_ratio_sp"/>
                    <a:field required="false" readonly="false" datatype="java.util.Date" requiredmessage="2、配偶信息查询时间${l:HLS.NOT_NULL}" name="date_credit_info_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息征信查询信息${l:HLS.NOT_NULL}" name="credit_info_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="null${l:HLS.NOT_NULL}" name="description"/>
                    <a:field required="false" readonly="false" requiredmessage="个人担保能力评价个人担保能力评价${l:HLS.NOT_NULL}" name="guar_explain"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202212" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="不动产序号" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address_house_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202205" required_input_mode="TRUE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="房产地址及门牌号" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="total_buy_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202213" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="购买总价" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="buy_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202206" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="购买日期" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="payment_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202207" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="已付金额" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="pledge_rent_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202208" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无抵押/出租" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="property_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202210" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无产权证 " tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_combobox_ds"/>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate" fetchall="false" selectable="true" processfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_REAL_ESTATE&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_real_estate&amp;query_only=N&amp;tab_code=T_T_T_PRJ_REAL_ESTATE&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="不动产序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="房产地址及门牌号${l:HLS.NOT_NULL}" name="address_house_number"/>
                    <a:field required="true" readonly="false" requiredmessage="购买总价${l:HLS.NOT_NULL}" name="total_buy_amount"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="购买日期${l:HLS.NOT_NULL}" name="buy_date"/>
                    <a:field required="true" readonly="false" requiredmessage="已付金额${l:HLS.NOT_NULL}" name="payment_amount"/>
                    <a:field valuefield="value_code" returnfield="pledge_rent_flag" required="true" readonly="false" name="pledge_rent_flag_n" options="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无抵押/出租${l:HLS.NOT_NULL}" name="pledge_rent_flag"/>
                    <a:field valuefield="value_code" returnfield="property_flag" required="true" readonly="false" name="property_flag_n" options="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无产权证 ${l:HLS.NOT_NULL}" name="property_flag"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202199" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="动产序号" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="personal_estate_name" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202195" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="名称" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="total_buy_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202200" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="购买总价" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="buy_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202192" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="购买日期" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="payment_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202193" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="已付金额" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="pledge_rent_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202196" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无抵押/出租" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="property_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202198" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无产权证 " tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_combobox_ds"/>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate" fetchall="false" selectable="true" processfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PERSONAL_ESTATE&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_personal_estate&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PERSONAL_ESTATE&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="动产序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="名称${l:HLS.NOT_NULL}" name="personal_estate_name"/>
                    <a:field required="true" readonly="false" requiredmessage="购买总价${l:HLS.NOT_NULL}" name="total_buy_amount"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="购买日期${l:HLS.NOT_NULL}" name="buy_date"/>
                    <a:field required="true" readonly="false" requiredmessage="已付金额${l:HLS.NOT_NULL}" name="payment_amount"/>
                    <a:field valuefield="value_code" returnfield="pledge_rent_flag" required="true" readonly="false" name="pledge_rent_flag_n" options="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无抵押/出租${l:HLS.NOT_NULL}" name="pledge_rent_flag"/>
                    <a:field valuefield="value_code" returnfield="property_flag" required="true" readonly="false" name="property_flag_n" options="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无产权证 ${l:HLS.NOT_NULL}" name="property_flag"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202158" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="序号" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="company_name" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202150" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="被投资企业名称" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="registered_fund" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" query_only="N" config_id="202157" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="注册资金" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="invest_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202153" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="投资日期" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="ratio_investments" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202156" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出资比例" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HLS_STOCKHOLDING_TYPE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="physical_cash_inver" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202154" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="实物/现金出资" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="duty" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202151" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="所任职务" tab_code="T_T_T_PRJ_EQUITY"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_combobox_ds"/>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity" fetchall="false" selectable="true" processfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_EQUITY&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_equity&amp;query_only=N&amp;tab_code=T_T_T_PRJ_EQUITY&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="被投资企业名称${l:HLS.NOT_NULL}" name="company_name"/>
                    <a:field required="true" readonly="false" requiredmessage="注册资金${l:HLS.NOT_NULL}" name="registered_fund"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="投资日期${l:HLS.NOT_NULL}" name="invest_date"/>
                    <a:field required="true" readonly="false" requiredmessage="出资比例${l:HLS.NOT_NULL}" name="ratio_investments"/>
                    <a:field valuefield="value_code" returnfield="physical_cash_inver" required="true" readonly="false" name="physical_cash_inver_n" options="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="实物/现金出资${l:HLS.NOT_NULL}" name="physical_cash_inver"/>
                    <a:field required="true" readonly="false" requiredmessage="所任职务${l:HLS.NOT_NULL}" name="duty"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="contract_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202185" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="合同总额" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="descriptions" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202187" required_input_mode="FALSE" data_type="VARCHAR2" width="800" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="说明" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="lending_account" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202188" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="笔数" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="lending_org_count" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202189" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="贷款法人机构数" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="outstanding_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202190" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="余额" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit" fetchall="false" processfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CON_FORM_PROCESSFUNCTION" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PERSONAL_CREDI&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_personal_credit&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PERSONAL_CREDI&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED&apos;]" name="submitfailed"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录合同总额${l:HLS.NOT_NULL}" name="contract_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录说明${l:HLS.NOT_NULL}" name="descriptions"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录笔数${l:HLS.NOT_NULL}" name="lending_account"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录贷款法人机构数${l:HLS.NOT_NULL}" name="lending_org_count"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录余额${l:HLS.NOT_NULL}" name="outstanding_amount"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="5" display_flag="N" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="lend_type" lov_return_vcode="N" default_value="LEND" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202149" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="类型" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_counts" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202146" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="笔数" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="TRUE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_delay_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202147" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="单月逾期最高额" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="30" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_delay_month" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202148" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="最长逾期月数" tab_code="T_T_PRJ_PROJECT_C"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card" fetchall="false" selectable="true" processfunction="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_PRJ_PROJECT_C&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_lend_card&amp;query_only=N&amp;tab_code=T_T_PRJ_PROJECT_C&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field defaultvalue="LEND" required="false" readonly="true" requiredmessage="类型${l:HLS.NOT_NULL}" name="lend_type"/>
                    <a:field required="false" readonly="false" requiredmessage="笔数${l:HLS.NOT_NULL}" name="lend_counts"/>
                    <a:field required="false" readonly="false" requiredmessage="单月逾期最高额${l:HLS.NOT_NULL}" name="lend_delay_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="最长逾期月数${l:HLS.NOT_NULL}" name="lend_delay_month"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds"/>
            <a:dataSet id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="N" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="lend_type" lov_return_vcode="N" default_value="CARD" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202204" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="类型" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_accounts" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202201" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="笔数" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="TRUE" system_flag="N" underline="N" precision="2" display_order="30" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_delay_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202202" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="单月逾期最高额" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="40" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_delay_month" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202203" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="最长逾期月数" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card" fetchall="false" selectable="true" processfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PROJECT_CARD&amp;bp_seq=1&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_lend_card&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PROJECT_CARD&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field defaultvalue="CARD" required="false" readonly="true" requiredmessage="类型${l:HLS.NOT_NULL}" name="lend_type"/>
                    <a:field required="false" readonly="false" requiredmessage="笔数${l:HLS.NOT_NULL}" name="card_accounts"/>
                    <a:field required="false" readonly="false" requiredmessage="单月逾期最高额${l:HLS.NOT_NULL}" name="card_delay_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="最长逾期月数${l:HLS.NOT_NULL}" name="card_delay_month"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_T_ACT_REMARK_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="LOV_D" validation_sql="select t1.bp_id value_code,
       t1.bp_code as value_code_display,
       t1.bp_name value_name,
       t1.extra_nam,
       &apos;GUARANTOR&apos; bp_category,
       (select bc.description
          from hls_bp_category bc
         where bc.bp_category = &apos;GUARANTOR&apos;) as bp_category_n,
       (select mr.bp_type
          from hls_bp_master_role mr
         where mr.bp_category = &apos;GUARANTOR&apos;
           and mr.bp_id = t1.bp_id
           and mr.enabled_flag = &apos;Y&apos;
           and rownum = 1) bp_type,
       t1.bp_class,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_BP_CLASS&apos;
           and v.code_value = t1.bp_class) as bp_class_n,
       t1.bp_code,
       t1.bp_title,
       t1.external_bp_code,
       t1.gender,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_GENDER&apos;
           and v.code_value = t1.gender) as gender_n,
       t1.nationality,
       to_char(t1.date_of_birth, &apos;YYYY-MM-DD&apos;) date_of_birth,
       t1.academic_background,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos;
           and v.code_value = t1.academic_background) as academic_background_n,
       t1.age,
       t1.id_type,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ID_TYPE&apos;
           and v.code_value = t1.id_type) as id_type_n,
       t1.id_card_no,
       t1.annual_income,
       t1.currency,
       (select cu.currency_name
          from gld_currency_vl cu
         where cu.currency_code = t1.currency) as currency_n,
       t1.legal_form,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_LEGAL_FORM&apos;
           and v.code_value = t1.legal_form) as legal_form_n,
       t1.industry,
       (select sc.description
          from hls_stat_class sc
         where sc.class_id = t1.industry) industry_n,
       t1.business_license_num,
       t1.corporate_code,
       t1.organization_code,
       t1.tax_registry_num,
       t1.registered_place,
       t1.founded_date,
       t1.registered_capital,
       t1.balance_sheet_currency,
       t1.company_nature,
       (select d.code_value_name
          from sys_code_values_v d
         where d.code = &apos;PRJ_NATURE_OF_BUSINESS&apos;
           and d.code_value = t1.company_nature) company_nature_n,
       t1.paid_up_capital,
       t1.main_products,
       t1.primary_business,
       bpa.country_id,
       bpa.country_name country_id_n,
       bpa.province_id,
       bpa.province_name province_id_n,
       bpa.city_id,
       bpa.city_name city_id_n,
       bpa.district_id,
       bpa.district_name district_id_n,
       bpa.street,
       bpa.address,
       t1.bp_name_sp,
       t1.gender_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_GENDER&apos;
           and v.code_value = t1.gender_sp) as gender_sp_n,
       to_char(t1.date_of_birth_sp, &apos;YYYY-MM-DD&apos;) date_of_birth_sp,
       t1.academic_background_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos;
           and v.code_value = t1.academic_background_sp) as academic_background_sp_n,
       t1.id_type_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ID_TYPE&apos;
           and v.code_value = t1.id_type_sp) as id_type_sp_n,
       t1.id_card_no_sp,
       t1.country_sp,
       (select fc.description
          from fnd_country fc
         where fc.country_id = t1.country_sp) country_sp_n,
       t1.province_sp,
       (select fp.description
          from fnd_province fp
         where fp.province_id = t1.province_sp) province_sp_n,
       t1.city_sp,
       (select fct.description
          from fnd_city fct
         where fct.city_id = t1.city_sp) city_sp_n,
       t1.district_sp,
       (select fd.description
          from fnd_district fd
         where fd.district_id = t1.district_sp) district_sp_n,
       t1.address_sp,
       t1.loan_card_num,
       t1.bp_name
  from hls_bp_master t1, hls_bp_master_address_v bpa
where t1.bp_id = bpa.bp_id(+)
   and bpa.address_type(+) = &apos;DOC_SENT_ADDRESS&apos;
   and t1.enabled_flag = &apos;Y&apos;
   and exists (select 1
          from hls_bp_master_role d
         where d.bp_id = t1.bp_id
            and t1.bp_type = &apos;GUTA_NP&apos;
           and d.bp_category in (&apos;GUARANTOR&apos;)
           and d.enabled_flag = &apos;Y&apos;)  and exists
        ( select 1
           from aut_trx_user_authorize a1, aut_owner_user_authorize a2
          where a1.trx_category = &apos;BP&apos;
            and a1.trx_id = t1.bp_id
            and trunc (sysdate) between a1.start_date and
                nvl(a1.end_date, trunc (sysdate))
            and a1.user_id = a2.owner_user_id
            and a1.trx_category = a2.trx_category
            and a2.authorized_user_id = ${/session/@user_id}
            and trunc (sysdate) between a2.start_date and
                nvl(a2.end_date, trunc (sysdate)))
" field_bak_flag="N" input_mode="REQUIRED" default_value_name="若有自然人担保请选择" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_id" lov_return_vcode="N" default_value="638" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200963" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="姓名" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_GENDER&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="gender" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200986" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="性别" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_of_birth" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200978" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出生日期" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos; and v.code_enabled_flag = &apos;Y&apos;and v.code_value_enabled_flag =&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="academic_background" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200956" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="学历" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ID_TYPE&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="id_type" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200990" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件类型" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="id_card_no" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200988" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件号码" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="LOV" validation_sql="select f.country_id as value_code, f.description as value_name from fnd_country f where f.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="country_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200971" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="国家" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="80" display_flag="Y" validation_type="LOV" validation_sql="select p.province_id as value_code, p.description as value_name FROM fnd_province p where p.country_id = ${@country_id} and p.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="province_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200995" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省份" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="80" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="province_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200996" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省份" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="90" display_flag="Y" validation_type="LOV" validation_sql="select p.city_id as value_code, p.description as value_name FROM fnd_city p where p.province_id = ${@province_id} and p.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="city_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200967" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="91" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="city_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200968" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="100" display_flag="Y" validation_type="LOV" validation_sql="select t1.district_id as value_code, t1.description as value_name from fnd_district t1 where t1.enabled_flag=&apos;Y&apos; and t1.city_id=${@city}" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="district_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200983" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="101" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="district_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200984" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="110" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200958" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="详细地址" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="140" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="industry_experience" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200992" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="行业经验（年）" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="150" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="stockholding_ratio" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201000" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="股东占比(%)" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="160" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_credit_info" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200976" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="查询时间" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="170" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="credit_info" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200974" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="征信查询信息" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="COMBOBOX" validation_sql="select bp_category as value_code,description as value_name from hls_bp_category t where enabled_flag = &apos;Y&apos; order by ref_n01" field_bak_flag="N" input_mode="OPTION" default_value_name="担保人" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_category" lov_return_vcode="N" default_value="GUARANTOR" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200960" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴类别4" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_BP_CLASS&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_class" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200961" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="承租人分类" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_code" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200962" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴编码" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="TEXTFIELD" validation_sql="select h.bp_type value_code, h.description value_name, h.bp_category from hls_bp_type h where h.enabled_flag = &apos;Y&apos; and h.bp_category = ${@bp_category}" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_type" lov_return_vcode="N" default_value="GUTA_NP" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200966" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴类型" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="contract_seq" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200970" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="合同关联序号" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="CHECKBOX" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="ref_v01" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200998" required_input_mode="FALSE" data_type="VARCHAR2" width="20" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="是否夫妻担保" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="ref_v02" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200999" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="用户字段字符2" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_name_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201004" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="(配偶)名称" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name  from sys_code_values_v v where v.code = &apos;HLS211_GENDER&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="gender_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201013" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="性别" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_of_birth_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201011" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出生日期" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="academic_background_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201002" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="学历" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ID_TYPE&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="id_type_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201015" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件类型" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="id_card_no_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201014" required_input_mode="FALSE" data_type="VARCHAR2" width="150" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件号码" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="LOV" validation_sql="select f.country_code as value_code,f.description as value_name from fnd_country f where f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="country_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201008" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="国家" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="80" display_flag="Y" validation_type="LOV" validation_sql="select f.province_id as value_code,f.description as value_name from fnd_province f where f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="province_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201017" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="90" display_flag="Y" validation_type="LOV" validation_sql="select f.city_id as value_id,f.description as value_name from fnd_city f where f.enabled_flag=&apos;Y&apos; and f.province_id=${@province_sp}" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="city_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201006" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="100" display_flag="Y" validation_type="LOV" validation_sql="select f.district_id as value_id,f.description as value_name from fnd_district f where f.city_id=${@city_sp} and f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="district_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201012" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="110" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201003" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="详细地址" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="120" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="industry_experience_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201016" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="行业经验（年）" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="130" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="stockholding_ratio_sp" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201018" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="股东占比（%）" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="140" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_credit_info_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201010" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="查询时间" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="150" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="credit_info_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201009" required_input_mode="FALSE" data_type="VARCHAR2" width="570" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="征信查询信息" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTAREA" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="description" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202162" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" tab_code="T_T_T_PRJ_OTHER"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTAREA" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="guar_explain" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="201019" required_input_mode="FALSE" data_type="VARCHAR2" width="700" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="个人担保能力评价" tab_code="F_ACT_GUAR_EXPLAIN"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_gender_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_academic_background_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_id_type_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_category_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_class_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_gender_sp_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_academic_background_sp_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_id_type_sp_combobox_ds"/>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd" fetchall="false" processfunction="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CON_FORM_PROCESSFUNCTION" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=F_ACT_CTRLER_01&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_act_ctrler_hd&amp;query_only=N&amp;tab_code=F_ACT_CTRLER_01&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project&amp;parent_base_table_pk=project_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED&apos;]" name="submitfailed"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field autocomplete="false" defaultvalue="若有自然人担保请选择" title="姓名" required="true" fetchsingle="false" readonly="false" lovservice="layout.server_parameters_lov_d" lovlabelwidth="100" name="bp_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="bp_id"/>
                            <a:map from="value_name" to="bp_id_n"/>
                            <a:map from="value_code_display" to="value_code_display"/>
                            <a:map from="bp_code" to="bp_code"/>
                            <a:map from="extra_nam" to="extra_nam"/>
                            <a:map from="bp_category" to="bp_category"/>
                            <a:map from="bp_category_n" to="bp_category_n"/>
                            <a:map from="bp_type" to="bp_type"/>
                            <a:map from="bp_class" to="bp_class"/>
                            <a:map from="bp_class_n" to="bp_class_n"/>
                            <a:map from="bp_title" to="bp_title"/>
                            <a:map from="external_bp_code" to="external_bp_code"/>
                            <a:map from="gender" to="gender"/>
                            <a:map from="gender_n" to="gender_n"/>
                            <a:map from="nationality" to="nationality"/>
                            <a:map from="date_of_birth" to="date_of_birth"/>
                            <a:map from="academic_background" to="academic_background"/>
                            <a:map from="academic_background_n" to="academic_background_n"/>
                            <a:map from="age" to="age"/>
                            <a:map from="id_type" to="id_type"/>
                            <a:map from="id_type_n" to="id_type_n"/>
                            <a:map from="id_card_no" to="id_card_no"/>
                            <a:map from="annual_income" to="annual_income"/>
                            <a:map from="currency" to="currency"/>
                            <a:map from="currency_n" to="currency_n"/>
                            <a:map from="legal_form" to="legal_form"/>
                            <a:map from="legal_form_n" to="legal_form_n"/>
                            <a:map from="industry" to="industry"/>
                            <a:map from="industry_n" to="industry_n"/>
                            <a:map from="business_license_num" to="business_license_num"/>
                            <a:map from="corporate_code" to="corporate_code"/>
                            <a:map from="organization_code" to="organization_code"/>
                            <a:map from="tax_registry_num" to="tax_registry_num"/>
                            <a:map from="registered_place" to="registered_place"/>
                            <a:map from="founded_date" to="founded_date"/>
                            <a:map from="registered_capital" to="registered_capital"/>
                            <a:map from="balance_sheet_currency" to="balance_sheet_currency"/>
                            <a:map from="company_nature" to="company_nature"/>
                            <a:map from="company_nature_n" to="company_nature_n"/>
                            <a:map from="paid_up_capital" to="paid_up_capital"/>
                            <a:map from="main_products" to="main_products"/>
                            <a:map from="primary_business" to="primary_business"/>
                            <a:map from="country_id" to="country_id"/>
                            <a:map from="country_id_n" to="country_id_n"/>
                            <a:map from="province_id" to="province_id"/>
                            <a:map from="province_id_n" to="province_id_n"/>
                            <a:map from="city_id" to="city_id"/>
                            <a:map from="city_id_n" to="city_id_n"/>
                            <a:map from="district_id" to="district_id"/>
                            <a:map from="district_id_n" to="district_id_n"/>
                            <a:map from="street" to="street"/>
                            <a:map from="address" to="address"/>
                            <a:map from="bp_name_sp" to="bp_name_sp"/>
                            <a:map from="gender_sp" to="gender_sp"/>
                            <a:map from="gender_sp_n" to="gender_sp_n"/>
                            <a:map from="date_of_birth_sp" to="date_of_birth_sp"/>
                            <a:map from="academic_background_sp" to="academic_background_sp"/>
                            <a:map from="academic_background_sp_n" to="academic_background_sp_n"/>
                            <a:map from="id_type_sp" to="id_type_sp"/>
                            <a:map from="id_type_sp_n" to="id_type_sp_n"/>
                            <a:map from="id_card_no_sp" to="id_card_no_sp"/>
                            <a:map from="country_sp" to="country_sp"/>
                            <a:map from="country_sp_n" to="country_sp_n"/>
                            <a:map from="province_sp" to="province_sp"/>
                            <a:map from="province_sp_n" to="province_sp_n"/>
                            <a:map from="city_sp" to="city_sp"/>
                            <a:map from="city_sp_n" to="city_sp_n"/>
                            <a:map from="district_sp" to="district_sp"/>
                            <a:map from="district_sp_n" to="district_sp_n"/>
                            <a:map from="address_sp" to="address_sp"/>
                            <a:map from="loan_card_num" to="loan_card_num"/>
                            <a:map from="bp_name" to="bp_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field defaultvalue="638" required="true" readonly="false" requiredmessage="1、本人信息姓名${l:HLS.NOT_NULL}" name="bp_id"/>
                    <a:field valuefield="value_code" returnfield="gender" required="false" readonly="true" name="gender_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_gender_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息性别${l:HLS.NOT_NULL}" name="gender"/>
                    <a:field required="false" readonly="true" datatype="java.util.Date" requiredmessage="1、本人信息出生日期${l:HLS.NOT_NULL}" name="date_of_birth"/>
                    <a:field valuefield="value_code" returnfield="academic_background" required="false" readonly="true" name="academic_background_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_academic_background_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息学历${l:HLS.NOT_NULL}" name="academic_background"/>
                    <a:field valuefield="value_code" returnfield="id_type" required="false" readonly="true" name="id_type_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_id_type_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息证件类型${l:HLS.NOT_NULL}" name="id_type"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息证件号码${l:HLS.NOT_NULL}" name="id_card_no"/>
                    <a:field autocomplete="false" title="国家" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="country_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="country_id"/>
                            <a:map from="value_name" to="country_id_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息国家${l:HLS.NOT_NULL}" name="country_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息省份${l:HLS.NOT_NULL}" name="province_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息省份${l:HLS.NOT_NULL}" name="province_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息市${l:HLS.NOT_NULL}" name="city_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息市${l:HLS.NOT_NULL}" name="city_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息区/县${l:HLS.NOT_NULL}" name="district_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息区/县${l:HLS.NOT_NULL}" name="district_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息详细地址${l:HLS.NOT_NULL}" name="address"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息行业经验（年）${l:HLS.NOT_NULL}" name="industry_experience"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息股东占比(%)${l:HLS.NOT_NULL}" name="stockholding_ratio"/>
                    <a:field required="false" readonly="false" datatype="java.util.Date" requiredmessage="1、本人信息查询时间${l:HLS.NOT_NULL}" name="date_credit_info"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息征信查询信息${l:HLS.NOT_NULL}" name="credit_info"/>
                    <a:field valuefield="value_code" defaultvalue="担保人" returnfield="bp_category" required="false" readonly="false" name="bp_category_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_category_combobox_ds" displayfield="value_name"/>
                    <a:field defaultvalue="GUARANTOR" required="false" readonly="false" requiredmessage="1、本人信息商业伙伴类别4${l:HLS.NOT_NULL}" name="bp_category"/>
                    <a:field valuefield="value_code" returnfield="bp_class" required="false" readonly="false" name="bp_class_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_class_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息承租人分类${l:HLS.NOT_NULL}" name="bp_class"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息商业伙伴编码${l:HLS.NOT_NULL}" name="bp_code"/>
                    <a:field defaultvalue="GUTA_NP" required="false" readonly="false" requiredmessage="1、本人信息商业伙伴类型${l:HLS.NOT_NULL}" name="bp_type"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息合同关联序号${l:HLS.NOT_NULL}" name="contract_seq"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息是否夫妻担保${l:HLS.NOT_NULL}" name="ref_v01" uncheckedvalue="N" checkedvalue="Y"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息用户字段字符2${l:HLS.NOT_NULL}" name="ref_v02"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息(配偶)名称${l:HLS.NOT_NULL}" name="bp_name_sp"/>
                    <a:field valuefield="value_code" returnfield="gender_sp" required="false" readonly="true" name="gender_sp_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_gender_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息性别${l:HLS.NOT_NULL}" name="gender_sp"/>
                    <a:field required="false" readonly="true" datatype="java.util.Date" requiredmessage="2、配偶信息出生日期${l:HLS.NOT_NULL}" name="date_of_birth_sp"/>
                    <a:field valuefield="value_code" returnfield="academic_background_sp" required="false" readonly="true" name="academic_background_sp_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_academic_background_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息学历${l:HLS.NOT_NULL}" name="academic_background_sp"/>
                    <a:field valuefield="value_code" returnfield="id_type_sp" required="false" readonly="true" name="id_type_sp_n" options="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_id_type_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息证件类型${l:HLS.NOT_NULL}" name="id_type_sp"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息证件号码${l:HLS.NOT_NULL}" name="id_card_no_sp"/>
                    <a:field autocomplete="false" title="国家" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="country_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="country_sp"/>
                            <a:map from="value_name" to="country_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息国家${l:HLS.NOT_NULL}" name="country_sp"/>
                    <a:field autocomplete="false" title="省" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="province_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="province_sp"/>
                            <a:map from="value_name" to="province_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息省${l:HLS.NOT_NULL}" name="province_sp"/>
                    <a:field autocomplete="false" title="市" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="city_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="city_sp"/>
                            <a:map from="value_name" to="city_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息市${l:HLS.NOT_NULL}" name="city_sp"/>
                    <a:field autocomplete="false" title="区/县" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="district_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="district_sp"/>
                            <a:map from="value_name" to="district_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息区/县${l:HLS.NOT_NULL}" name="district_sp"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息详细地址${l:HLS.NOT_NULL}" name="address_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息行业经验（年）${l:HLS.NOT_NULL}" name="industry_experience_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息股东占比（%）${l:HLS.NOT_NULL}" name="stockholding_ratio_sp"/>
                    <a:field required="false" readonly="false" datatype="java.util.Date" requiredmessage="2、配偶信息查询时间${l:HLS.NOT_NULL}" name="date_credit_info_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息征信查询信息${l:HLS.NOT_NULL}" name="credit_info_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="null${l:HLS.NOT_NULL}" name="description"/>
                    <a:field required="false" readonly="false" requiredmessage="个人担保能力评价个人担保能力评价${l:HLS.NOT_NULL}" name="guar_explain"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202212" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="不动产序号" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address_house_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202205" required_input_mode="TRUE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="房产地址及门牌号" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="total_buy_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202213" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="购买总价" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="buy_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202206" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="购买日期" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="payment_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202207" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="已付金额" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="pledge_rent_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202208" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无抵押/出租" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="property_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202210" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无产权证 " tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_combobox_ds"/>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate" fetchall="false" selectable="true" processfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_REAL_ESTATE&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_real_estate&amp;query_only=N&amp;tab_code=T_T_T_PRJ_REAL_ESTATE&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="不动产序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="房产地址及门牌号${l:HLS.NOT_NULL}" name="address_house_number"/>
                    <a:field required="true" readonly="false" requiredmessage="购买总价${l:HLS.NOT_NULL}" name="total_buy_amount"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="购买日期${l:HLS.NOT_NULL}" name="buy_date"/>
                    <a:field required="true" readonly="false" requiredmessage="已付金额${l:HLS.NOT_NULL}" name="payment_amount"/>
                    <a:field valuefield="value_code" returnfield="pledge_rent_flag" required="true" readonly="false" name="pledge_rent_flag_n" options="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无抵押/出租${l:HLS.NOT_NULL}" name="pledge_rent_flag"/>
                    <a:field valuefield="value_code" returnfield="property_flag" required="true" readonly="false" name="property_flag_n" options="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无产权证 ${l:HLS.NOT_NULL}" name="property_flag"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202199" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="动产序号" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="personal_estate_name" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202195" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="名称" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="total_buy_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202200" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="购买总价" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="buy_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202192" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="购买日期" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="payment_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202193" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="已付金额" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="pledge_rent_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202196" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无抵押/出租" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="property_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202198" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无产权证 " tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_combobox_ds"/>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate" fetchall="false" selectable="true" processfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PERSONAL_ESTATE&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_personal_estate&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PERSONAL_ESTATE&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="动产序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="名称${l:HLS.NOT_NULL}" name="personal_estate_name"/>
                    <a:field required="true" readonly="false" requiredmessage="购买总价${l:HLS.NOT_NULL}" name="total_buy_amount"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="购买日期${l:HLS.NOT_NULL}" name="buy_date"/>
                    <a:field required="true" readonly="false" requiredmessage="已付金额${l:HLS.NOT_NULL}" name="payment_amount"/>
                    <a:field valuefield="value_code" returnfield="pledge_rent_flag" required="true" readonly="false" name="pledge_rent_flag_n" options="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无抵押/出租${l:HLS.NOT_NULL}" name="pledge_rent_flag"/>
                    <a:field valuefield="value_code" returnfield="property_flag" required="true" readonly="false" name="property_flag_n" options="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无产权证 ${l:HLS.NOT_NULL}" name="property_flag"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202158" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="序号" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="company_name" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202150" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="被投资企业名称" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="registered_fund" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" query_only="N" config_id="202157" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="注册资金" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="invest_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202153" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="投资日期" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="ratio_investments" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202156" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出资比例" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HLS_STOCKHOLDING_TYPE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="physical_cash_inver" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202154" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="实物/现金出资" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="duty" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202151" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="所任职务" tab_code="T_T_T_PRJ_EQUITY"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_combobox_ds"/>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity" fetchall="false" selectable="true" processfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_EQUITY&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_equity&amp;query_only=N&amp;tab_code=T_T_T_PRJ_EQUITY&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="被投资企业名称${l:HLS.NOT_NULL}" name="company_name"/>
                    <a:field required="true" readonly="false" requiredmessage="注册资金${l:HLS.NOT_NULL}" name="registered_fund"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="投资日期${l:HLS.NOT_NULL}" name="invest_date"/>
                    <a:field required="true" readonly="false" requiredmessage="出资比例${l:HLS.NOT_NULL}" name="ratio_investments"/>
                    <a:field valuefield="value_code" returnfield="physical_cash_inver" required="true" readonly="false" name="physical_cash_inver_n" options="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="实物/现金出资${l:HLS.NOT_NULL}" name="physical_cash_inver"/>
                    <a:field required="true" readonly="false" requiredmessage="所任职务${l:HLS.NOT_NULL}" name="duty"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="contract_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202185" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="合同总额" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="descriptions" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202187" required_input_mode="FALSE" data_type="VARCHAR2" width="800" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="说明" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="lending_account" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202188" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="笔数" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="lending_org_count" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202189" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="贷款法人机构数" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="outstanding_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202190" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="余额" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit" fetchall="false" processfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CON_FORM_PROCESSFUNCTION" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PERSONAL_CREDI&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_personal_credit&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PERSONAL_CREDI&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED&apos;]" name="submitfailed"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录合同总额${l:HLS.NOT_NULL}" name="contract_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录说明${l:HLS.NOT_NULL}" name="descriptions"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录笔数${l:HLS.NOT_NULL}" name="lending_account"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录贷款法人机构数${l:HLS.NOT_NULL}" name="lending_org_count"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录余额${l:HLS.NOT_NULL}" name="outstanding_amount"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="5" display_flag="N" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="lend_type" lov_return_vcode="N" default_value="LEND" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202149" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="类型" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_counts" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202146" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="笔数" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="TRUE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_delay_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202147" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="单月逾期最高额" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="30" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_delay_month" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202148" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="最长逾期月数" tab_code="T_T_PRJ_PROJECT_C"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card" fetchall="false" selectable="true" processfunction="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_PRJ_PROJECT_C&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_lend_card&amp;query_only=N&amp;tab_code=T_T_PRJ_PROJECT_C&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field defaultvalue="LEND" required="false" readonly="true" requiredmessage="类型${l:HLS.NOT_NULL}" name="lend_type"/>
                    <a:field required="false" readonly="false" requiredmessage="笔数${l:HLS.NOT_NULL}" name="lend_counts"/>
                    <a:field required="false" readonly="false" requiredmessage="单月逾期最高额${l:HLS.NOT_NULL}" name="lend_delay_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="最长逾期月数${l:HLS.NOT_NULL}" name="lend_delay_month"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds"/>
            <a:dataSet id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="N" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="lend_type" lov_return_vcode="N" default_value="CARD" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202204" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="类型" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_accounts" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202201" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="笔数" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="TRUE" system_flag="N" underline="N" precision="2" display_order="30" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_delay_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202202" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="单月逾期最高额" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="40" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_delay_month" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202203" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="最长逾期月数" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card" fetchall="false" selectable="true" processfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PROJECT_CARD&amp;bp_seq=2&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_lend_card&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PROJECT_CARD&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field defaultvalue="CARD" required="false" readonly="true" requiredmessage="类型${l:HLS.NOT_NULL}" name="lend_type"/>
                    <a:field required="false" readonly="false" requiredmessage="笔数${l:HLS.NOT_NULL}" name="card_accounts"/>
                    <a:field required="false" readonly="false" requiredmessage="单月逾期最高额${l:HLS.NOT_NULL}" name="card_delay_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="最长逾期月数${l:HLS.NOT_NULL}" name="card_delay_month"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_T_ACT_REMARK_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="LOV_D" validation_sql="select t1.bp_id value_code,
       t1.bp_code as value_code_display,
       t1.bp_name value_name,
       t1.extra_nam,
       &apos;GUARANTOR&apos; bp_category,
       (select bc.description
          from hls_bp_category bc
         where bc.bp_category = &apos;GUARANTOR&apos;) as bp_category_n,
       (select mr.bp_type
          from hls_bp_master_role mr
         where mr.bp_category = &apos;GUARANTOR&apos;
           and mr.bp_id = t1.bp_id
           and mr.enabled_flag = &apos;Y&apos;
           and rownum = 1) bp_type,
       t1.bp_class,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_BP_CLASS&apos;
           and v.code_value = t1.bp_class) as bp_class_n,
       t1.bp_code,
       t1.bp_title,
       t1.external_bp_code,
       t1.gender,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_GENDER&apos;
           and v.code_value = t1.gender) as gender_n,
       t1.nationality,
       to_char(t1.date_of_birth, &apos;YYYY-MM-DD&apos;) date_of_birth,
       t1.academic_background,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos;
           and v.code_value = t1.academic_background) as academic_background_n,
       t1.age,
       t1.id_type,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ID_TYPE&apos;
           and v.code_value = t1.id_type) as id_type_n,
       t1.id_card_no,
       t1.annual_income,
       t1.currency,
       (select cu.currency_name
          from gld_currency_vl cu
         where cu.currency_code = t1.currency) as currency_n,
       t1.legal_form,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_LEGAL_FORM&apos;
           and v.code_value = t1.legal_form) as legal_form_n,
       t1.industry,
       (select sc.description
          from hls_stat_class sc
         where sc.class_id = t1.industry) industry_n,
       t1.business_license_num,
       t1.corporate_code,
       t1.organization_code,
       t1.tax_registry_num,
       t1.registered_place,
       t1.founded_date,
       t1.registered_capital,
       t1.balance_sheet_currency,
       t1.company_nature,
       (select d.code_value_name
          from sys_code_values_v d
         where d.code = &apos;PRJ_NATURE_OF_BUSINESS&apos;
           and d.code_value = t1.company_nature) company_nature_n,
       t1.paid_up_capital,
       t1.main_products,
       t1.primary_business,
       bpa.country_id,
       bpa.country_name country_id_n,
       bpa.province_id,
       bpa.province_name province_id_n,
       bpa.city_id,
       bpa.city_name city_id_n,
       bpa.district_id,
       bpa.district_name district_id_n,
       bpa.street,
       bpa.address,
       t1.bp_name_sp,
       t1.gender_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_GENDER&apos;
           and v.code_value = t1.gender_sp) as gender_sp_n,
       to_char(t1.date_of_birth_sp, &apos;YYYY-MM-DD&apos;) date_of_birth_sp,
       t1.academic_background_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos;
           and v.code_value = t1.academic_background_sp) as academic_background_sp_n,
       t1.id_type_sp,
       (select v.code_value_name
          from sys_code_values_v v
         where v.code = &apos;HLS211_ID_TYPE&apos;
           and v.code_value = t1.id_type_sp) as id_type_sp_n,
       t1.id_card_no_sp,
       t1.country_sp,
       (select fc.description
          from fnd_country fc
         where fc.country_id = t1.country_sp) country_sp_n,
       t1.province_sp,
       (select fp.description
          from fnd_province fp
         where fp.province_id = t1.province_sp) province_sp_n,
       t1.city_sp,
       (select fct.description
          from fnd_city fct
         where fct.city_id = t1.city_sp) city_sp_n,
       t1.district_sp,
       (select fd.description
          from fnd_district fd
         where fd.district_id = t1.district_sp) district_sp_n,
       t1.address_sp,
       t1.loan_card_num,
       t1.bp_name
  from hls_bp_master t1, hls_bp_master_address_v bpa
where t1.bp_id = bpa.bp_id(+)
   and bpa.address_type(+) = &apos;DOC_SENT_ADDRESS&apos;
   and t1.enabled_flag = &apos;Y&apos;
   and exists (select 1
          from hls_bp_master_role d
         where d.bp_id = t1.bp_id
            and t1.bp_type = &apos;GUTA_NP&apos;
           and d.bp_category in (&apos;GUARANTOR&apos;)
           and d.enabled_flag = &apos;Y&apos;)  and exists
        ( select 1
           from aut_trx_user_authorize a1, aut_owner_user_authorize a2
          where a1.trx_category = &apos;BP&apos;
            and a1.trx_id = t1.bp_id
            and trunc (sysdate) between a1.start_date and
                nvl(a1.end_date, trunc (sysdate))
            and a1.user_id = a2.owner_user_id
            and a1.trx_category = a2.trx_category
            and a2.authorized_user_id = ${/session/@user_id}
            and trunc (sysdate) between a2.start_date and
                nvl(a2.end_date, trunc (sysdate)))
" field_bak_flag="N" input_mode="REQUIRED" default_value_name="若有自然人担保请选择" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_id" lov_return_vcode="N" default_value="638" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200963" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="姓名" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_GENDER&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="gender" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200986" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="性别" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_of_birth" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200978" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出生日期" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos; and v.code_enabled_flag = &apos;Y&apos;and v.code_value_enabled_flag =&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="academic_background" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200956" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="学历" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ID_TYPE&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="id_type" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200990" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件类型" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="id_card_no" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200988" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件号码" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="LOV" validation_sql="select f.country_id as value_code, f.description as value_name from fnd_country f where f.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="country_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200971" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="国家" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="80" display_flag="Y" validation_type="LOV" validation_sql="select p.province_id as value_code, p.description as value_name FROM fnd_province p where p.country_id = ${@country_id} and p.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="province_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200995" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省份" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="80" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="province_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200996" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省份" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="90" display_flag="Y" validation_type="LOV" validation_sql="select p.city_id as value_code, p.description as value_name FROM fnd_city p where p.province_id = ${@province_id} and p.enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="city_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200967" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="91" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="city_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200968" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="100" display_flag="Y" validation_type="LOV" validation_sql="select t1.district_id as value_code, t1.description as value_name from fnd_district t1 where t1.enabled_flag=&apos;Y&apos; and t1.city_id=${@city}" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="district_id" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200983" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="101" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="district_id_n" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200984" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="110" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200958" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="详细地址" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="140" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="industry_experience" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200992" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="行业经验（年）" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="150" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="stockholding_ratio" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201000" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="股东占比(%)" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="160" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_credit_info" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200976" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="查询时间" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="170" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="credit_info" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200974" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="征信查询信息" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="COMBOBOX" validation_sql="select bp_category as value_code,description as value_name from hls_bp_category t where enabled_flag = &apos;Y&apos; order by ref_n01" field_bak_flag="N" input_mode="OPTION" default_value_name="担保人" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_category" lov_return_vcode="N" default_value="GUARANTOR" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200960" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴类别4" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_BP_CLASS&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="bp_class" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200961" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="承租人分类" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_code" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200962" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴编码" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="TEXTFIELD" validation_sql="select h.bp_type value_code, h.description value_name, h.bp_category from hls_bp_type h where h.enabled_flag = &apos;Y&apos; and h.bp_category = ${@bp_category}" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_type" lov_return_vcode="N" default_value="GUTA_NP" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200966" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="商业伙伴类型" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="contract_seq" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200970" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="合同关联序号" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="CHECKBOX" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="ref_v01" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200998" required_input_mode="FALSE" data_type="VARCHAR2" width="20" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="是否夫妻担保" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="ref_v02" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="200999" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="用户字段字符2" tab_code="F_ACT_CTRLER_01"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="bp_name_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201004" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="(配偶)名称" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name  from sys_code_values_v v where v.code = &apos;HLS211_GENDER&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="gender_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201013" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="性别" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_of_birth_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201011" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出生日期" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ACADEMIC_BACKGROUND&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="academic_background_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201002" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="学历" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value as value_code, v.code_value_name as value_name from sys_code_values_v v where v.code = &apos;HLS211_ID_TYPE&apos; and v.code_enabled_flag = &apos;Y&apos; and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="id_type_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201015" required_input_mode="FALSE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件类型" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="id_card_no_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201014" required_input_mode="FALSE" data_type="VARCHAR2" width="150" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="证件号码" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="LOV" validation_sql="select f.country_code as value_code,f.description as value_name from fnd_country f where f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="country_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201008" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="国家" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="80" display_flag="Y" validation_type="LOV" validation_sql="select f.province_id as value_code,f.description as value_name from fnd_province f where f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="province_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201017" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="省" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="90" display_flag="Y" validation_type="LOV" validation_sql="select f.city_id as value_id,f.description as value_name from fnd_city f where f.enabled_flag=&apos;Y&apos; and f.province_id=${@province_sp}" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="city_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201006" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="市" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="100" display_flag="Y" validation_type="LOV" validation_sql="select f.district_id as value_id,f.description as value_name from fnd_district f where f.city_id=${@city_sp} and f.enabled_flag=&apos;Y&apos;" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="district_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201012" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="区/县" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="110" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201003" required_input_mode="FALSE" data_type="VARCHAR2" width="345" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="详细地址" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="120" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="industry_experience_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201016" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="行业经验（年）" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="130" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="stockholding_ratio_sp" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201018" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="股东占比（%）" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="140" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="date_credit_info_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201010" required_input_mode="FALSE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="查询时间" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="150" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="credit_info_sp" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="201009" required_input_mode="FALSE" data_type="VARCHAR2" width="570" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="征信查询信息" tab_code="F_ACT_CTRLER_02"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTAREA" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="description" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202162" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" tab_code="T_T_T_PRJ_OTHER"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTAREA" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="guar_explain" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="201019" required_input_mode="FALSE" data_type="VARCHAR2" width="700" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="个人担保能力评价" tab_code="F_ACT_GUAR_EXPLAIN"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_gender_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_academic_background_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_id_type_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_category_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_class_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_gender_sp_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_academic_background_sp_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_id_type_sp_combobox_ds"/>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd" fetchall="false" processfunction="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CON_FORM_PROCESSFUNCTION" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=F_ACT_CTRLER_01&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_act_ctrler_hd&amp;query_only=N&amp;tab_code=F_ACT_CTRLER_01&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project&amp;parent_base_table_pk=project_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED&apos;]" name="submitfailed"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field autocomplete="false" defaultvalue="若有自然人担保请选择" title="姓名" required="true" fetchsingle="false" readonly="false" lovservice="layout.server_parameters_lov_d" lovlabelwidth="100" name="bp_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="bp_id"/>
                            <a:map from="value_name" to="bp_id_n"/>
                            <a:map from="value_code_display" to="value_code_display"/>
                            <a:map from="bp_code" to="bp_code"/>
                            <a:map from="extra_nam" to="extra_nam"/>
                            <a:map from="bp_category" to="bp_category"/>
                            <a:map from="bp_category_n" to="bp_category_n"/>
                            <a:map from="bp_type" to="bp_type"/>
                            <a:map from="bp_class" to="bp_class"/>
                            <a:map from="bp_class_n" to="bp_class_n"/>
                            <a:map from="bp_title" to="bp_title"/>
                            <a:map from="external_bp_code" to="external_bp_code"/>
                            <a:map from="gender" to="gender"/>
                            <a:map from="gender_n" to="gender_n"/>
                            <a:map from="nationality" to="nationality"/>
                            <a:map from="date_of_birth" to="date_of_birth"/>
                            <a:map from="academic_background" to="academic_background"/>
                            <a:map from="academic_background_n" to="academic_background_n"/>
                            <a:map from="age" to="age"/>
                            <a:map from="id_type" to="id_type"/>
                            <a:map from="id_type_n" to="id_type_n"/>
                            <a:map from="id_card_no" to="id_card_no"/>
                            <a:map from="annual_income" to="annual_income"/>
                            <a:map from="currency" to="currency"/>
                            <a:map from="currency_n" to="currency_n"/>
                            <a:map from="legal_form" to="legal_form"/>
                            <a:map from="legal_form_n" to="legal_form_n"/>
                            <a:map from="industry" to="industry"/>
                            <a:map from="industry_n" to="industry_n"/>
                            <a:map from="business_license_num" to="business_license_num"/>
                            <a:map from="corporate_code" to="corporate_code"/>
                            <a:map from="organization_code" to="organization_code"/>
                            <a:map from="tax_registry_num" to="tax_registry_num"/>
                            <a:map from="registered_place" to="registered_place"/>
                            <a:map from="founded_date" to="founded_date"/>
                            <a:map from="registered_capital" to="registered_capital"/>
                            <a:map from="balance_sheet_currency" to="balance_sheet_currency"/>
                            <a:map from="company_nature" to="company_nature"/>
                            <a:map from="company_nature_n" to="company_nature_n"/>
                            <a:map from="paid_up_capital" to="paid_up_capital"/>
                            <a:map from="main_products" to="main_products"/>
                            <a:map from="primary_business" to="primary_business"/>
                            <a:map from="country_id" to="country_id"/>
                            <a:map from="country_id_n" to="country_id_n"/>
                            <a:map from="province_id" to="province_id"/>
                            <a:map from="province_id_n" to="province_id_n"/>
                            <a:map from="city_id" to="city_id"/>
                            <a:map from="city_id_n" to="city_id_n"/>
                            <a:map from="district_id" to="district_id"/>
                            <a:map from="district_id_n" to="district_id_n"/>
                            <a:map from="street" to="street"/>
                            <a:map from="address" to="address"/>
                            <a:map from="bp_name_sp" to="bp_name_sp"/>
                            <a:map from="gender_sp" to="gender_sp"/>
                            <a:map from="gender_sp_n" to="gender_sp_n"/>
                            <a:map from="date_of_birth_sp" to="date_of_birth_sp"/>
                            <a:map from="academic_background_sp" to="academic_background_sp"/>
                            <a:map from="academic_background_sp_n" to="academic_background_sp_n"/>
                            <a:map from="id_type_sp" to="id_type_sp"/>
                            <a:map from="id_type_sp_n" to="id_type_sp_n"/>
                            <a:map from="id_card_no_sp" to="id_card_no_sp"/>
                            <a:map from="country_sp" to="country_sp"/>
                            <a:map from="country_sp_n" to="country_sp_n"/>
                            <a:map from="province_sp" to="province_sp"/>
                            <a:map from="province_sp_n" to="province_sp_n"/>
                            <a:map from="city_sp" to="city_sp"/>
                            <a:map from="city_sp_n" to="city_sp_n"/>
                            <a:map from="district_sp" to="district_sp"/>
                            <a:map from="district_sp_n" to="district_sp_n"/>
                            <a:map from="address_sp" to="address_sp"/>
                            <a:map from="loan_card_num" to="loan_card_num"/>
                            <a:map from="bp_name" to="bp_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field defaultvalue="638" required="true" readonly="false" requiredmessage="1、本人信息姓名${l:HLS.NOT_NULL}" name="bp_id"/>
                    <a:field valuefield="value_code" returnfield="gender" required="false" readonly="true" name="gender_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_gender_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息性别${l:HLS.NOT_NULL}" name="gender"/>
                    <a:field required="false" readonly="true" datatype="java.util.Date" requiredmessage="1、本人信息出生日期${l:HLS.NOT_NULL}" name="date_of_birth"/>
                    <a:field valuefield="value_code" returnfield="academic_background" required="false" readonly="true" name="academic_background_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_academic_background_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息学历${l:HLS.NOT_NULL}" name="academic_background"/>
                    <a:field valuefield="value_code" returnfield="id_type" required="false" readonly="true" name="id_type_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_id_type_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息证件类型${l:HLS.NOT_NULL}" name="id_type"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息证件号码${l:HLS.NOT_NULL}" name="id_card_no"/>
                    <a:field autocomplete="false" title="国家" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="country_id_n">
                        <a:mapping>
                            <a:map from="value_code" to="country_id"/>
                            <a:map from="value_name" to="country_id_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息国家${l:HLS.NOT_NULL}" name="country_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息省份${l:HLS.NOT_NULL}" name="province_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息省份${l:HLS.NOT_NULL}" name="province_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息市${l:HLS.NOT_NULL}" name="city_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息市${l:HLS.NOT_NULL}" name="city_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息区/县${l:HLS.NOT_NULL}" name="district_id"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息区/县${l:HLS.NOT_NULL}" name="district_id_n"/>
                    <a:field required="false" readonly="true" requiredmessage="1、本人信息详细地址${l:HLS.NOT_NULL}" name="address"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息行业经验（年）${l:HLS.NOT_NULL}" name="industry_experience"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息股东占比(%)${l:HLS.NOT_NULL}" name="stockholding_ratio"/>
                    <a:field required="false" readonly="false" datatype="java.util.Date" requiredmessage="1、本人信息查询时间${l:HLS.NOT_NULL}" name="date_credit_info"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息征信查询信息${l:HLS.NOT_NULL}" name="credit_info"/>
                    <a:field valuefield="value_code" defaultvalue="担保人" returnfield="bp_category" required="false" readonly="false" name="bp_category_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_category_combobox_ds" displayfield="value_name"/>
                    <a:field defaultvalue="GUARANTOR" required="false" readonly="false" requiredmessage="1、本人信息商业伙伴类别4${l:HLS.NOT_NULL}" name="bp_category"/>
                    <a:field valuefield="value_code" returnfield="bp_class" required="false" readonly="false" name="bp_class_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_bp_class_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息承租人分类${l:HLS.NOT_NULL}" name="bp_class"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息商业伙伴编码${l:HLS.NOT_NULL}" name="bp_code"/>
                    <a:field defaultvalue="GUTA_NP" required="false" readonly="false" requiredmessage="1、本人信息商业伙伴类型${l:HLS.NOT_NULL}" name="bp_type"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息合同关联序号${l:HLS.NOT_NULL}" name="contract_seq"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息是否夫妻担保${l:HLS.NOT_NULL}" name="ref_v01" uncheckedvalue="N" checkedvalue="Y"/>
                    <a:field required="false" readonly="false" requiredmessage="1、本人信息用户字段字符2${l:HLS.NOT_NULL}" name="ref_v02"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息(配偶)名称${l:HLS.NOT_NULL}" name="bp_name_sp"/>
                    <a:field valuefield="value_code" returnfield="gender_sp" required="false" readonly="true" name="gender_sp_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_gender_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息性别${l:HLS.NOT_NULL}" name="gender_sp"/>
                    <a:field required="false" readonly="true" datatype="java.util.Date" requiredmessage="2、配偶信息出生日期${l:HLS.NOT_NULL}" name="date_of_birth_sp"/>
                    <a:field valuefield="value_code" returnfield="academic_background_sp" required="false" readonly="true" name="academic_background_sp_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_academic_background_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息学历${l:HLS.NOT_NULL}" name="academic_background_sp"/>
                    <a:field valuefield="value_code" returnfield="id_type_sp" required="false" readonly="true" name="id_type_sp_n" options="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_id_type_sp_combobox_ds" displayfield="value_name"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息证件类型${l:HLS.NOT_NULL}" name="id_type_sp"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息证件号码${l:HLS.NOT_NULL}" name="id_card_no_sp"/>
                    <a:field autocomplete="false" title="国家" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="country_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="country_sp"/>
                            <a:map from="value_name" to="country_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息国家${l:HLS.NOT_NULL}" name="country_sp"/>
                    <a:field autocomplete="false" title="省" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="province_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="province_sp"/>
                            <a:map from="value_name" to="province_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息省${l:HLS.NOT_NULL}" name="province_sp"/>
                    <a:field autocomplete="false" title="市" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="city_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="city_sp"/>
                            <a:map from="value_name" to="city_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息市${l:HLS.NOT_NULL}" name="city_sp"/>
                    <a:field autocomplete="false" title="区/县" required="false" fetchsingle="false" readonly="true" lovservice="layout.server_parameters_lov" lovlabelwidth="100" name="district_sp_n">
                        <a:mapping>
                            <a:map from="value_code" to="district_sp"/>
                            <a:map from="value_name" to="district_sp_n"/>
                        </a:mapping>
                    </a:field>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息区/县${l:HLS.NOT_NULL}" name="district_sp"/>
                    <a:field required="false" readonly="true" requiredmessage="2、配偶信息详细地址${l:HLS.NOT_NULL}" name="address_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息行业经验（年）${l:HLS.NOT_NULL}" name="industry_experience_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息股东占比（%）${l:HLS.NOT_NULL}" name="stockholding_ratio_sp"/>
                    <a:field required="false" readonly="false" datatype="java.util.Date" requiredmessage="2、配偶信息查询时间${l:HLS.NOT_NULL}" name="date_credit_info_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="2、配偶信息征信查询信息${l:HLS.NOT_NULL}" name="credit_info_sp"/>
                    <a:field required="false" readonly="false" requiredmessage="null${l:HLS.NOT_NULL}" name="description"/>
                    <a:field required="false" readonly="false" requiredmessage="个人担保能力评价个人担保能力评价${l:HLS.NOT_NULL}" name="guar_explain"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202212" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="不动产序号" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="address_house_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202205" required_input_mode="TRUE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="房产地址及门牌号" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="total_buy_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202213" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="购买总价" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="buy_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202206" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="购买日期" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="payment_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202207" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="已付金额" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="pledge_rent_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202208" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无抵押/出租" tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="property_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202210" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无产权证 " tab_code="T_T_T_PRJ_REAL_ESTATE"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_combobox_ds"/>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate" fetchall="false" selectable="true" processfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_REAL_ESTATE&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_real_estate&amp;query_only=N&amp;tab_code=T_T_T_PRJ_REAL_ESTATE&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="不动产序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="房产地址及门牌号${l:HLS.NOT_NULL}" name="address_house_number"/>
                    <a:field required="true" readonly="false" requiredmessage="购买总价${l:HLS.NOT_NULL}" name="total_buy_amount"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="购买日期${l:HLS.NOT_NULL}" name="buy_date"/>
                    <a:field required="true" readonly="false" requiredmessage="已付金额${l:HLS.NOT_NULL}" name="payment_amount"/>
                    <a:field valuefield="value_code" returnfield="pledge_rent_flag" required="true" readonly="false" name="pledge_rent_flag_n" options="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无抵押/出租${l:HLS.NOT_NULL}" name="pledge_rent_flag"/>
                    <a:field valuefield="value_code" returnfield="property_flag" required="true" readonly="false" name="property_flag_n" options="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无产权证 ${l:HLS.NOT_NULL}" name="property_flag"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202199" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="动产序号" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="personal_estate_name" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202195" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="名称" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="total_buy_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202200" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="购买总价" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="buy_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202192" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="购买日期" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="payment_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202193" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="已付金额" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="pledge_rent_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202196" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无抵押/出租" tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HAVE_NONE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="property_flag" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202198" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="有无产权证 " tab_code="T_T_T_PRJ_PERSONAL_ESTATE"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_combobox_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_combobox_ds"/>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate" fetchall="false" selectable="true" processfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PERSONAL_ESTATE&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_personal_estate&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PERSONAL_ESTATE&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="动产序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="名称${l:HLS.NOT_NULL}" name="personal_estate_name"/>
                    <a:field required="true" readonly="false" requiredmessage="购买总价${l:HLS.NOT_NULL}" name="total_buy_amount"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="购买日期${l:HLS.NOT_NULL}" name="buy_date"/>
                    <a:field required="true" readonly="false" requiredmessage="已付金额${l:HLS.NOT_NULL}" name="payment_amount"/>
                    <a:field valuefield="value_code" returnfield="pledge_rent_flag" required="true" readonly="false" name="pledge_rent_flag_n" options="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无抵押/出租${l:HLS.NOT_NULL}" name="pledge_rent_flag"/>
                    <a:field valuefield="value_code" returnfield="property_flag" required="true" readonly="false" name="property_flag_n" options="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="有无产权证 ${l:HLS.NOT_NULL}" name="property_flag"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="10" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="sequence_number" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202158" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="序号" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="20" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="company_name" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202150" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="被投资企业名称" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_order="30" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="registered_fund" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" query_only="N" config_id="202157" required_input_mode="TRUE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="注册资金" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="40" display_flag="Y" validation_type="DATEPICKER" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="invest_date" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202153" required_input_mode="TRUE" data_type="DATE" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="投资日期" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="50" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="ratio_investments" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202156" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="出资比例" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="60" display_flag="Y" validation_type="COMBOBOX" validation_sql="select v.code_value value_code, v.code_value_name value_name
  from sys_code_values_v v
 where v.code = &apos;HLS_STOCKHOLDING_TYPE&apos;
   and v.code_enabled_flag = &apos;Y&apos;
   and v.code_value_enabled_flag = &apos;Y&apos;" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="physical_cash_inver" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202154" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="CENTER" prompt="实物/现金出资" tab_code="T_T_T_PRJ_EQUITY"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_order="70" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="REQUIRED" readonly_input_mode="FALSE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="duty" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" query_only="N" config_id="202151" required_input_mode="TRUE" data_type="VARCHAR2" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="所任职务" tab_code="T_T_T_PRJ_EQUITY"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/autocrud/layout.server_parameters_lov/query" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_combobox_ds"/>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity" fetchall="false" selectable="true" processfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_EQUITY&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_equity&amp;query_only=N&amp;tab_code=T_T_T_PRJ_EQUITY&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="序号${l:HLS.NOT_NULL}" name="sequence_number"/>
                    <a:field required="true" readonly="false" requiredmessage="被投资企业名称${l:HLS.NOT_NULL}" name="company_name"/>
                    <a:field required="true" readonly="false" requiredmessage="注册资金${l:HLS.NOT_NULL}" name="registered_fund"/>
                    <a:field required="true" readonly="false" datatype="java.util.Date" requiredmessage="投资日期${l:HLS.NOT_NULL}" name="invest_date"/>
                    <a:field required="true" readonly="false" requiredmessage="出资比例${l:HLS.NOT_NULL}" name="ratio_investments"/>
                    <a:field valuefield="value_code" returnfield="physical_cash_inver" required="true" readonly="false" name="physical_cash_inver_n" options="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_combobox_ds" displayfield="value_name"/>
                    <a:field required="true" readonly="false" requiredmessage="实物/现金出资${l:HLS.NOT_NULL}" name="physical_cash_inver"/>
                    <a:field required="true" readonly="false" requiredmessage="所任职务${l:HLS.NOT_NULL}" name="duty"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="contract_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202185" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="合同总额" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="true" autocomplete="false" column_name="descriptions" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202187" required_input_mode="FALSE" data_type="VARCHAR2" width="800" layout_code="WCS_PROJECT_MODIFY" alignment="LEFT" prompt="说明" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="lending_account" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202188" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="笔数" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="FALSE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="lending_org_count" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202189" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="贷款法人机构数" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                    <a:record allow_format="TRUE" system_flag="Y" precision="2" display_flag="Y" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" autocomplete="false" column_name="outstanding_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202190" required_input_mode="FALSE" data_type="NUMBER" width="120" layout_code="WCS_PROJECT_MODIFY" alignment="RIGHT" prompt="余额" tab_code="T_T_T_PRJ_PERSONAL_CREDI"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit" fetchall="false" processfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CON_FORM_PROCESSFUNCTION" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PERSONAL_CREDI&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_personal_credit&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PERSONAL_CREDI&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_ON_LAYOUT_DYNAMIC_INNER_SUBMITFAILED&apos;]" name="submitfailed"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_INIT&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_FORM_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录合同总额${l:HLS.NOT_NULL}" name="contract_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录说明${l:HLS.NOT_NULL}" name="descriptions"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录笔数${l:HLS.NOT_NULL}" name="lending_account"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录贷款法人机构数${l:HLS.NOT_NULL}" name="lending_org_count"/>
                    <a:field required="false" readonly="false" requiredmessage="个人信用记录余额${l:HLS.NOT_NULL}" name="outstanding_amount"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="5" display_flag="N" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="lend_type" lov_return_vcode="N" default_value="LEND" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202149" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="类型" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_counts" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202146" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="笔数" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="TRUE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_delay_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202147" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="单月逾期最高额" tab_code="T_T_PRJ_PROJECT_C"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="30" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="lend_delay_month" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202148" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="最长逾期月数" tab_code="T_T_PRJ_PROJECT_C"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card" fetchall="false" selectable="true" processfunction="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_PRJ_PROJECT_C&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_lend_card&amp;query_only=N&amp;tab_code=T_T_PRJ_PROJECT_C&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field defaultvalue="LEND" required="false" readonly="true" requiredmessage="类型${l:HLS.NOT_NULL}" name="lend_type"/>
                    <a:field required="false" readonly="false" requiredmessage="笔数${l:HLS.NOT_NULL}" name="lend_counts"/>
                    <a:field required="false" readonly="false" requiredmessage="单月逾期最高额${l:HLS.NOT_NULL}" name="lend_delay_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="最长逾期月数${l:HLS.NOT_NULL}" name="lend_delay_month"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_lov_getmapping_ds"/>
            <a:dataSet id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_con_layout_config_ds">
                <a:datas>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="10" display_flag="N" copy_from_parent_tab="N" validation_type="TEXTFIELD" field_bak_flag="N" input_mode="READONLY" readonly_input_mode="TRUE" sys_grid_show_title="true" key_field_flag="N" autocomplete="false" column_name="lend_type" lov_return_vcode="N" default_value="CARD" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202204" required_input_mode="FALSE" data_type="VARCHAR2" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="类型" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="20" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_accounts" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202201" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="笔数" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="TRUE" system_flag="N" underline="N" precision="2" display_order="30" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_delay_amount" lov_return_vcode="N" allow_decimal="TRUE" enabled_flag="Y" fetchsingle="false" zero_fill="TRUE" config_id="202202" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="单月逾期最高额" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                    <a:record allow_format="FALSE" system_flag="N" underline="N" precision="2" display_order="40" display_flag="Y" copy_from_parent_tab="N" validation_type="NUMBERFIELD" field_bak_flag="N" input_mode="OPTION" readonly_input_mode="FALSE" sys_grid_show_title="false" key_field_flag="N" autocomplete="false" column_name="card_delay_month" lov_return_vcode="N" allow_decimal="FALSE" enabled_flag="Y" fetchsingle="false" zero_fill="FALSE" config_id="202203" required_input_mode="FALSE" data_type="NUMBER" width="120" ignore_required="N" layout_code="WCS_PROJECT_MODIFY" alignment="center" prompt="最长逾期月数" tab_code="T_T_T_PRJ_PROJECT_CARD"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet bindname="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card" fetchall="false" selectable="true" processfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CON_GRID_PROCESS" autopagesize="true" queryurl="${/request/@context_path}/modules/layout/server_layout_base_query.lsc?layout_code=${/parameter/@layout_code}&amp;tab_code=T_T_T_PRJ_PROJECT_CARD&amp;bp_seq=3&amp;bp_category=GUARANTOR&amp;tree_code=ACT_CTRLER&amp;document_category=PROJECT&amp;document_type=PRJLB" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds" submiturl="${/request/@context_path}/modules/layout/server_layout_save.lsc?base_table=prj_project_lend_card&amp;query_only=N&amp;tab_code=T_T_T_PRJ_PROJECT_CARD&amp;layout_code=WCS_PROJECT_MODIFY&amp;document_id=${/parameter/@document_id}&amp;document_category=${/parameter/@document_category}&amp;document_type=${/parameter/@document_type}&amp;function_code=${/parameter/@function_code}&amp;function_usage=${/parameter/@function_usage}&amp;parent_table=prj_project_act_ctrler_hd&amp;parent_base_table_pk=prj_bp_id&amp;root_tree_code=GUARANTEE&amp;number_of_tenant=${/parameter/@number_of_tenant}&amp;number_of_guarantor=${/parameter/@number_of_guarantor}&amp;number_of_actual_controller=${/parameter/@number_of_actual_controller}&amp;number_of_quotation=${/parameter/@number_of_quotation}">
                <a:events>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_ADD&apos;]" name="add"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_LOAD&apos;]" name="load"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_INDEXCHANGE&apos;]" name="indexchange"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_QUERY&apos;]" name="query"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_SELECT&apos;]" name="select"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_UNSELECT&apos;]" name="unselect"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_GRID_REMOVE&apos;]" name="remove"/>
                    <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ON_LAYOUT_DYNAMIC_INNER_UPDATE&apos;]" name="update"/>
                </a:events>
                <a:fields>
                    <a:field defaultvalue="CARD" required="false" readonly="true" requiredmessage="类型${l:HLS.NOT_NULL}" name="lend_type"/>
                    <a:field required="false" readonly="false" requiredmessage="笔数${l:HLS.NOT_NULL}" name="card_accounts"/>
                    <a:field required="false" readonly="false" requiredmessage="单月逾期最高额${l:HLS.NOT_NULL}" name="card_delay_amount"/>
                    <a:field required="false" readonly="false" requiredmessage="最长逾期月数${l:HLS.NOT_NULL}" name="card_delay_month"/>
                </a:fields>
            </a:dataSet>
            <script><![CDATA[window['3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_CHILD_ONREADY']();]]></script>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_T_ACT_REMARK_lov_getmapping_ds"/>
            <a:dataSet fetchall="true" queryurl="${/request/@context_path}/modules/layout/server_layout_sql_parameters_load.lsc" id="3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_lov_getmapping_ds"/>
        </a:dataSets>
        <a:screenBody padding="0">
            <a:tabPanel marginwidth="5" style="padding:0px 0px 0px 0px" marginheight="50">
                <a:tabs>
                    <a:tab width="120" prompt="自然人">
                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                            <a:form title="自然人" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_component_id">
                                <div style="width:1112px">
                                    <a:box labelseparator=" " column="4" labelwidth="120" width="1112" row="1">
                                        <a:label renderer="WCS_PROJECT_MODIFY_F_ACT_CTRLER_FIELD_LINK_RENDERER" colspan="1" bindtarget="WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds" rowspan="1" width="150" name="ref_v09" style="margin-top:3px;margin-bottom:3px" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_PRJ_PROJECT_REF_V09" prompt=""/>
                                        <div width="150" style="margin-top:3px;margin-bottom:3px"/>
                                        <a:label renderer="WCS_PROJECT_MODIFY_F_ACT_CTRLER_FIELD_LINK_RENDERER" colspan="1" bindtarget="WCS_PROJECT_MODIFY_F_PRJ_BASIC_INFO_prj_project_ds" rowspan="1" width="150" name="ref_v10" style="margin-top:3px;margin-bottom:3px" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_PRJ_PROJECT_REF_V10" prompt=""/>
                                        <div width="150" style="margin-top:3px;margin-bottom:3px"/>
                                    </a:box>
                                </div>
                            </a:form>
                            <a:script><![CDATA[window['WCS_PROJECT_MODIFY_F_ACT_CTRLER_TABRELOAD_SHOW_HISTORY']();]]></a:script>
                        </a:box>
                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                            <a:tabPanel marginwidth="30" style="padding:0px 0px 0px 0px" id="3WCS_PROJECT_MODIFY_T_ACT_CTRLER_A_TABPANNEL" marginheight="20">
                                <a:tabs>
                                    <a:tab width="120" prompt="自然人担保人1">
                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                            <a:tabPanel marginwidth="30" style="padding:0px 0px 0px 0px" marginheight="100">
                                                <a:tabs>
                                                    <a:tab width="120" prompt="基本信息1">
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="1、本人信息" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="97" width="900" row="4">
                                                                        <a:lov colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="bp_id_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_BP_ID" prompt="姓名">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:comboBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="gender_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_GENDER" prompt="性别">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:datePicker colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_of_birth" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DATE_OF_BIRTH" prompt="出生日期"/>
                                                                        <a:comboBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="academic_background_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ACADEMIC_BACKGROUND" prompt="学历">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="province_id_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_PROVINCE_ID_N" prompt="省份"/>
                                                                        <a:comboBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="id_type_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ID_TYPE" prompt="证件类型">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="2" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="id_card_no" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ID_CARD_NO" prompt="证件号码"/>
                                                                        <a:textField colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="city_id_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_CITY_ID_N" prompt="市"/>
                                                                        <a:textField colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="district_id_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DISTRICT_ID_N" prompt="区/县"/>
                                                                        <a:textField colspan="2" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="address" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ADDRESS" prompt="详细地址"/>
                                                                        <a:checkBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="20" name="ref_v01" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_REF_V01" prompt="是否夫妻担保"/>
                                                                        <a:datePicker colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_credit_info" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DATE_CREDIT_INFO" prompt="查询时间"/>
                                                                        <a:textField colspan="2" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="credit_info" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_CREDIT_INFO" prompt="征信查询信息"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="2、配偶信息" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="97" width="900" row="5">
                                                                        <a:textField colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="bp_name_sp" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_BP_NAME_SP" prompt="(配偶)名称"/>
                                                                        <a:comboBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="gender_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_GENDER_SP" prompt="性别">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:datePicker colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_of_birth_sp" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DATE_OF_BIRTH_SP" prompt="出生日期"/>
                                                                        <a:comboBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="academic_background_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ACADEMIC_BACKGROUND_SP" prompt="学历">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:comboBox colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="id_type_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ID_TYPE_SP" prompt="证件类型">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="150" name="id_card_no_sp" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ID_CARD_NO_SP" prompt="证件号码"/>
                                                                        <a:lov colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="country_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_COUNTRY_SP" prompt="国家">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="province_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_PROVINCE_SP" prompt="省">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="city_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_CITY_SP" prompt="市">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="district_sp_n" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DISTRICT_SP" prompt="区/县">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:textField colspan="2" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="address_sp" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ADDRESS_SP" prompt="详细地址"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="industry_experience_sp" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_INDUSTRY_EXPERIENCE_SP" prompt="行业经验（年）"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="FALSE" colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="stockholding_ratio_sp" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_STOCKHOLDING_RATIO_SP" prompt="股东占比（%）"/>
                                                                        <div width="120" style="margin-top:3px;margin-bottom:3px"/>
                                                                        <div width="120" style="margin-top:3px;margin-bottom:3px"/>
                                                                        <a:datePicker colspan="1" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_credit_info_sp" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DATE_CREDIT_INFO_SP" prompt="查询时间"/>
                                                                        <a:textField colspan="3" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="570" name="credit_info_sp" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_CREDIT_INFO_SP" prompt="征信查询信息"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                    </a:tab>
                                                    <a:tab width="120" prompt="资产信息1">
                                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                                            <a:tabPanel marginwidth="100" style="padding:0px 0px 0px 0px" marginheight="250">
                                                                <a:tabs>
                                                                    <a:tab width="120" prompt="不动产1">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds" navbar="true" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="不动产序号"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="address_house_number" prompt="房产地址及门牌号"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="total_buy_amount" prompt="购买总价"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="buy_date" prompt="购买日期"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="payment_amount" prompt="已付金额"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="pledge_rent_flag_n" prompt="有无抵押/出租"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="property_flag_n" prompt="有无产权证 "/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_sequence_number_id"/>
                                                                                    <a:textField id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_address_house_number_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_total_buy_amount_id"/>
                                                                                    <a:datePicker id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_buy_date_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_payment_amount_id"/>
                                                                                    <a:comboBox id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:comboBox id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="动产1">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds" navbar="true" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="动产序号"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="personal_estate_name" prompt="名称"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="total_buy_amount" prompt="购买总价"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="buy_date" prompt="购买日期"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="payment_amount" prompt="已付金额"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="pledge_rent_flag_n" prompt="有无抵押/出租"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="property_flag_n" prompt="有无产权证 "/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_sequence_number_id"/>
                                                                                    <a:textField id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_personal_estate_name_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_total_buy_amount_id"/>
                                                                                    <a:datePicker id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_buy_date_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_payment_amount_id"/>
                                                                                    <a:comboBox id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:comboBox id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="股权1">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds" navbar="true" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="序号"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="company_name" prompt="被投资企业名称"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="registered_fund" prompt="注册资金"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="invest_date" prompt="投资日期"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="ratio_investments" prompt="出资比例"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="physical_cash_inver_n" prompt="实物/现金出资"/>
                                                                                    <a:column editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="duty" prompt="所任职务"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_sequence_number_id"/>
                                                                                    <a:textField id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_company_name_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_registered_fund_id"/>
                                                                                    <a:datePicker id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_invest_date_id"/>
                                                                                    <a:textField id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ratio_investments_id"/>
                                                                                    <a:comboBox id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:textField id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_duty_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="其他个人资产1">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_component_id">
                                                                                <div>
                                                                                    <div/>
                                                                                    <a:textArea marginwidth="150" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" name="description" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_PRJ_PROJECT_ACT_CTRLER_HD_DESCRIPTION" marginheight="320"/>
                                                                                </div>
                                                                            </a:hBox>
                                                                        </a:box>
                                                                    </a:tab>
                                                                </a:tabs>
                                                            </a:tabPanel>
                                                        </a:box>
                                                    </a:tab>
                                                    <a:tab width="120" prompt="信用信息1">
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="个人信用记录" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="70" width="900" row="2">
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="lending_org_count" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_LENDING_ORG_COUNT" prompt="贷款法人机构数"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="lending_account" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_LENDING_ACCOUNT" prompt="笔数"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="TRUE" colspan="1" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="contract_amount" allowpad="TRUE" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_CONTRACT_AMOUNT" prompt="合同总额"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="TRUE" colspan="1" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="outstanding_amount" allowpad="TRUE" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_OUTSTANDING_AMOUNT" prompt="余额"/>
                                                                        <a:textField colspan="4" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="800" name="descriptions" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_DESCRIPTIONS" prompt="说明"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                                            <a:tabPanel marginwidth="100" style="padding:0px 0px 0px 0px" marginheight="270">
                                                                <a:tabs>
                                                                    <a:tab width="120" prompt="贷记逾期情况1">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds" navbar="true" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_counts" prompt="笔数"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_delay_amount" prompt="单月逾期最高额"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_delay_month" prompt="最长逾期月数"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_counts_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_delay_amount_id"/>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_delay_month_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="1WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="贷记卡逾期情况1">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds" navbar="true" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_accounts" prompt="笔数"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_delay_amount" prompt="单月逾期最高额"/>
                                                                                    <a:column renderer="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_delay_month" prompt="最长逾期月数"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_accounts_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_delay_amount_id"/>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_delay_month_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="1WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                </a:tabs>
                                                            </a:tabPanel>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_T_ACT_REMARK_component_id"/>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_component_id">
                                                                <div>
                                                                    <div><![CDATA[个人担保能力评价]]></div>
                                                                    <a:textArea marginwidth="100" bindtarget="1WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" name="guar_explain" style="margin-top:3px;margin-bottom:3px" id="1WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_PRJ_PROJECT_ACT_CTRLER_HD_GUAR_EXPLAIN" height="150"/>
                                                                </div>
                                                            </a:hBox>
                                                        </a:box>
                                                    </a:tab>
                                                </a:tabs>
                                            </a:tabPanel>
                                        </a:box>
                                    </a:tab>
                                    <a:tab width="120" prompt="自然人担保人2">
                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                            <a:tabPanel marginwidth="30" style="padding:0px 0px 0px 0px" marginheight="100">
                                                <a:tabs>
                                                    <a:tab width="120" prompt="基本信息2">
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="1、本人信息" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="97" width="900" row="4">
                                                                        <a:lov colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="bp_id_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_BP_ID" prompt="姓名">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:comboBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="gender_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_GENDER" prompt="性别">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:datePicker colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_of_birth" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DATE_OF_BIRTH" prompt="出生日期"/>
                                                                        <a:comboBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="academic_background_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ACADEMIC_BACKGROUND" prompt="学历">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="province_id_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_PROVINCE_ID_N" prompt="省份"/>
                                                                        <a:comboBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="id_type_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ID_TYPE" prompt="证件类型">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="2" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="id_card_no" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ID_CARD_NO" prompt="证件号码"/>
                                                                        <a:textField colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="city_id_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_CITY_ID_N" prompt="市"/>
                                                                        <a:textField colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="district_id_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DISTRICT_ID_N" prompt="区/县"/>
                                                                        <a:textField colspan="2" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="address" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ADDRESS" prompt="详细地址"/>
                                                                        <a:checkBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="20" name="ref_v01" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_REF_V01" prompt="是否夫妻担保"/>
                                                                        <a:datePicker colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_credit_info" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DATE_CREDIT_INFO" prompt="查询时间"/>
                                                                        <a:textField colspan="2" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="credit_info" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_CREDIT_INFO" prompt="征信查询信息"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="2、配偶信息" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="97" width="900" row="5">
                                                                        <a:textField colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="bp_name_sp" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_BP_NAME_SP" prompt="(配偶)名称"/>
                                                                        <a:comboBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="gender_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_GENDER_SP" prompt="性别">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:datePicker colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_of_birth_sp" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DATE_OF_BIRTH_SP" prompt="出生日期"/>
                                                                        <a:comboBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="academic_background_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ACADEMIC_BACKGROUND_SP" prompt="学历">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:comboBox colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="id_type_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ID_TYPE_SP" prompt="证件类型">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="150" name="id_card_no_sp" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ID_CARD_NO_SP" prompt="证件号码"/>
                                                                        <a:lov colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="country_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_COUNTRY_SP" prompt="国家">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="province_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_PROVINCE_SP" prompt="省">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="city_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_CITY_SP" prompt="市">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="district_sp_n" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DISTRICT_SP" prompt="区/县">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:textField colspan="2" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="address_sp" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ADDRESS_SP" prompt="详细地址"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="industry_experience_sp" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_INDUSTRY_EXPERIENCE_SP" prompt="行业经验（年）"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="FALSE" colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="stockholding_ratio_sp" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_STOCKHOLDING_RATIO_SP" prompt="股东占比（%）"/>
                                                                        <div width="120" style="margin-top:3px;margin-bottom:3px"/>
                                                                        <div width="120" style="margin-top:3px;margin-bottom:3px"/>
                                                                        <a:datePicker colspan="1" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_credit_info_sp" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DATE_CREDIT_INFO_SP" prompt="查询时间"/>
                                                                        <a:textField colspan="3" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="570" name="credit_info_sp" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_CREDIT_INFO_SP" prompt="征信查询信息"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                    </a:tab>
                                                    <a:tab width="120" prompt="资产信息2">
                                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                                            <a:tabPanel marginwidth="100" style="padding:0px 0px 0px 0px" marginheight="250">
                                                                <a:tabs>
                                                                    <a:tab width="120" prompt="不动产2">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds" navbar="true" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="不动产序号"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="address_house_number" prompt="房产地址及门牌号"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="total_buy_amount" prompt="购买总价"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="buy_date" prompt="购买日期"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="payment_amount" prompt="已付金额"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="pledge_rent_flag_n" prompt="有无抵押/出租"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="property_flag_n" prompt="有无产权证 "/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_sequence_number_id"/>
                                                                                    <a:textField id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_address_house_number_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_total_buy_amount_id"/>
                                                                                    <a:datePicker id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_buy_date_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_payment_amount_id"/>
                                                                                    <a:comboBox id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:comboBox id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="动产2">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds" navbar="true" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="动产序号"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="personal_estate_name" prompt="名称"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="total_buy_amount" prompt="购买总价"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="buy_date" prompt="购买日期"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="payment_amount" prompt="已付金额"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="pledge_rent_flag_n" prompt="有无抵押/出租"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="property_flag_n" prompt="有无产权证 "/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_sequence_number_id"/>
                                                                                    <a:textField id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_personal_estate_name_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_total_buy_amount_id"/>
                                                                                    <a:datePicker id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_buy_date_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_payment_amount_id"/>
                                                                                    <a:comboBox id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:comboBox id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="股权2">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds" navbar="true" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="序号"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="company_name" prompt="被投资企业名称"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="registered_fund" prompt="注册资金"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="invest_date" prompt="投资日期"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="ratio_investments" prompt="出资比例"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="physical_cash_inver_n" prompt="实物/现金出资"/>
                                                                                    <a:column editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="duty" prompt="所任职务"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_sequence_number_id"/>
                                                                                    <a:textField id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_company_name_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_registered_fund_id"/>
                                                                                    <a:datePicker id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_invest_date_id"/>
                                                                                    <a:textField id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ratio_investments_id"/>
                                                                                    <a:comboBox id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:textField id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_duty_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="其他个人资产2">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_component_id">
                                                                                <div>
                                                                                    <div/>
                                                                                    <a:textArea marginwidth="150" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" name="description" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_PRJ_PROJECT_ACT_CTRLER_HD_DESCRIPTION" marginheight="320"/>
                                                                                </div>
                                                                            </a:hBox>
                                                                        </a:box>
                                                                    </a:tab>
                                                                </a:tabs>
                                                            </a:tabPanel>
                                                        </a:box>
                                                    </a:tab>
                                                    <a:tab width="120" prompt="信用信息2">
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="个人信用记录" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="70" width="900" row="2">
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="lending_org_count" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_LENDING_ORG_COUNT" prompt="贷款法人机构数"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="lending_account" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_LENDING_ACCOUNT" prompt="笔数"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="TRUE" colspan="1" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="contract_amount" allowpad="TRUE" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_CONTRACT_AMOUNT" prompt="合同总额"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="TRUE" colspan="1" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="outstanding_amount" allowpad="TRUE" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_OUTSTANDING_AMOUNT" prompt="余额"/>
                                                                        <a:textField colspan="4" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="800" name="descriptions" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_DESCRIPTIONS" prompt="说明"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                                            <a:tabPanel marginwidth="100" style="padding:0px 0px 0px 0px" marginheight="270">
                                                                <a:tabs>
                                                                    <a:tab width="120" prompt="贷记逾期情况2">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds" navbar="true" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_counts" prompt="笔数"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_delay_amount" prompt="单月逾期最高额"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_delay_month" prompt="最长逾期月数"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_counts_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_delay_amount_id"/>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_delay_month_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="2WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="贷记卡逾期情况2">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds" navbar="true" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_accounts" prompt="笔数"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_delay_amount" prompt="单月逾期最高额"/>
                                                                                    <a:column renderer="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_delay_month" prompt="最长逾期月数"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_accounts_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_delay_amount_id"/>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_delay_month_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="2WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                </a:tabs>
                                                            </a:tabPanel>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_T_ACT_REMARK_component_id"/>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_component_id">
                                                                <div>
                                                                    <div><![CDATA[个人担保能力评价]]></div>
                                                                    <a:textArea marginwidth="100" bindtarget="2WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" name="guar_explain" style="margin-top:3px;margin-bottom:3px" id="2WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_PRJ_PROJECT_ACT_CTRLER_HD_GUAR_EXPLAIN" height="150"/>
                                                                </div>
                                                            </a:hBox>
                                                        </a:box>
                                                    </a:tab>
                                                </a:tabs>
                                            </a:tabPanel>
                                        </a:box>
                                    </a:tab>
                                    <a:tab width="120" prompt="自然人担保人3">
                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                            <a:tabPanel marginwidth="30" style="padding:0px 0px 0px 0px" marginheight="100">
                                                <a:tabs>
                                                    <a:tab width="120" prompt="基本信息3">
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="1、本人信息" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="97" width="900" row="4">
                                                                        <a:lov colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="bp_id_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_BP_ID" prompt="姓名">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:comboBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="gender_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_GENDER" prompt="性别">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:datePicker colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_of_birth" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DATE_OF_BIRTH" prompt="出生日期"/>
                                                                        <a:comboBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="academic_background_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ACADEMIC_BACKGROUND" prompt="学历">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="province_id_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_PROVINCE_ID_N" prompt="省份"/>
                                                                        <a:comboBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="id_type_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ID_TYPE" prompt="证件类型">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="2" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="id_card_no" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ID_CARD_NO" prompt="证件号码"/>
                                                                        <a:textField colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="city_id_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_CITY_ID_N" prompt="市"/>
                                                                        <a:textField colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="district_id_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DISTRICT_ID_N" prompt="区/县"/>
                                                                        <a:textField colspan="2" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="address" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_ADDRESS" prompt="详细地址"/>
                                                                        <a:checkBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="20" name="ref_v01" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_REF_V01" prompt="是否夫妻担保"/>
                                                                        <a:datePicker colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_credit_info" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_DATE_CREDIT_INFO" prompt="查询时间"/>
                                                                        <a:textField colspan="2" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="credit_info" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_PRJ_PROJECT_ACT_CTRLER_HD_CREDIT_INFO" prompt="征信查询信息"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="2、配偶信息" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="97" width="900" row="5">
                                                                        <a:textField colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="bp_name_sp" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_BP_NAME_SP" prompt="(配偶)名称"/>
                                                                        <a:comboBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="gender_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_GENDER_SP" prompt="性别">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:datePicker colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_of_birth_sp" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DATE_OF_BIRTH_SP" prompt="出生日期"/>
                                                                        <a:comboBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="academic_background_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ACADEMIC_BACKGROUND_SP" prompt="学历">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:comboBox colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="id_type_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ID_TYPE_SP" prompt="证件类型">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                            </a:events>
                                                                        </a:comboBox>
                                                                        <a:textField colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="150" name="id_card_no_sp" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ID_CARD_NO_SP" prompt="证件号码"/>
                                                                        <a:lov colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="country_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_COUNTRY_SP" prompt="国家">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="province_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_PROVINCE_SP" prompt="省">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="city_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_CITY_SP" prompt="市">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:lov colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="district_sp_n" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DISTRICT_SP" prompt="区/县">
                                                                            <a:events>
                                                                                <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_ON_FORM_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                <a:event handler="ON_COMMON_OBJECT_BEFORECOMMIT" name="beforecommit"/>
                                                                            </a:events>
                                                                        </a:lov>
                                                                        <a:textField colspan="2" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="345" name="address_sp" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_ADDRESS_SP" prompt="详细地址"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="industry_experience_sp" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_INDUSTRY_EXPERIENCE_SP" prompt="行业经验（年）"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="FALSE" colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="stockholding_ratio_sp" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_STOCKHOLDING_RATIO_SP" prompt="股东占比（%）"/>
                                                                        <div width="120" style="margin-top:3px;margin-bottom:3px"/>
                                                                        <div width="120" style="margin-top:3px;margin-bottom:3px"/>
                                                                        <a:datePicker colspan="1" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="120" name="date_credit_info_sp" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_DATE_CREDIT_INFO_SP" prompt="查询时间"/>
                                                                        <a:textField colspan="3" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" rowspan="1" width="570" name="credit_info_sp" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_02_PRJ_PROJECT_ACT_CTRLER_HD_CREDIT_INFO_SP" prompt="征信查询信息"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                    </a:tab>
                                                    <a:tab width="120" prompt="资产信息3">
                                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                                            <a:tabPanel marginwidth="100" style="padding:0px 0px 0px 0px" marginheight="250">
                                                                <a:tabs>
                                                                    <a:tab width="120" prompt="不动产3">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_ds" navbar="true" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_prj_real_estate_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="不动产序号"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="address_house_number" prompt="房产地址及门牌号"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="total_buy_amount" prompt="购买总价"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="buy_date" prompt="购买日期"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="payment_amount" prompt="已付金额"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="pledge_rent_flag_n" prompt="有无抵押/出租"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="property_flag_n" prompt="有无产权证 "/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_sequence_number_id"/>
                                                                                    <a:textField id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_address_house_number_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_total_buy_amount_id"/>
                                                                                    <a:datePicker id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_buy_date_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_payment_amount_id"/>
                                                                                    <a:comboBox id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_pledge_rent_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:comboBox id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_property_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_REAL_ESTATE_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="动产3">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_ds" navbar="true" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_prj_personal_estate_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="动产序号"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="personal_estate_name" prompt="名称"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="total_buy_amount" prompt="购买总价"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="buy_date" prompt="购买日期"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="payment_amount" prompt="已付金额"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="pledge_rent_flag_n" prompt="有无抵押/出租"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="property_flag_n" prompt="有无产权证 "/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_sequence_number_id"/>
                                                                                    <a:textField id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_personal_estate_name_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_total_buy_amount_id"/>
                                                                                    <a:datePicker id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_buy_date_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_payment_amount_id"/>
                                                                                    <a:comboBox id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_pledge_rent_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:comboBox id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_property_flag_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_ESTATE_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="股权3">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_ds" navbar="true" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_prj_equity_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="sequence_number" prompt="序号"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="company_name" prompt="被投资企业名称"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="LEFT" width="120" name="registered_fund" prompt="注册资金"/>
                                                                                    <a:column renderer="Leaf.formatDate" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="invest_date" prompt="投资日期"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="ratio_investments" prompt="出资比例"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" align="CENTER" width="120" name="physical_cash_inver_n" prompt="实物/现金出资"/>
                                                                                    <a:column editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_SEE_DETAIL_EDITOR" showtitle="true" align="LEFT" width="120" name="duty" prompt="所任职务"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_sequence_number_id"/>
                                                                                    <a:textField id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_company_name_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_registered_fund_id"/>
                                                                                    <a:datePicker id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_invest_date_id"/>
                                                                                    <a:textField id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ratio_investments_id"/>
                                                                                    <a:comboBox id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_physical_cash_inver_id">
                                                                                        <a:events>
                                                                                            <a:event handler="window[&apos;3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ON_GRID_OBJECT_FOCUS&apos;]" name="focus"/>
                                                                                        </a:events>
                                                                                    </a:comboBox>
                                                                                    <a:textField id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_duty_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_EQUITY_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="其他个人资产3">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_component_id">
                                                                                <div>
                                                                                    <div/>
                                                                                    <a:textArea marginwidth="150" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" name="description" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_OTHER_PRJ_PROJECT_ACT_CTRLER_HD_DESCRIPTION" marginheight="320"/>
                                                                                </div>
                                                                            </a:hBox>
                                                                        </a:box>
                                                                    </a:tab>
                                                                </a:tabs>
                                                            </a:tabPanel>
                                                        </a:box>
                                                    </a:tab>
                                                    <a:tab width="120" prompt="信用信息3">
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:form title="个人信用记录" marginwidth="100" wrapperadjust="false" id="WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_component_id">
                                                                <div style="width:900px">
                                                                    <a:box labelseparator=" " column="4" labelwidth="70" width="900" row="2">
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="lending_org_count" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_LENDING_ORG_COUNT" prompt="贷款法人机构数"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="FALSE" allowformat="FALSE" colspan="1" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="lending_account" allowpad="FALSE" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_LENDING_ACCOUNT" prompt="笔数"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="TRUE" colspan="1" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="contract_amount" allowpad="TRUE" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_CONTRACT_AMOUNT" prompt="合同总额"/>
                                                                        <a:numberField decimalprecision="2" allowdecimals="TRUE" allowformat="TRUE" colspan="1" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="120" name="outstanding_amount" allowpad="TRUE" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_OUTSTANDING_AMOUNT" prompt="余额"/>
                                                                        <a:textField colspan="4" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_prj_project_personal_credit_ds" rowspan="1" width="800" name="descriptions" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PERSONAL_CREDI_PRJ_PROJECT_PERSONAL_CREDIT_DESCRIPTIONS" prompt="说明"/>
                                                                    </a:box>
                                                                </div>
                                                            </a:form>
                                                        </a:box>
                                                        <a:box padding="0" style="width:98%;padding:0px 0px 0px 5px">
                                                            <a:tabPanel marginwidth="100" style="padding:0px 0px 0px 0px" marginheight="270">
                                                                <a:tabs>
                                                                    <a:tab width="120" prompt="贷记逾期情况3">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_ds" navbar="true" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_prj_project_lend_card_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_counts" prompt="笔数"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_delay_amount" prompt="单月逾期最高额"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_SEE_DETAIL_EDITOR" align="center" width="120" name="lend_delay_month" prompt="最长逾期月数"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_counts_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_delay_amount_id"/>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_lend_delay_month_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="3WCS_PROJECT_MODIFY_T_T_PRJ_PROJECT_C_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                    <a:tab width="120" prompt="贷记卡逾期情况3">
                                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                                            <a:grid canwheel="true" marginwidth="150" bindtarget="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_ds" navbar="true" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_prj_project_lend_card_layout_grid_id" marginheight="320">
                                                                                <a:columns>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_accounts" prompt="笔数"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_delay_amount" prompt="单月逾期最高额"/>
                                                                                    <a:column renderer="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEEDETAIL_COLUMN_LN" editorfunction="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_SEE_DETAIL_EDITOR" align="center" width="120" name="card_delay_month" prompt="最长逾期月数"/>
                                                                                </a:columns>
                                                                                <a:editors>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_accounts_id"/>
                                                                                    <a:numberField decimalprecision="-1" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_delay_amount_id"/>
                                                                                    <a:numberField decimalprecision="-1" allowdecimals="false" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_card_delay_month_id"/>
                                                                                </a:editors>
                                                                                <a:toolBar>
                                                                                    <a:button type="add" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_ADD_layout_dynamic_button_id" text="新增"/>
                                                                                    <a:button type="delete" id="3WCS_PROJECT_MODIFY_T_T_T_PRJ_PROJECT_CARD_DELETE_layout_dynamic_button_id" text="删除"/>
                                                                                </a:toolBar>
                                                                            </a:grid>
                                                                        </a:box>
                                                                    </a:tab>
                                                                </a:tabs>
                                                            </a:tabPanel>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_T_ACT_REMARK_component_id"/>
                                                        </a:box>
                                                        <a:box style="width:98%;padding:0px 0px 0px 0px">
                                                            <a:hBox labelseparator=" " id="WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_component_id">
                                                                <div>
                                                                    <div><![CDATA[个人担保能力评价]]></div>
                                                                    <a:textArea marginwidth="100" bindtarget="3WCS_PROJECT_MODIFY_F_ACT_CTRLER_01_prj_project_act_ctrler_hd_ds" name="guar_explain" style="margin-top:3px;margin-bottom:3px" id="3WCS_PROJECT_MODIFY_F_ACT_GUAR_EXPLAIN_PRJ_PROJECT_ACT_CTRLER_HD_GUAR_EXPLAIN" height="150"/>
                                                                </div>
                                                            </a:hBox>
                                                        </a:box>
                                                    </a:tab>
                                                </a:tabs>
                                            </a:tabPanel>
                                        </a:box>
                                    </a:tab>
                                </a:tabs>
                            </a:tabPanel>
                        </a:box>
                    </a:tab>
                </a:tabs>
            </a:tabPanel>
        </a:screenBody>
    </a:view>
</a:screen>
