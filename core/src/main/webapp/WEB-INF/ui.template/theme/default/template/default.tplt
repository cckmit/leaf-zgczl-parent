<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>${page:title}</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
${page:html.head.css} 
${page:html.head.script}
<script src="${page:contextPath}/javascripts/aurora-plugin.js"></script>
<script src="${page:contextPath}/javascripts/calculate.js"></script>
</head>
<style>
	.query-form {
	    border:1px solid #ccc;
	    margin-bottom:10px;
	    -webkit-radius:0px;
	    border-radius:0px;
	    -moz-box-shadow:none;
	    -webkit-box-shadow:none;
	    box-shadow:none;
	}
	.query-form  .query_form_head {
    	padding:5px;
    	background: url(${page:contextPath}/resource/aurora.ui.std/default/grid/grid_bg.gif) repeat-x;
    	-webkit-radius:0px;
    	border-radius:0px;
    	color:#000;
	}
	.query-form .form_body_wrap {
	    padding:5px;
	    position:absolute;
	    background-color:#fcfcfc;
	    border:1px solid #ccc;
	    z-index:21;
	    background-color: #eff0ef;
	    -webkit-radius:0px;
	    border-radius:0px;
	    -moz-box-shadow:none;
	    -webkit-box-shadow:none;
	    box-shadow:none;
	}
	.cell-editor-div{
		display:none;
	}
</style>
<body>
    <script language="javascript">
    	/**
    	超时标志，具体操作过程为：
    	1.在default.tplt中注册timeout事件
    	2.超时时调用main.screen的showlogin方法并设置isTimeout为true
    	3.用户在login_timeout.screen输入密码，如果成功则将isTimeout重新设置为false
    	**/
    	var isTimeout = false;
        function checkFrame(){
	    	Aurora.Status.enable = false;
			Aurora.SideBar.enable = true;
            if(parent && parent.unionKey == "hap_main"){                
            }else{
                //window.location.href = '${page:contextPath}/error_wrong_entrance.screen';
            }
        }

        checkFrame();
        if(parent && parent.ajaxSuccessFunction){
			Ext.Ajax.on('requestcomplete',parent.ajaxSuccessFunction);        
        }
        
        function isIpad() {
            var ua = navigator.userAgent.toLowerCase();
            if (ua.match(/iPad/i) == "ipad") {
                return true;
            } else {
                return false;
            }
        }
        
        Aurora.manager.on('timeout',function(){
            if(top&& top.showlogin && !isTimeout){
 				isTimeout = true;
            	top.showlogin();    
            }
            return false;
        });
        
        Ext.get(document.documentElement).on('click',function(el)
        {
            if(parent && parent != self && parent.hideCurrentMenu)
            {
            	parent.hideCurrentMenu();
            }
        });
        
    </script>
    <div></div>
	${page:init}
	${page:content}
	<input type="hidden" class="logLink" screen="${/@service_name}" value="viewlog?file=${/@SERVICE_LOGGING_FILE}"/>	
</body>
</html>